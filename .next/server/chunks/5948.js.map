{"version":3,"file":"5948.js","mappings":"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","sources":["webpack://mistswap-interface/./src/components/Alert/index.tsx","webpack://mistswap-interface/./src/components/Card/index.tsx","webpack://mistswap-interface/./src/components/Input/Address/index.tsx","webpack://mistswap-interface/./src/components/Input/Numeric/index.tsx","webpack://mistswap-interface/./src/components/Input/Percent/index.tsx","webpack://mistswap-interface/./src/components/Input/index.tsx","webpack://mistswap-interface/./src/components/Main/index.tsx","webpack://mistswap-interface/./src/components/Toggle/index.tsx","webpack://mistswap-interface/./src/components/TransactionSettings/index.tsx","webpack://mistswap-interface/./src/components/Settings/index.tsx","webpack://mistswap-interface/./src/config/oracles/chainlink/index.ts","webpack://mistswap-interface/./src/entities/KashiCooker.ts","webpack://mistswap-interface/./src/entities/Oracle.ts","webpack://mistswap-interface/./src/features/exchange-v1/swap/FormattedPriceImpact.tsx","webpack://mistswap-interface/./src/features/exchange-v1/swap/SwapRoute.tsx","webpack://mistswap-interface/./src/features/kashi/context/index.tsx","webpack://mistswap-interface/./src/components/Checkbox/index.tsx","webpack://mistswap-interface/./src/features/kashi/Checkbox.tsx","webpack://mistswap-interface/./src/hooks/useKashiApproveCallback.ts","webpack://mistswap-interface/./src/features/kashi/Button.tsx","webpack://mistswap-interface/./src/entities/Warnings.ts","webpack://mistswap-interface/./src/features/kashi/SmartNumberInput.tsx","webpack://mistswap-interface/./src/features/kashi/TradeReview.tsx","webpack://mistswap-interface/./src/entities/TransactionReview.ts","webpack://mistswap-interface/./src/features/kashi/TransactionReview.tsx","webpack://mistswap-interface/./src/features/kashi/WarningsList.tsx","webpack://mistswap-interface/./src/features/kashi/Borrow.tsx","webpack://mistswap-interface/./src/features/kashi/Repay.tsx","webpack://mistswap-interface/./src/features/kashi/Deposit.tsx","webpack://mistswap-interface/./src/features/kashi/Withdraw.tsx","webpack://mistswap-interface/./src/features/kashi/index.ts","webpack://mistswap-interface/./src/functions/cloudinary.ts","webpack://mistswap-interface/./src/hooks/useENS.ts","webpack://mistswap-interface/./src/hooks/useENSAddress.ts","webpack://mistswap-interface/./src/hooks/useOnClickOutside.tsx","webpack://mistswap-interface/./src/hooks/useSwapSlippageTollerence.ts","webpack://mistswap-interface/./public/kashi-logo.png","webpack://mistswap-interface/./src/layouts/Kashi/index.tsx","webpack://mistswap-interface/./src/hooks/useTransactionStatus.ts","webpack://mistswap-interface/./src/state/bentobox/hooks.ts"],"sourcesContent":["import React, { useState } from 'react'\n\nimport { XIcon } from '@heroicons/react/solid'\nimport { classNames } from '../../functions'\n\nconst TYPE = {\n  information: {\n    color: 'bg-purple bg-opacity-20 text-high-emphesis',\n    icon: (\n      <svg\n        width=\"33\"\n        height=\"33\"\n        className=\"text-low-emphesis\"\n        viewBox=\"0 0 33 33\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        path=\"currentColor\"\n        fill=\"currentColor\"\n        aria-hidden=\"true\"\n      >\n        <path\n          d=\"M16.5 0C7.40184 0 0 7.40184 0 16.5C0 25.5982 7.40184 33 16.5 33C25.5982 33 33 25.5982 33 16.5C33 7.40184 25.5982 0 16.5 0ZM16.5 25.9909C15.5747 25.9909 14.8245 25.2407 14.8245 24.3154C14.8245 23.39 15.5747 22.6398 16.5 22.6398C17.4253 22.6398 18.1755 23.39 18.1755 24.3154C18.1755 25.2407 17.4253 25.9909 16.5 25.9909ZM18.1755 17.3898C18.1755 18.3152 17.4253 19.0654 16.5 19.0654C15.5747 19.0654 14.8245 18.3152 14.8245 17.3898V8.56534C14.8245 7.63999 15.5747 6.8898 16.5 6.8898C17.4253 6.8898 18.1755 7.63999 18.1755 8.56534V17.3898Z\"\n          fill=\"#575757\"\n        />\n      </svg>\n    ),\n  },\n  warning: {\n    color: 'bg-yellow bg-opacity-25 text-high-emphesis',\n    icon: (\n      <svg\n        className=\"w-5 h-5 text-yellow\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 20 20\"\n        fill=\"currentColor\"\n        aria-hidden=\"true\"\n      >\n        <path\n          fillRule=\"evenodd\"\n          d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\"\n          clipRule=\"evenodd\"\n        />\n      </svg>\n    ),\n  },\n  error: {\n    color: 'bg-red bg-opacity-25 text-high-emphesis',\n    icon: (\n      <svg\n        className=\"w-5 h-5 text-red\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 20 20\"\n        fill=\"currentColor\"\n        aria-hidden=\"true\"\n      >\n        <path\n          fillRule=\"evenodd\"\n          d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\n          clipRule=\"evenodd\"\n        />\n      </svg>\n    ),\n  },\n}\n\nexport interface AlertProps {\n  title?: string\n  message?: string | React.ReactChild | React.ReactChild[]\n  type?: 'warning' | 'error' | 'information'\n  showIcon?: boolean\n  dismissable?: boolean\n}\n\nexport default function Alert({\n  title,\n  message,\n  type = 'warning',\n  className = '',\n  showIcon = false,\n  dismissable = true,\n}: AlertProps & React.HTMLAttributes<HTMLDivElement>): JSX.Element | null {\n  // TODO: Persist this...\n  const [show, setShow] = useState(true)\n  const { color, icon } = TYPE[type]\n  return message && show ? (\n    <div className={classNames('block relative w-full rounded text-sm p-4', show && 'pr-10', color, className)}>\n      {title && <div className=\"mb-1 text-2xl font-medium\">{title}</div>}\n      <div className=\"flex items-center\">\n        {showIcon && <div className=\"flex-shrink-0\">{icon}</div>}\n        <div className={!showIcon ? 'ml-0' : 'ml-3'}>\n          <p className=\"text-base\">{message}</p>\n        </div>\n      </div>\n      {dismissable && (\n        <div className=\"absolute top-2 right-2\">\n          <button\n            type=\"button\"\n            onClick={() => setShow(!show)}\n            className=\"inline-flex opacity-80 hover:opacity-100 focused:opacity-100 rounded p-1.5 text-primary hover:text-high-emphesis focus:text-high-emphesis focus:outline-none focus:ring focus:ring-offset focus:ring-offset-purple focus:ring-purple\"\n          >\n            <span className=\"sr-only\">Dismiss</span>\n            <XIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\n          </button>\n        </div>\n      )}\n    </div>\n  ) : null\n}\n","import React from 'react'\nimport { classNames } from '../../functions/styling'\n\nfunction Header({ className, children }) {\n  return (\n    <div className={classNames('flex items-center rounded-t px-4 sm:px-8 py-4 sm:py-6', className)}>{children}</div>\n  )\n}\n\ntype CardProps = {\n  header?: React.ReactChild\n  footer?: React.ReactChild\n  backgroundImage?: string\n  title?: string\n  description?: string\n} & React.HTMLAttributes<HTMLDivElement>\n\nfunction Card({\n  header = undefined,\n  footer = undefined,\n  backgroundImage = '',\n  title = '',\n  description = '',\n  children,\n  className,\n}: CardProps) {\n  return (\n    <div\n      className={`relative ${className}`}\n      style={{\n        borderRadius: '10px',\n        backgroundImage: `url(${backgroundImage})`,\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: 'contain',\n        backgroundPosition: 'center bottom',\n      }}\n    >\n      {header && <>{header}</>}\n\n      <div className=\"px-2 py-4 sm:p-8\">\n        {title && <div className=\"mb-4 text-2xl text-high-emphesis\">{title}</div>}\n        {description && <div className=\"text-base text-secondary\">{description}</div>}\n        {children}\n      </div>\n\n      {footer && <>{footer}</>}\n    </div>\n  )\n}\n\nCard.Header = Header\n\nexport default Card\n","import { classNames, escapeRegExp } from '../../../functions'\n\nimport React from 'react'\nimport useENS from '../../../hooks/useENS'\n\nconst inputRegex = RegExp(`^\\\\d*$`) // match escaped \".\" characters via in a non-capturing group\n\nexport const AddressInput = React.memo(\n  ({\n    value,\n    onUserInput,\n    placeholder,\n    className = 'flex w-full h-full p-3 font-bold rounded overflow-ellipsis recipient-address-input bg-dark-900 placeholder-low-emphesis',\n    align,\n    fontSize = '24px',\n    ...rest\n  }: {\n    value: string\n    onUserInput: (input: string) => void\n    error?: boolean\n    fontSize?: string\n    align?: 'right' | 'left'\n  } & Omit<React.HTMLProps<HTMLInputElement>, 'ref' | 'onChange' | 'as'>) => {\n    const { address, loading } = useENS(value)\n\n    const enforcer = (nextUserInput: string) => {\n      onUserInput(nextUserInput)\n    }\n\n    return (\n      <>\n        <input\n          value={value}\n          onChange={(event) => {\n            enforcer(event.target.value.replace(/\\s+/g, ''))\n          }}\n          // universal input options\n          inputMode=\"text\"\n          title=\"Wallet Address or ENS name\"\n          autoComplete=\"off\"\n          autoCorrect=\"off\"\n          autoCapitalize=\"off\"\n          spellCheck=\"false\"\n          placeholder=\"Wallet Address or ENS name\"\n          pattern=\"^(0x[a-fA-F0-9]{40})$\"\n          // text-specific options\n          type=\"text\"\n          className={classNames(\n            align === 'right' && 'text-right',\n            'font-medium bg-transparent whitespace-nowrap overflow-ellipsis flex-auto',\n            className\n          )}\n          style={{ fontSize }}\n          {...rest}\n        />\n      </>\n    )\n  }\n)\n\nAddressInput.displayName = 'AddressInput'\n\nexport default AddressInput\n\n// const inputRegex = RegExp(`^\\\\d*(?:\\\\\\\\[.])?\\\\d*$`) // match escaped \".\" characters via in a non-capturing group\n","import { classNames, escapeRegExp } from '../../../functions'\n\nimport React from 'react'\n\nconst inputRegex = RegExp(`^\\\\d*(?:\\\\\\\\[.])?\\\\d*$`) // match escaped \".\" characters via in a non-capturing group\n\nconst defaultClassName = 'w-0 p-0 text-2xl bg-transparent'\n\nexport const Input = React.memo(\n  ({\n    value,\n    onUserInput,\n    placeholder,\n    className = defaultClassName,\n    ...rest\n  }: {\n    value: string | number\n    onUserInput: (input: string) => void\n    error?: boolean\n    fontSize?: string\n    align?: 'right' | 'left'\n  } & Omit<React.HTMLProps<HTMLInputElement>, 'ref' | 'onChange' | 'as'>) => {\n    const enforcer = (nextUserInput: string) => {\n      if (nextUserInput === '' || inputRegex.test(escapeRegExp(nextUserInput))) {\n        onUserInput(nextUserInput)\n      }\n    }\n\n    return (\n      <input\n        {...rest}\n        value={value}\n        onChange={(event) => {\n          // replace commas with periods, because uniswap exclusively uses period as the decimal separator\n          enforcer(event.target.value.replace(/,/g, '.'))\n        }}\n        // universal input options\n        inputMode=\"decimal\"\n        title=\"Token Amount\"\n        autoComplete=\"off\"\n        autoCorrect=\"off\"\n        // text-specific options\n        type=\"text\"\n        pattern=\"^[0-9]*[.,]?[0-9]*$\"\n        placeholder={placeholder || '0.0'}\n        min={0}\n        minLength={1}\n        maxLength={79}\n        spellCheck=\"false\"\n        className={classNames(\n          'relative font-bold outline-none border-none flex-auto overflow-hidden overflow-ellipsis placeholder-low-emphesis focus:placeholder-primary',\n          className\n        )}\n      />\n    )\n  }\n)\n\nInput.displayName = 'NumericalInput'\n\nexport default Input\n\n// const inputRegex = RegExp(`^\\\\d*(?:\\\\\\\\[.])?\\\\d*$`) // match escaped \".\" characters via in a non-capturing group\n","import { classNames, escapeRegExp } from '../../../functions'\n\nimport React from 'react'\n\nconst inputRegex = RegExp(`^\\\\d*$`) // match escaped \".\" characters via in a non-capturing group\n\nexport const Input = React.memo(\n  ({\n    value,\n    onUserInput,\n    placeholder,\n    className,\n    align,\n    fontSize = '24px',\n    ...rest\n  }: {\n    value: string | number\n    onUserInput: (input: string) => void\n    error?: boolean\n    fontSize?: string\n    align?: 'right' | 'left'\n  } & Omit<React.HTMLProps<HTMLInputElement>, 'ref' | 'onChange' | 'as'>) => {\n    const enforcer = (nextUserInput: string) => {\n      if (nextUserInput === '' || inputRegex.test(escapeRegExp(nextUserInput))) {\n        if (Number(nextUserInput) <= 100) {\n          onUserInput(nextUserInput)\n        }\n      }\n    }\n\n    return (\n      <>\n        <input\n          value={value}\n          onChange={(event) => {\n            // replace commas with periods, because uniswap exclusively uses period as the decimal separator\n            enforcer(event.target.value.replace(/,/g, '.').replace(/%/g, ''))\n          }}\n          // universal input options\n          inputMode=\"decimal\"\n          title=\"Token Amount\"\n          autoComplete=\"off\"\n          autoCorrect=\"off\"\n          // text-specific options\n          type=\"text\"\n          pattern=\"^[0-9]*$\"\n          placeholder={placeholder || '100'}\n          maxLength={3}\n          className={classNames(\n            align === 'right' && 'text-right',\n            'relative font-medium bg-transparent whitespace-nowrap overflow-ellipsis flex-auto percent-translate',\n            className\n          )}\n          style={{ fontSize }}\n          {...rest}\n        />\n      </>\n    )\n  }\n)\n\nInput.displayName = 'PercentInput'\n\nexport default Input\n","import Address from './Address'\nimport Numeric from './Numeric'\nimport Percent from './Percent'\n\nconst Input = {\n  Address,\n  Percent,\n  Numeric,\n}\n\nexport default Input\n","const Main = ({ children }) => (\n  <main className=\"flex flex-col items-center justify-start flex-grow w-full h-full\" style={{ height: 'max-content' }}>\n    {children}\n  </main>\n)\n\nexport default Main\n","import React from 'react'\nimport { Switch } from '@headlessui/react'\nimport { classNames } from '../../functions'\n\nexport interface ToggleProps {\n  id?: string\n  isActive: boolean\n  toggle: () => void\n}\n\nexport default function Toggle({ id, isActive, toggle }: ToggleProps) {\n  return (\n    <Switch\n      checked={isActive}\n      onChange={toggle}\n      className={classNames(\n        isActive ? 'bg-blue' : 'bg-dark-800',\n        'relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none'\n      )}\n    >\n      <span className=\"sr-only\">Use setting</span>\n      <span\n        className={classNames(\n          isActive ? 'translate-x-5' : 'translate-x-0',\n          'pointer-events-none relative inline-block h-5 w-5 rounded-full bg-dark-900 shadow transform ring-0 transition ease-in-out duration-200'\n        )}\n      >\n        <span\n          className={classNames(\n            isActive ? 'opacity-0 ease-out duration-100' : 'opacity-100 ease-in duration-200',\n            'absolute inset-0 h-full w-full flex items-center justify-center transition-opacity'\n          )}\n          aria-hidden=\"true\"\n        >\n          <svg className=\"w-3 h-3 text-low-emphesis\" fill=\"none\" viewBox=\"0 0 12 12\">\n            <path\n              d=\"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2\"\n              stroke=\"currentColor\"\n              strokeWidth={2}\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </svg>\n        </span>\n        <span\n          className={classNames(\n            isActive ? 'opacity-100 ease-in duration-200' : 'opacity-0 ease-out duration-100',\n            'absolute inset-0 h-full w-full flex items-center justify-center transition-opacity'\n          )}\n          aria-hidden=\"true\"\n        >\n          <svg className=\"w-3 h-3 text-high-emphesis\" fill=\"currentColor\" viewBox=\"0 0 12 12\">\n            <path d=\"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414zm3.414 2l4-4-1.414-1.414-4 4 1.414 1.414z\" />\n          </svg>\n        </span>\n      </span>\n    </Switch>\n  )\n}\n","import React, { useRef, useState } from 'react'\nimport { useSetUserSlippageTolerance, useUserSlippageTolerance, useUserTransactionTTL } from '../../state/user/hooks'\n\nimport { DEFAULT_DEADLINE_FROM_NOW } from '../../constants'\nimport { Percent } from '@mistswapdex/sdk'\nimport QuestionHelper from '../QuestionHelper'\nimport Typography from '../Typography'\nimport { classNames } from '../../functions'\nimport { t } from '@lingui/macro'\nimport { useLingui } from '@lingui/react'\nimport Button from '../Button'\n\nenum SlippageError {\n  InvalidInput = 'InvalidInput',\n  RiskyLow = 'RiskyLow',\n  RiskyHigh = 'RiskyHigh',\n}\n\nenum DeadlineError {\n  InvalidInput = 'InvalidInput',\n}\n\nexport interface TransactionSettingsProps {\n  placeholderSlippage?: Percent // varies according to the context in which the settings dialog is placed\n}\n\nexport default function TransactionSettings({ placeholderSlippage }: TransactionSettingsProps) {\n  const { i18n } = useLingui()\n\n  const inputRef = useRef<HTMLInputElement>()\n\n  const userSlippageTolerance = useUserSlippageTolerance()\n  const setUserSlippageTolerance = useSetUserSlippageTolerance()\n\n  const [deadline, setDeadline] = useUserTransactionTTL()\n\n  const [slippageInput, setSlippageInput] = useState('')\n  const [slippageError, setSlippageError] = useState<SlippageError | false>(false)\n\n  const [deadlineInput, setDeadlineInput] = useState('')\n  const [deadlineError, setDeadlineError] = useState<DeadlineError | false>(false)\n\n  function parseSlippageInput(value: string) {\n    // populate what the user typed and clear the error\n    setSlippageInput(value)\n    setSlippageError(false)\n\n    if (value.length === 0) {\n      setUserSlippageTolerance('auto')\n    } else {\n      const parsed = Math.floor(Number.parseFloat(value) * 100)\n\n      if (!Number.isInteger(parsed) || parsed < 0 || parsed > 5000) {\n        setUserSlippageTolerance('auto')\n        if (value !== '.') {\n          setSlippageError(SlippageError.InvalidInput)\n        }\n      } else {\n        setUserSlippageTolerance(new Percent(parsed, 10_000))\n      }\n    }\n  }\n\n  const tooLow = userSlippageTolerance !== 'auto' && userSlippageTolerance.lessThan(new Percent(5, 10_000))\n  const tooHigh = userSlippageTolerance !== 'auto' && userSlippageTolerance.greaterThan(new Percent(1, 100))\n\n  function parseCustomDeadline(value: string) {\n    // populate what the user typed and clear the error\n    setDeadlineInput(value)\n    setDeadlineError(false)\n\n    if (value.length === 0) {\n      setDeadline(DEFAULT_DEADLINE_FROM_NOW)\n    } else {\n      try {\n        const parsed: number = Math.floor(Number.parseFloat(value) * 60)\n        if (!Number.isInteger(parsed) || parsed < 60 || parsed > 180 * 60) {\n          setDeadlineError(DeadlineError.InvalidInput)\n        } else {\n          setDeadline(parsed)\n        }\n      } catch (error) {\n        console.error(error)\n        setDeadlineError(DeadlineError.InvalidInput)\n      }\n    }\n  }\n\n  return (\n    <div className=\"grid gap-4\">\n      <div className=\"grid gap-2\">\n        <div className=\"flex items-center\">\n          <Typography variant=\"sm\" className=\"text-high-emphesis\">\n            {i18n._(t`Slippage tolerance`)}\n          </Typography>\n\n          <QuestionHelper\n            text={i18n._(\n              t`Your transaction will revert 23if the price changes unfavorably by more than this percentage.`\n            )}\n          />\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <div\n            className={classNames(\n              !!slippageError\n                ? 'border-red'\n                : tooLow || tooHigh\n                ? 'border-yellow'\n                : userSlippageTolerance !== 'auto'\n                ? 'border-blue'\n                : 'border-transparent',\n              'border p-2 rounded bg-dark-800'\n            )}\n            tabIndex={-1}\n          >\n            <div className=\"flex items-center justify-between gap-1\">\n              {tooLow || tooHigh ? (\n                <span className=\"hidden sm:inline text-yellow\" role=\"img\" aria-label=\"warning\">\n                  ⚠️\n                </span>\n              ) : null}\n              <input\n                className={classNames(slippageError ? 'text-red' : '', 'bg-transparent placeholder-low-emphesis')}\n                placeholder={placeholderSlippage?.toFixed(2)}\n                value={\n                  slippageInput.length > 0\n                    ? slippageInput\n                    : userSlippageTolerance === 'auto'\n                    ? ''\n                    : userSlippageTolerance.toFixed(2)\n                }\n                onChange={(e) => parseSlippageInput(e.target.value)}\n                onBlur={() => {\n                  setSlippageInput('')\n                  setSlippageError(false)\n                }}\n                color={slippageError ? 'red' : ''}\n              />\n              %\n            </div>\n          </div>\n          <Button\n            size=\"sm\"\n            color={userSlippageTolerance === 'auto' ? 'blue' : 'gray'}\n            variant={userSlippageTolerance === 'auto' ? 'filled' : 'outlined'}\n            onClick={() => {\n              parseSlippageInput('')\n            }}\n          >\n            {i18n._(t`Auto`)}\n          </Button>\n        </div>\n        {slippageError || tooLow || tooHigh ? (\n          <Typography\n            className={classNames(\n              slippageError === SlippageError.InvalidInput ? 'text-red' : 'text-yellow',\n              'font-medium flex items-center space-x-2'\n            )}\n            variant=\"sm\"\n          >\n            <div>\n              {slippageError === SlippageError.InvalidInput\n                ? i18n._(t`Enter a valid slippage percentage`)\n                : slippageError === SlippageError.RiskyLow\n                ? i18n._(t`Your transaction may fail`)\n                : i18n._(t`Your transaction may be frontrun`)}\n            </div>\n          </Typography>\n        ) : null}\n      </div>\n\n      <div className=\"grid gap-2\">\n        <div className=\"flex items-center\">\n          <Typography variant=\"sm\" className=\"text-high-emphesis\">\n            {i18n._(t`Transaction deadline`)}\n          </Typography>\n\n          <QuestionHelper text={i18n._(t`Your transaction will revert if it is pending for more than this long.`)} />\n        </div>\n        <div className=\"flex items-center\">\n          <div\n            className=\"p-2 rounded bg-dark-800 min-w-[82px] max-w-[102px]\"\n            style={{ maxWidth: '40px', marginRight: '8px' }}\n            tabIndex={-1}\n          >\n            <input\n              className={classNames(deadlineError ? 'text-red' : '', 'bg-transparent placeholder-low-emphesis')}\n              placeholder={(DEFAULT_DEADLINE_FROM_NOW / 60).toString()}\n              value={\n                deadlineInput.length > 0\n                  ? deadlineInput\n                  : deadline === DEFAULT_DEADLINE_FROM_NOW\n                  ? ''\n                  : (deadline / 60).toString()\n              }\n              onChange={(e) => parseCustomDeadline(e.target.value)}\n              onBlur={() => {\n                setDeadlineInput('')\n                setDeadlineError(false)\n              }}\n              color={deadlineError ? 'red' : ''}\n            />\n          </div>\n          <Typography variant=\"sm\">{i18n._(t`minutes`)}</Typography>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { ChainId, Percent } from '@mistswapdex/sdk'\nimport React, { useRef, useState } from 'react'\nimport {\n  useExpertModeManager,\n  useUserArcherUseRelay,\n  useUserSingleHopOnly,\n  useUserTransactionTTL,\n} from '../../state/user/hooks'\nimport { useModalOpen, useToggleSettingsMenu } from '../../state/application/hooks'\n\nimport { AdjustmentsIcon } from '@heroicons/react/outline'\nimport { ApplicationModal } from '../../state/application/actions'\nimport Button from '../Button'\nimport Modal from '../Modal'\nimport ModalHeader from '../ModalHeader'\nimport QuestionHelper from '../QuestionHelper'\nimport Toggle from '../Toggle'\nimport TransactionSettings from '../TransactionSettings'\nimport Typography from '../Typography'\nimport { t } from '@lingui/macro'\nimport { useActiveWeb3React } from '../../hooks'\nimport { useLingui } from '@lingui/react'\nimport { useOnClickOutside } from '../../hooks/useOnClickOutside'\n\nexport default function SettingsTab({ placeholderSlippage }: { placeholderSlippage?: Percent }) {\n  const { i18n } = useLingui()\n  const { chainId } = useActiveWeb3React()\n\n  const node = useRef<HTMLDivElement>(null)\n  const open = useModalOpen(ApplicationModal.SETTINGS)\n  const toggle = useToggleSettingsMenu()\n\n  const [expertMode, toggleExpertMode] = useExpertModeManager()\n\n  const [singleHopOnly, setSingleHopOnly] = useUserSingleHopOnly()\n\n  // show confirmation view before turning on\n  const [showConfirmation, setShowConfirmation] = useState(false)\n\n  useOnClickOutside(node, open ? toggle : undefined)\n\n  const [ttl, setTtl] = useUserTransactionTTL()\n\n  const [userUseArcher, setUserUseArcher] = useUserArcherUseRelay()\n\n  return (\n    <div className=\"relative flex\" ref={node}>\n      <div\n        className=\"flex items-center justify-center w-8 h-8 rounded cursor-pointer\"\n        onClick={toggle}\n        id=\"open-settings-dialog-button\"\n      >\n        <AdjustmentsIcon className=\"w-[26px] h-[26px] transform rotate-90\" />\n      </div>\n      {open && (\n        <div className=\"absolute top-14 right-0 z-50 -mr-2.5 min-w-20 md:m-w-22 md:-mr-5 bg-dark-900 border-2 border-dark-800 rounded w-80 shadow-lg\">\n          <div className=\"p-4 space-y-4\">\n            <Typography weight={700} className=\"text-high-emphesis\">\n              {i18n._(t`Transaction Settings`)}\n            </Typography>\n\n            <TransactionSettings placeholderSlippage={placeholderSlippage} />\n\n            <Typography className=\"text-high-emphesis\" weight={700}>\n              {i18n._(t`Interface Settings`)}\n            </Typography>\n\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center\">\n                <Typography variant=\"sm\" className=\"text-primary\">\n                  {i18n._(t`Toggle Expert Mode`)}\n                </Typography>\n                <QuestionHelper\n                  text={i18n._(t`Bypasses confirmation modals and allows high slippage trades. Use at your own risk.`)}\n                />\n              </div>\n              <Toggle\n                id=\"toggle-expert-mode-button\"\n                isActive={expertMode}\n                toggle={\n                  expertMode\n                    ? () => {\n                        toggleExpertMode()\n                        setShowConfirmation(false)\n                      }\n                    : () => {\n                        toggle()\n                        setShowConfirmation(true)\n                      }\n                }\n              />\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center\">\n                <Typography variant=\"sm\" className=\"text-primary\">\n                  {i18n._(t`Disable Multihops`)}\n                </Typography>\n                <QuestionHelper text={i18n._(t`Restricts swaps to direct pairs only.`)} />\n              </div>\n              <Toggle\n                id=\"toggle-disable-multihop-button\"\n                isActive={singleHopOnly}\n                toggle={() => (singleHopOnly ? setSingleHopOnly(false) : setSingleHopOnly(true))}\n              />\n            </div>\n            {/* {chainId == ChainId.SMARTBCH && (\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <Typography variant=\"sm\" className=\"text-primary\">\n                    {i18n._(t`MEV Shield by Archer DAO`)}\n                  </Typography>\n                  <QuestionHelper\n                    text={i18n._(\n                      t`Send transaction privately to avoid front-running and sandwich attacks. Requires a miner tip to incentivize miners`\n                    )}\n                  />\n                </div>\n                <Toggle\n                  id=\"toggle-use-archer\"\n                  isActive={userUseArcher}\n                  toggle={() => setUserUseArcher(!userUseArcher)}\n                />\n              </div>\n            )} */}\n          </div>\n        </div>\n      )}\n\n      <Modal isOpen={showConfirmation} onDismiss={() => setShowConfirmation(false)}>\n        <div className=\"space-y-4\">\n          <ModalHeader title={i18n._(t`Are you sure?`)} onClose={() => setShowConfirmation(false)} />\n          <Typography variant=\"lg\">\n            {i18n._(t`Expert mode turns off the confirm transaction prompt and allows high slippage trades\n                                that often result in bad rates and lost funds.`)}\n          </Typography>\n          <Typography variant=\"sm\" className=\"font-medium\">\n            {i18n._(t`ONLY USE THIS MODE IF YOU KNOW WHAT YOU ARE DOING.`)}\n          </Typography>\n          <Button\n            color=\"red\"\n            size=\"lg\"\n            onClick={() => {\n              // if (window.prompt(i18n._(t`Please type the word \"confirm\" to enable expert mode.`)) === 'confirm') {\n              //   toggleExpertMode()\n              //   setShowConfirmation(false)\n              // }\n              toggleExpertMode()\n              setShowConfirmation(false)\n            }}\n          >\n            <Typography variant=\"lg\" id=\"confirm-expert-mode\">\n              {i18n._(t`Turn On Expert Mode`)}\n            </Typography>\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  )\n}\n","import { ChainId } from '@mistswapdex/sdk'\n\nexport type ChainlinkPriceFeedMap = {\n  readonly [address: string]: {\n    from: string\n    to: string\n    decimals: number\n    fromDecimals: number\n    toDecimals: number\n    warning?: string\n    address?: string\n  }\n}\n\nexport const CHAINLINK_PRICE_FEED_MAP: {\n  [chainId in ChainId]?: ChainlinkPriceFeedMap\n} = {\n}\n","import { BigNumber, BigNumberish } from '@ethersproject/bignumber'\nimport { ChainId, WNATIVE } from '@mistswapdex/sdk'\nimport { getProviderOrSigner, getSigner } from '../functions/contract'\n\nimport { AddressZero } from '@ethersproject/constants'\nimport { Contract } from '@ethersproject/contracts'\nimport KASHIPAIR_ABI from '../constants/abis/kashipair.json'\nimport { KashiPermit } from '../hooks/useKashiApproveCallback'\nimport { Web3Provider } from '@ethersproject/providers'\nimport { ZERO } from '../functions/math'\nimport { defaultAbiCoder } from '@ethersproject/abi'\nimport { toElastic } from '../functions/rebase'\nimport { toShare } from '../functions/bentobox'\n\nexport async function signMasterContractApproval(\n  bentoBoxContract: Contract | null,\n  masterContract: string | undefined,\n  user: string,\n  library: Web3Provider,\n  approved: boolean,\n  chainId: ChainId | undefined\n): Promise<string> {\n  const warning = approved ? 'Give FULL access to funds in (and approved to) BentoBox?' : 'Revoke access to BentoBox?'\n  const nonce = await bentoBoxContract?.nonces(user)\n  const message = {\n    warning,\n    user,\n    masterContract,\n    approved,\n    nonce,\n  }\n\n  const typedData = {\n    types: {\n      SetMasterContractApproval: [\n        { name: 'warning', type: 'string' },\n        { name: 'user', type: 'address' },\n        { name: 'masterContract', type: 'address' },\n        { name: 'approved', type: 'bool' },\n        { name: 'nonce', type: 'uint256' },\n      ],\n    },\n    primaryType: 'SetMasterContractApproval',\n    domain: {\n      name: 'BentoBox V1',\n      chainId: chainId,\n      verifyingContract: bentoBoxContract?.address,\n    },\n    message: message,\n  }\n  const signer = getSigner(library, user)\n  return signer._signTypedData(typedData.domain, typedData.types, typedData.message)\n}\n\nenum Action {\n  ADD_ASSET = 1,\n  REPAY = 2,\n  REMOVE_ASSET = 3,\n  REMOVE_COLLATERAL = 4,\n  BORROW = 5,\n  GET_REPAY_SHARE = 6,\n  GET_REPAY_PART = 7,\n  ACCRUE = 8,\n\n  // Functions that don't need accrue to be called\n  ADD_COLLATERAL = 10,\n  UPDATE_EXCHANGE_RATE = 11,\n\n  // Function on BentoBox\n  BENTO_DEPOSIT = 20,\n  BENTO_WITHDRAW = 21,\n  BENTO_TRANSFER = 22,\n  BENTO_TRANSFER_MULTIPLE = 23,\n  BENTO_SETAPPROVAL = 24,\n\n  // Any external call (except to BentoBox)\n  CALL = 30,\n}\n\nexport default class KashiCooker {\n  private pair: any\n  private account: string\n  private library: Web3Provider | undefined\n  private chainId: ChainId\n\n  private actions: Action[]\n  private values: BigNumber[]\n  private datas: string[]\n\n  constructor(\n    pair: any,\n    account: string | null | undefined,\n    library: Web3Provider | undefined,\n    chainId: ChainId | undefined\n  ) {\n    this.pair = pair\n    this.account = account || AddressZero\n    this.library = library\n    this.chainId = chainId || 1\n\n    this.actions = []\n    this.values = []\n    this.datas = []\n  }\n\n  add(action: Action, data: string, value: BigNumberish = 0): void {\n    this.actions.push(action)\n    this.datas.push(data)\n    this.values.push(BigNumber.from(value))\n  }\n\n  approve(permit: KashiPermit): void {\n    if (permit) {\n      this.add(\n        Action.BENTO_SETAPPROVAL,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'bool', 'uint8', 'bytes32', 'bytes32'],\n          [permit.account, permit.masterContract, true, permit.v, permit.r, permit.s]\n        )\n      )\n    }\n  }\n\n  updateExchangeRate(mustUpdate = false, minRate = ZERO, maxRate = ZERO): KashiCooker {\n    this.add(\n      Action.UPDATE_EXCHANGE_RATE,\n      defaultAbiCoder.encode(['bool', 'uint256', 'uint256'], [mustUpdate, minRate, maxRate])\n    )\n    return this\n  }\n\n  bentoDepositCollateral(amount: BigNumber): KashiCooker {\n    const useNative = this.pair.collateral.address === WNATIVE[this.chainId].address\n\n    this.add(\n      Action.BENTO_DEPOSIT,\n      defaultAbiCoder.encode(\n        ['address', 'address', 'int256', 'int256'],\n        [useNative ? AddressZero : this.pair.collateral.address, this.account, amount, 0]\n      ),\n      useNative ? amount : ZERO\n    )\n\n    return this\n  }\n\n  bentoWithdrawCollateral(amount: BigNumber, share: BigNumber): KashiCooker {\n    const useNative = this.pair.collateral.address === WNATIVE[this.chainId].address\n\n    this.add(\n      Action.BENTO_WITHDRAW,\n      defaultAbiCoder.encode(\n        ['address', 'address', 'int256', 'int256'],\n        [useNative ? AddressZero : this.pair.collateral.address, this.account, amount, share]\n      ),\n      useNative ? amount : ZERO\n    )\n\n    return this\n  }\n\n  bentoTransferCollateral(share: BigNumber, toAddress: string): KashiCooker {\n    this.add(\n      Action.BENTO_TRANSFER,\n      defaultAbiCoder.encode(['address', 'address', 'int256'], [this.pair.collateral.address, toAddress, share])\n    )\n\n    return this\n  }\n\n  repayShare(part: BigNumber): KashiCooker {\n    this.add(Action.GET_REPAY_SHARE, defaultAbiCoder.encode(['int256'], [part]))\n\n    return this\n  }\n\n  addCollateral(amount: BigNumber, fromBento: boolean): KashiCooker {\n    let share: BigNumber\n    if (fromBento) {\n      share = amount.lt(0) ? amount : toShare(this.pair.collateral, amount)\n    } else {\n      const useNative = this.pair.collateral.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_DEPOSIT,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.collateral.address, this.account, amount, 0]\n        ),\n        useNative ? amount : ZERO\n      )\n      share = BigNumber.from(-2)\n    }\n\n    this.add(Action.ADD_COLLATERAL, defaultAbiCoder.encode(['int256', 'address', 'bool'], [share, this.account, false]))\n    return this\n  }\n\n  addAsset(amount: BigNumber, fromBento: boolean): KashiCooker {\n    let share: BigNumber\n    if (fromBento) {\n      share = toShare(this.pair.asset, amount)\n    } else {\n      const useNative = this.pair.asset.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_DEPOSIT,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.asset.address, this.account, amount, 0]\n        ),\n        useNative ? amount : ZERO\n      )\n      share = BigNumber.from(-2)\n    }\n\n    this.add(Action.ADD_ASSET, defaultAbiCoder.encode(['int256', 'address', 'bool'], [share, this.account, false]))\n    return this\n  }\n\n  removeAsset(fraction: BigNumber, toBento: boolean): KashiCooker {\n    this.add(Action.REMOVE_ASSET, defaultAbiCoder.encode(['int256', 'address'], [fraction, this.account]))\n    if (!toBento) {\n      const useNative = this.pair.asset.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_WITHDRAW,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.asset.address, this.account, 0, -1]\n        )\n      )\n    }\n    return this\n  }\n\n  removeCollateral(share: BigNumber, toBento: boolean): KashiCooker {\n    this.add(Action.REMOVE_COLLATERAL, defaultAbiCoder.encode(['int256', 'address'], [share, this.account]))\n    if (!toBento) {\n      const useNative = this.pair.collateral.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_WITHDRAW,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.collateral.address, this.account, 0, share]\n        )\n      )\n    }\n    return this\n  }\n\n  removeCollateralFraction(fraction: BigNumber, toBento: boolean): KashiCooker {\n    this.add(Action.REMOVE_COLLATERAL, defaultAbiCoder.encode(['int256', 'address'], [fraction, this.account]))\n    if (!toBento) {\n      const useNative = this.pair.collateral.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_WITHDRAW,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.collateral.address, this.account, 0, -1]\n        )\n      )\n    }\n    return this\n  }\n\n  borrow(amount: BigNumber, toBento: boolean, toAddress = ''): KashiCooker {\n    this.add(\n      Action.BORROW,\n      defaultAbiCoder.encode(['int256', 'address'], [amount, toAddress && toBento ? toAddress : this.account])\n    )\n    if (!toBento) {\n      const useNative = this.pair.asset.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_WITHDRAW,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.asset.address, toAddress || this.account, amount, 0]\n        )\n      )\n    }\n    return this\n  }\n\n  repay(amount: BigNumber, fromBento: boolean): KashiCooker {\n    if (!fromBento) {\n      const useNative = this.pair.asset.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_DEPOSIT,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.asset.address, this.account, amount, 0]\n        ),\n        useNative ? amount : ZERO\n      )\n    }\n    this.add(Action.GET_REPAY_PART, defaultAbiCoder.encode(['int256'], [fromBento ? amount : -1]))\n    this.add(Action.REPAY, defaultAbiCoder.encode(['int256', 'address', 'bool'], [-1, this.account, false]))\n    return this\n  }\n\n  repayPart(part: BigNumber, fromBento: boolean): KashiCooker {\n    if (!fromBento) {\n      const useNative = this.pair.asset.address === WNATIVE[this.chainId].address\n\n      this.add(Action.GET_REPAY_SHARE, defaultAbiCoder.encode(['int256'], [part]))\n      this.add(\n        Action.BENTO_DEPOSIT,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.asset.address, this.account, 0, -1]\n        ),\n        // TODO: Put some warning in the UI or not allow repaying ETH directly from wallet, because this can't be pre-calculated\n        useNative ? toShare(this.pair.asset, toElastic(this.pair.totalBorrow, part, true)).mul(1001).div(1000) : ZERO\n      )\n    }\n    this.add(Action.REPAY, defaultAbiCoder.encode(['int256', 'address', 'bool'], [part, this.account, false]))\n    return this\n  }\n\n  action(\n    address: string,\n    value: BigNumberish,\n    data: string,\n    useValue1: boolean,\n    useValue2: boolean,\n    returnValues: number\n  ): void {\n    this.add(\n      Action.CALL,\n      defaultAbiCoder.encode(\n        ['address', 'bytes', 'bool', 'bool', 'uint8'],\n        [address, data, useValue1, useValue2, returnValues]\n      ),\n      value\n    )\n  }\n\n  async cook() {\n    if (!this.library) {\n      return {\n        success: false,\n      }\n    }\n\n    const kashiPairCloneContract = new Contract(\n      this.pair.address,\n      KASHIPAIR_ABI,\n      getProviderOrSigner(this.library, this.account) as any\n    )\n\n    try {\n      return {\n        success: true,\n        tx: await kashiPairCloneContract.cook(this.actions, this.values, this.datas, {\n          value: this.values.reduce((a, b) => a.add(b), ZERO),\n        }),\n      }\n    } catch (error) {\n      console.error('KashiCooker Error: ', error)\n      return {\n        success: false,\n        error: error,\n      }\n    }\n  }\n}\n","import { ChainId, Token } from '@mistswapdex/sdk'\n\nimport { AddressZero } from '@ethersproject/constants'\nimport { CHAINLINK_PRICE_FEED_MAP } from '../config/oracles/chainlink'\nimport { defaultAbiCoder } from '@ethersproject/abi'\nimport { e10 } from '../functions/math'\n\nexport interface Oracle {\n  address: string\n  name: string\n  data: string\n  warning: string\n  error: string\n  valid: boolean\n}\n\nexport abstract class AbstractOracle implements Oracle {\n  address = ''\n  name = 'None'\n  data = ''\n  warning = ''\n  error = ''\n  chainId = ChainId.SMARTBCH\n  pair: any\n  tokens: Token[]\n  valid = false\n\n  constructor(pair: any, chainId, tokens?: Token[]) {\n    this.address = pair.oracle\n    this.data = pair.oracleData\n    this.pair = pair\n    this.chainId = chainId\n    this.tokens = tokens\n  }\n}\n\nexport class SushiSwapTWAP0Oracle extends AbstractOracle {\n  constructor(pair, chainId: ChainId, tokens?: Token[]) {\n    super(pair, chainId, tokens)\n    this.name = 'SushiSwap'\n  }\n}\n\nexport class SushiSwapTWAP1Oracle extends AbstractOracle {\n  constructor(pair, chainId: ChainId, tokens?: Token[]) {\n    super(pair, chainId, tokens)\n    this.name = 'SushiSwap'\n  }\n}\n\nexport class ChainlinkOracle extends AbstractOracle {\n  constructor(pair, chainId: ChainId, tokens?: Token[]) {\n    super(pair, chainId, tokens)\n    this.name = 'Chainlink'\n    this.valid = this.validate()\n  }\n\n  private validate() {\n    const mapping = CHAINLINK_PRICE_FEED_MAP[this.chainId]\n    if (!mapping) {\n      return false\n    }\n    const params = defaultAbiCoder.decode(['address', 'address', 'uint256'], this.data)\n    let decimals = 54\n    let from = ''\n    let to = ''\n    if (params[0] !== AddressZero) {\n      if (!mapping![params[0]]) {\n        this.error = 'One of the Chainlink oracles used is not configured in this UI.'\n        return false\n      } else {\n        decimals -= 18 - mapping![params[0]].decimals\n        from = mapping![params[0]].from\n        to = mapping![params[0]].to\n      }\n    }\n    if (params[1] !== AddressZero) {\n      if (!mapping![params[1]]) {\n        this.error = 'One of the Chainlink oracles used is not configured in this UI.'\n        return false\n      } else {\n        decimals -= mapping![params[1]].decimals\n        if (!to) {\n          from = mapping![params[1]].to\n          to = mapping![params[1]].from\n        } else if (to === mapping![params[1]].to) {\n          to = mapping![params[1]].from\n        } else {\n          this.error =\n            \"The Chainlink oracles used don't match up with eachother. If 2 oracles are used, they should have a common token, such as WBTC/ETH and LINK/ETH, where ETH is the common link.\"\n          return false\n        }\n      }\n    }\n    if (\n      from === this.pair.assetAddress &&\n      to === this.pair.collateralAddress &&\n      this.tokens[this.pair.collateralAddress] &&\n      this.tokens[this.pair.assetAddress]\n    ) {\n      const needed =\n        this.tokens[this.pair.collateralAddress].decimals + 18 - this.tokens[this.pair.assetAddress].decimals\n      const divider = e10(decimals - needed)\n      if (!divider.eq(params[2])) {\n        this.error =\n          'The divider parameter is misconfigured for this oracle, which leads to rates that are order(s) of magnitude wrong.'\n        return false\n      } else {\n        return true\n      }\n    } else {\n      this.error = \"The Chainlink oracles configured don't match the pair tokens.\"\n      return false\n    }\n  }\n}\n\nfunction lowerEqual(value1: string, value2: string) {\n  return value1.toLowerCase() === value2.toLowerCase()\n}\n\nexport function getOracle(pair, chainId: ChainId, tokens): Oracle {\n  // if (lowerEqual(pair.oracle, CHAINLINK_ORACLE_ADDRESS[chainId])) {\n  if (lowerEqual(pair.oracle, \"\")) {\n    return new ChainlinkOracle(pair, chainId, tokens)\n  }\n}\n","import { ONE_BIPS } from '../../../constants'\nimport { Percent } from '@mistswapdex/sdk'\nimport React from 'react'\nimport { warningSeverity } from '../../../functions/prices'\n\nconst SEVERITY = {\n  0: 'text-green',\n  1: 'text-high-emphesis',\n  2: 'text-yellow',\n  3: 'text-red',\n  4: 'text-red',\n}\n\nexport default function FormattedPriceImpact({ priceImpact }: { priceImpact?: Percent }) {\n  return (\n    <div className={`text-sm font-bold ${SEVERITY[warningSeverity(priceImpact)]}`}>\n      {priceImpact ? `${priceImpact.multiply(-1).toFixed(2)}%` : '-'}\n    </div>\n  )\n}\n","import { Currency, Trade, TradeType } from '@mistswapdex/sdk'\nimport React, { Fragment, memo } from 'react'\n\nimport { ChevronRightIcon } from '@heroicons/react/outline'\nimport { unwrappedToken } from '../../../functions/currency/wrappedCurrency'\n\nconst SwapRoute = memo(({ trade }: { trade: Trade<Currency, Currency, TradeType> }) => {\n  return (\n    <div className=\"flex flex-wrap items-center justify-end\">\n      {trade.route.path.map((token, i, path) => {\n        const isLastItem: boolean = i === path.length - 1\n        const currency = unwrappedToken(token)\n        return (\n          <Fragment key={i}>\n            <div className=\"flex space-x-2 flex-end\">\n              <div className=\"text-sm font-bold text-high-emphesis\">{currency.symbol}</div>\n            </div>\n            {isLastItem ? null : <ChevronRightIcon width={12} height={12} />}\n          </Fragment>\n        )\n      })}\n    </div>\n  )\n})\n\nSwapRoute.displayName = 'SwapRoute'\n\nexport default SwapRoute\n","import {\n  ChainId,\n  Currency,\n  KASHI_ADDRESS,\n  NATIVE,\n  Token,\n  FLEXUSD_ADDRESS,\n  WNATIVE,\n  WNATIVE_ADDRESS,\n} from '@mistswapdex/sdk'\nimport React, { createContext, useCallback, useContext, useEffect, useReducer } from 'react'\nimport { ZERO, e10, maximum, minimum } from '../../../functions/math'\nimport {\n  accrue,\n  accrueTotalAssetWithFee,\n  easyAmount,\n  getUSDValue,\n  interestAccrue,\n  takeFee,\n} from '../../../functions/kashi'\nimport { toAmount, toShare } from '../../../functions/bentobox'\nimport { useBentoBoxContract, useBoringHelperContract } from '../../../hooks/useContract'\n\nimport { BigNumber } from '@ethersproject/bignumber'\nimport Fraction from '../../../entities/Fraction'\nimport { bentobox } from '@sushiswap/sushi-data'\nimport { defaultAbiCoder } from '@ethersproject/abi'\nimport { getAddress } from '@ethersproject/address'\nimport { getCurrency } from '../../../functions/currency'\nimport { getOracle } from '../../../entities/Oracle'\nimport { toElastic } from '../../../functions/rebase'\nimport { useActiveWeb3React } from '../../../hooks/useActiveWeb3React'\nimport { useAllTokens } from '../../../hooks/Tokens'\nimport { useBlockNumber } from '../../../state/application/hooks'\nimport usePrevious from '../../../hooks/usePrevious'\nimport { useSingleCallResult } from '../../../state/multicall/hooks'\n\nenum ActionType {\n  UPDATE = 'UPDATE',\n  SYNC = 'SYNC',\n}\n\ninterface Reducer {\n  type: ActionType\n  payload: any\n}\n\ninterface State {\n  info:\n    | {\n        ethBalance: BigNumber\n        sushiBalance: BigNumber\n        sushiBarBalance: BigNumber\n        xsushiBalance: BigNumber\n        xsushiSupply: BigNumber\n        sushiBarAllowance: BigNumber\n        factories: any[]\n        ethRate: BigNumber\n        sushiRate: BigNumber\n        btcRate: BigNumber\n        pendingSushi: BigNumber\n        blockTimeStamp: BigNumber\n        masterContractApproved: boolean[]\n      }\n    | undefined\n  pairs: any[]\n}\n\nconst initialState: State = {\n  info: {\n    ethBalance: ZERO,\n    sushiBalance: ZERO,\n    sushiBarBalance: ZERO,\n    xsushiBalance: ZERO,\n    xsushiSupply: ZERO,\n    sushiBarAllowance: ZERO,\n    factories: [],\n    ethRate: ZERO,\n    sushiRate: ZERO,\n    btcRate: ZERO,\n    pendingSushi: ZERO,\n    blockTimeStamp: ZERO,\n    masterContractApproved: [],\n  },\n  pairs: [],\n}\n\nexport interface KashiContextProps {\n  state: State\n  dispatch: React.Dispatch<any>\n}\n\ntype KashiProviderProps = {\n  state: State\n  dispatch: React.Dispatch<any>\n}\n\nexport const KashiContext = createContext<{\n  state: State\n  dispatch: React.Dispatch<any>\n}>({\n  state: initialState,\n  dispatch: () => null,\n})\n\nconst reducer: React.Reducer<State, Reducer> = (state: any, action: any) => {\n  switch (action.type) {\n    case ActionType.SYNC:\n      return {\n        ...state,\n      }\n    case ActionType.UPDATE:\n      const { info, pairs } = action.payload\n      return {\n        ...state,\n        info,\n        pairs,\n      }\n    default:\n      return state\n  }\n}\n\nasync function getPairs(bentoBoxContract, chainId: ChainId) {\n  let logs = []\n  let success = false\n  const masterAddress = KASHI_ADDRESS[chainId]\n  // if (chainId !== ChainId.BSC && chainId !== ChainId.MATIC) {\n    logs = await bentoBoxContract.queryFilter(bentoBoxContract.filters.LogDeploy(masterAddress))\n    success = true\n  // }\n  if (!success) {\n    logs = (\n      (await bentobox.clones({\n        masterAddress,\n        chainId,\n      })) as any\n    ).map((clone) => {\n      return {\n        args: {\n          masterContract: masterAddress,\n          cloneAddress: clone.address,\n          data: clone.data,\n        },\n      }\n    })\n  }\n\n  return logs.map((log) => {\n    const deployParams = defaultAbiCoder.decode(['address', 'address', 'address', 'bytes'], log.args?.data)\n    return {\n      masterContract: log.args?.masterContract,\n      address: log.args?.cloneAddress,\n      collateralAddress: deployParams[0],\n      assetAddress: deployParams[1],\n      oracle: deployParams[2],\n      oracleData: deployParams[3],\n    }\n  })\n}\n\nclass Tokens extends Array {\n  add(address: any) {\n    if (!this[address]) {\n      this[address] = { address: address }\n    }\n    return this[address]\n  }\n}\n\nexport function rpcToObj(rpc_obj: any, obj?: any) {\n  if (rpc_obj instanceof BigNumber) {\n    return rpc_obj\n  }\n  if (!obj) {\n    obj = {}\n  }\n  if (typeof rpc_obj === 'object') {\n    if (Object.keys(rpc_obj).length && isNaN(Number(Object.keys(rpc_obj)[Object.keys(rpc_obj).length - 1]))) {\n      for (const i in rpc_obj) {\n        if (isNaN(Number(i))) {\n          obj[i] = rpcToObj(rpc_obj[i])\n        }\n      }\n      return obj\n    }\n    return rpc_obj.map((item) => rpcToObj(item))\n  }\n  return rpc_obj\n}\n\nexport function KashiProvider({ children }) {\n  const [state, dispatch] = useReducer<React.Reducer<State, Reducer>>(reducer, initialState)\n  const blockNumber = useBlockNumber()\n\n  const { account, chainId } = useActiveWeb3React()\n\n  const wnative = WNATIVE_ADDRESS[chainId]\n\n  const currency = FLEXUSD_ADDRESS[chainId]\n\n  const boringHelperContract = useBoringHelperContract()\n  const bentoBoxContract = useBentoBoxContract()\n\n  const tokens = useAllTokens()\n\n  // const info = useSingleCallResult(boringHelperContract, 'getUIInfo', [\n  //   account,\n  //   [],\n  //   USDC[chainId].address,\n  //   [KASHI_ADDRESS[chainId]],\n  // ])?.result?.[0]\n\n  // console.log({ info })\n\n  const updatePairs = useCallback(async () => {\n    console.log('update pairs')\n    if (\n      !account ||\n      !chainId ||\n      ![/*ChainId.MAINNET, ChainId.KOVAN, ChainId.BSC, ChainId.MATIC, ChainId.XDAI, ChainId.ARBITRUM*/].includes(chainId)\n    ) {\n      return\n    }\n\n    if (boringHelperContract && bentoBoxContract) {\n      // // console.log('READY TO RUMBLE')\n      const info = rpcToObj(await boringHelperContract.getUIInfo(account, [], currency, [KASHI_ADDRESS[chainId]]))\n\n      // Get the deployed pairs from the logs and decode\n      const logPairs = await getPairs(bentoBoxContract, chainId)\n      // console.log({ logPairs })\n\n      // Filter all pairs by supported oracles and verify the oracle setup\n\n      const invalidOracles = []\n\n      const allPairAddresses = logPairs\n        .filter((pair) => {\n          const oracle = getOracle(pair, chainId, tokens)\n          if (!oracle.valid) {\n            // console.log(pair, oracle.valid, oracle.error)\n            invalidOracles.push({ pair, error: oracle.error })\n          }\n          return oracle.valid\n        })\n        .map((pair) => pair.address)\n\n      console.log('invalidOracles', invalidOracles)\n\n      // Get full info on all the verified pairs\n      const pairs = rpcToObj(await boringHelperContract.pollKashiPairs(account, allPairAddresses))\n\n      // Get a list of all tokens in the pairs\n      const pairTokens = new Tokens()\n\n      pairTokens.add(currency)\n\n      pairs.forEach((pair, i: number) => {\n        pair.address = allPairAddresses[i]\n        pair.collateral = pairTokens.add(pair.collateral)\n        pair.asset = pairTokens.add(pair.asset)\n      })\n\n      // Get balances, bentobox info and allowences for the tokens\n      const pairAddresses = Object.values(pairTokens).map((token) => token.address)\n      const balances = rpcToObj(await boringHelperContract.getBalances(account, pairAddresses))\n\n      const missingTokens = []\n\n      balances.forEach((balance, i: number) => {\n        if (tokens[balance.token]) {\n          Object.assign(pairTokens[balance.token], tokens[balance.token])\n        } else {\n          missingTokens.push(balance.token)\n        }\n        Object.assign(pairTokens[balance.token], balance)\n      })\n\n      // For any tokens that are not on the defaultTokenList, retrieve name, symbol, decimals, etc.\n      if (missingTokens.length) {\n        console.log('missing tokens length', missingTokens.length)\n        // TODO\n      }\n\n      // Calculate the USD price for each token\n      Object.values(pairTokens).forEach((token) => {\n        token.symbol = token.address === wnative ? NATIVE[chainId].symbol : token.tokenInfo.symbol\n        token.usd = e10(token.tokenInfo.decimals).mulDiv(pairTokens[currency].rate, token.rate)\n      })\n\n      dispatch({\n        type: ActionType.UPDATE,\n        payload: {\n          info,\n          pairs: pairs\n            .filter((pair) => pair.asset !== pair.collateral)\n            .map((pair, i: number) => {\n              pair.elapsedSeconds = BigNumber.from(Date.now()).div('1000').sub(pair.accrueInfo.lastAccrued)\n\n              // Interest per year at last accrue, this will apply during the next accrue\n              pair.interestPerYear = pair.accrueInfo.interestPerSecond.mul('60').mul('60').mul('24').mul('365')\n\n              // The total collateral in the market (stable, doesn't accrue)\n              pair.totalCollateralAmount = easyAmount(\n                toAmount(pair.collateral, pair.totalCollateralShare),\n                pair.collateral\n              )\n\n              // The total assets unborrowed in the market (stable, doesn't accrue)\n              pair.totalAssetAmount = easyAmount(toAmount(pair.asset, pair.totalAsset.elastic), pair.asset)\n\n              // The total assets borrowed in the market right now\n              pair.currentBorrowAmount = easyAmount(accrue(pair, pair.totalBorrow.elastic, true), pair.asset)\n\n              // The total amount of assets, both borrowed and still available right now\n              pair.currentAllAssets = easyAmount(\n                pair.totalAssetAmount.value.add(pair.currentBorrowAmount.value),\n                pair.asset\n              )\n\n              pair.marketHealth = pair.totalCollateralAmount.value\n                .mulDiv(e10(18), maximum(pair.currentExchangeRate, pair.oracleExchangeRate, pair.spotExchangeRate))\n                .mulDiv(e10(18), pair.currentBorrowAmount.value)\n\n              pair.currentTotalAsset = accrueTotalAssetWithFee(pair)\n\n              pair.currentAllAssetShares = toShare(pair.asset, pair.currentAllAssets.value)\n\n              // Maximum amount of assets available for withdrawal or borrow\n              pair.maxAssetAvailable = minimum(\n                pair.totalAsset.elastic.mulDiv(pair.currentAllAssets.value, pair.currentAllAssetShares),\n                toAmount(pair.asset, toElastic(pair.currentTotalAsset, pair.totalAsset.base.sub(1000), false))\n              )\n\n              pair.maxAssetAvailableFraction = pair.maxAssetAvailable.mulDiv(\n                pair.currentTotalAsset.base,\n                pair.currentAllAssets.value\n              )\n\n              // The percentage of assets that is borrowed out right now\n              pair.utilization = e10(18).mulDiv(pair.currentBorrowAmount.value, pair.currentAllAssets.value)\n\n              // Interest per year received by lenders as of now\n              pair.supplyAPR = takeFee(pair.interestPerYear.mulDiv(pair.utilization, e10(18)))\n\n              // Interest payable by borrowers per year as of now\n              pair.currentInterestPerYear = interestAccrue(pair, pair.interestPerYear)\n\n              // Interest per year received by lenders as of now\n              pair.currentSupplyAPR = takeFee(pair.currentInterestPerYear.mulDiv(pair.utilization, e10(18)))\n\n              // The user's amount of collateral (stable, doesn't accrue)\n              pair.userCollateralAmount = easyAmount(\n                toAmount(pair.collateral, pair.userCollateralShare),\n                pair.collateral\n              )\n\n              // The user's amount of assets (stable, doesn't accrue)\n              pair.currentUserAssetAmount = easyAmount(\n                pair.userAssetFraction.mulDiv(pair.currentAllAssets.value, pair.totalAsset.base),\n                pair.asset\n              )\n\n              // The user's amount borrowed right now\n              pair.currentUserBorrowAmount = easyAmount(\n                pair.userBorrowPart.mulDiv(pair.currentBorrowAmount.value, pair.totalBorrow.base),\n                pair.asset\n              )\n\n              // The user's amount of assets that are currently lent\n              pair.currentUserLentAmount = easyAmount(\n                pair.userAssetFraction.mulDiv(pair.currentBorrowAmount.value, pair.totalAsset.base),\n                pair.asset\n              )\n\n              // Value of protocol fees\n              pair.feesEarned = easyAmount(\n                pair.accrueInfo.feesEarnedFraction.mulDiv(pair.currentAllAssets.value, pair.totalAsset.base),\n                pair.asset\n              )\n\n              // The user's maximum borrowable amount based on the collateral provided, using all three oracle values\n              pair.maxBorrowable = {\n                oracle: pair.userCollateralAmount.value.mulDiv(e10(16).mul('75'), pair.oracleExchangeRate),\n                spot: pair.userCollateralAmount.value.mulDiv(e10(16).mul('75'), pair.spotExchangeRate),\n                stored: pair.userCollateralAmount.value.mulDiv(e10(16).mul('75'), pair.currentExchangeRate),\n              }\n\n              pair.maxBorrowable.minimum = minimum(\n                pair.maxBorrowable.oracle,\n                pair.maxBorrowable.spot,\n                pair.maxBorrowable.stored\n              )\n\n              pair.maxBorrowable.safe = pair.maxBorrowable.minimum\n                .mulDiv('95', '100')\n                .sub(pair.currentUserBorrowAmount.value)\n\n              pair.maxBorrowable.possible = minimum(pair.maxBorrowable.safe, pair.maxAssetAvailable)\n\n              pair.safeMaxRemovable = ZERO\n\n              pair.health = pair.currentUserBorrowAmount.value.mulDiv(e10(18), pair.maxBorrowable.minimum)\n\n              pair.netWorth = getUSDValue(\n                pair.currentUserAssetAmount.value.sub(pair.currentUserBorrowAmount.value),\n                pair.asset\n              ).add(getUSDValue(pair.userCollateralAmount.value, pair.collateral))\n\n              pair.search = pair.asset.tokenInfo.symbol + '/' + pair.collateral.tokenInfo.symbol\n\n              pair.oracle = getOracle(pair, chainId, tokens)\n\n              pair.interestPerYear = {\n                value: pair.interestPerYear,\n                string: pair.interestPerYear.toFixed(16),\n              }\n\n              pair.supplyAPR = {\n                value: pair.supplyAPR,\n                string: Fraction.from(pair.supplyAPR, e10(16)).toString(),\n              }\n              pair.currentSupplyAPR = {\n                value: pair.currentSupplyAPR,\n                string: Fraction.from(pair.currentSupplyAPR, e10(16)).toString(),\n              }\n              pair.currentInterestPerYear = {\n                value: pair.currentInterestPerYear,\n                string: Fraction.from(pair.currentInterestPerYear, BigNumber.from(10).pow(16)).toString(),\n              }\n              pair.utilization = {\n                value: pair.utilization,\n                string: Fraction.from(pair.utilization, BigNumber.from(10).pow(16)).toString(),\n              }\n              pair.health = {\n                value: pair.health,\n                string: Fraction.from(pair.health, e10(16)),\n              }\n              pair.maxBorrowable = {\n                oracle: easyAmount(pair.maxBorrowable.oracle, pair.asset),\n                spot: easyAmount(pair.maxBorrowable.spot, pair.asset),\n                stored: easyAmount(pair.maxBorrowable.stored, pair.asset),\n                minimum: easyAmount(pair.maxBorrowable.minimum, pair.asset),\n                safe: easyAmount(pair.maxBorrowable.safe, pair.asset),\n                possible: easyAmount(pair.maxBorrowable.possible, pair.asset),\n              }\n\n              pair.safeMaxRemovable = easyAmount(pair.safeMaxRemovable, pair.collateral)\n\n              return pair\n            }),\n        },\n      })\n    }\n  }, [account, chainId, boringHelperContract, bentoBoxContract, currency, tokens, wnative])\n\n  const previousBlockNumber = usePrevious(blockNumber)\n\n  useEffect(() => {\n    blockNumber !== previousBlockNumber && updatePairs()\n  }, [blockNumber, previousBlockNumber, updatePairs])\n\n  return (\n    <KashiContext.Provider\n      value={{\n        state,\n        dispatch,\n      }}\n    >\n      {children}\n    </KashiContext.Provider>\n  )\n}\n\nexport function useKashiInfo() {\n  const context = useContext(KashiContext)\n  if (context === undefined) {\n    throw new Error('useKashiInfo must be used within a KashiProvider')\n  }\n  return context.state.info\n}\n\nexport function useKashiPairs() {\n  const context = useContext(KashiContext)\n  if (context === undefined) {\n    throw new Error('useKashiPairs must be used within a KashiProvider')\n  }\n  return context.state.pairs\n}\n\nexport function useKashiPair(address: string) {\n  const context = useContext(KashiContext)\n  if (context === undefined) {\n    throw new Error('useKashiPair must be used within a KashiProvider')\n  }\n  return context.state.pairs.find((pair) => {\n    return getAddress(pair.address) === getAddress(address)\n  })\n}\n\nexport default KashiProvider\n","import QuestionHelper from '../QuestionHelper'\nimport React from 'react'\nimport Settings from '../Settings'\n\nexport type Color = 'pink' | 'blue'\n\nconst COLOR = {\n  pink: 'checked:bg-pink checked:border-transparent focus:ring-pink',\n  blue: 'checked:bg-blue checked:border-transparent focus:ring-blue',\n}\n\nexport interface CheckboxProps {\n  color: Color\n  set: (value: boolean) => void\n}\n\nfunction Checkbox({\n  color,\n  set,\n  className = '',\n  ...rest\n}: CheckboxProps & React.InputHTMLAttributes<HTMLInputElement>): JSX.Element {\n  return (\n    <input\n      type=\"checkbox\"\n      onChange={(event) => set(event.target.checked)}\n      className={`appearance-none h-5 w-5 rounded-sm bg-dark-700 border-transparent disabled:bg-dark-1000 disabled:border-dark-800 ${COLOR[color]} ${className}`}\n      {...rest}\n    />\n  )\n}\n\nexport default Checkbox\n","import Checkbox from '../../components/Checkbox'\nimport QuestionHelper from '../../components/QuestionHelper'\nimport React from 'react'\nimport Settings from '../../components/Settings'\nimport useSwapSlippageTolerance from '../../hooks/useSwapSlippageTollerence'\n\nexport function ExchangeRateCheckBox({ color, pair, updateOracle, setUpdateOracle, desiredDirection }: any) {\n  const displayUpdateOracle = pair.currentExchangeRate.gt(0) ? updateOracle : true\n  const show =\n    displayUpdateOracle || desiredDirection === 'up'\n      ? pair.oracleExchangeRate.lt(pair.currentExchangeRate)\n      : pair.oracleExchangeRate.gt(pair.currentExchangeRate)\n\n  return (\n    show && (\n      <div className=\"flex items-center mb-4\">\n        <Checkbox\n          color={color}\n          checked={displayUpdateOracle}\n          disabled={pair.currentExchangeRate.isZero()}\n          set={setUpdateOracle}\n        />\n        <span className=\"ml-2 mr-1 text-primary\">Update exchange rate from the oracle</span>\n        <QuestionHelper\n          text={\n            pair.currentExchangeRate.gt(0)\n              ? 'The exchange rate from the oracle is only updated when needed. When the price in Kashi is different from the oracle, this may reduce the amount you can borrow. Updating the exchange rate from the oracle may increase your borrow limit.'\n              : 'The exchange rate has not been updated from the oracle yet in this market. If you borrow, it will be updated.'\n          }\n        />\n      </div>\n    )\n  )\n}\n\nexport function SwapCheckbox({ title, color, swap, setSwap, help, trade }: any) {\n  const allowedSlippage = useSwapSlippageTolerance(trade)\n  return (\n    <div className=\"flex items-center justify-between mb-4\">\n      <div>\n        <Checkbox color={color} checked={swap} set={setSwap} />\n        <span className=\"ml-2 mr-1 text-primary\">{title}</span>\n        <QuestionHelper text={help} />\n      </div>\n      {swap && <Settings placeholderSlippage={allowedSlippage} />}\n    </div>\n  )\n}\n\nexport default Checkbox\n","import KashiCooker, { signMasterContractApproval } from '../entities/KashiCooker'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\n\nimport { KASHI_ADDRESS } from '@mistswapdex/sdk'\nimport { setKashiApprovalPending } from '../state/application/actions'\nimport { useActiveWeb3React } from '../hooks/useActiveWeb3React'\nimport { useBentoBoxContract } from './useContract'\nimport { useBentoMasterContractAllowed } from '../state/bentobox/hooks'\nimport { useDispatch } from 'react-redux'\nimport { useKashiApprovalPending } from '../state/application/hooks'\nimport { useTransactionAdder } from '../state/transactions/hooks'\nimport { AddressZero, HashZero } from '@ethersproject/constants'\nimport { splitSignature } from '@ethersproject/bytes'\n\nexport enum BentoApprovalState {\n  UNKNOWN,\n  NOT_APPROVED,\n  PENDING,\n  FAILED,\n  APPROVED,\n}\n\nexport interface KashiPermit {\n  account: string\n  masterContract: string\n  v: number\n  r: string\n  s: string\n}\n\nexport enum BentoApproveOutcome {\n  SUCCESS,\n  REJECTED,\n  FAILED,\n  NOT_READY,\n}\n\nexport type BentoApproveResult = {\n  outcome: BentoApproveOutcome\n  permit?: KashiPermit\n}\n\n// returns a variable indicating the state of the approval and a function which approves if necessary or early returns\nfunction useKashiApproveCallback(): [\n  BentoApprovalState,\n  boolean,\n  KashiPermit | undefined,\n  () => void,\n  (pair: any, execute: (cooker: KashiCooker) => Promise<string>) => void\n] {\n  const { account, library, chainId } = useActiveWeb3React()\n  const dispatch = useDispatch()\n  const [approveKashiFallback, setApproveKashiFallback] = useState<boolean>(false)\n  const [kashiPermit, setKashiPermit] = useState<KashiPermit | undefined>(undefined)\n\n  useEffect(() => {\n    setKashiPermit(undefined)\n  }, [account, chainId])\n\n  const masterContract = chainId && KASHI_ADDRESS[chainId]\n\n  const pendingApproval = useKashiApprovalPending()\n  const currentAllowed = useBentoMasterContractAllowed(masterContract, account || AddressZero)\n  const addTransaction = useTransactionAdder()\n\n  // check the current approval status\n  const approvalState: BentoApprovalState = useMemo(() => {\n    if (!masterContract) return BentoApprovalState.UNKNOWN\n    if (!currentAllowed && pendingApproval) return BentoApprovalState.PENDING\n\n    return currentAllowed ? BentoApprovalState.APPROVED : BentoApprovalState.NOT_APPROVED\n  }, [masterContract, currentAllowed, pendingApproval])\n\n  const bentoBoxContract = useBentoBoxContract()\n\n  const approve = useCallback(async (): Promise<BentoApproveResult> => {\n    if (approvalState !== BentoApprovalState.NOT_APPROVED) {\n      console.error('approve was called unnecessarily')\n      return { outcome: BentoApproveOutcome.NOT_READY }\n    }\n    if (!masterContract) {\n      console.error('no token')\n      return { outcome: BentoApproveOutcome.NOT_READY }\n    }\n\n    if (!bentoBoxContract) {\n      console.error('no bentobox contract')\n      return { outcome: BentoApproveOutcome.NOT_READY }\n    }\n\n    if (!account) {\n      console.error('no account')\n      return { outcome: BentoApproveOutcome.NOT_READY }\n    }\n    if (!library) {\n      console.error('no library')\n      return { outcome: BentoApproveOutcome.NOT_READY }\n    }\n\n    try {\n      const signature = await signMasterContractApproval(\n        bentoBoxContract,\n        masterContract,\n        account,\n        library,\n        true,\n        chainId\n      )\n      const { v, r, s } = splitSignature(signature)\n      return {\n        outcome: BentoApproveOutcome.SUCCESS,\n        permit: { account, masterContract, v, r, s },\n      }\n    } catch (e) {\n      return {\n        outcome: e.code === 4001 ? BentoApproveOutcome.REJECTED : BentoApproveOutcome.FAILED,\n      }\n    }\n  }, [approvalState, account, library, chainId, bentoBoxContract, masterContract])\n\n  const onApprove = async function () {\n    if (!approveKashiFallback) {\n      const result = await approve()\n      if (result.outcome === BentoApproveOutcome.SUCCESS) {\n        setKashiPermit(result.permit)\n      } else if (result.outcome === BentoApproveOutcome.FAILED) {\n        setApproveKashiFallback(true)\n      }\n    } else {\n      const tx = await bentoBoxContract?.setMasterContractApproval(account, masterContract, true, 0, HashZero, HashZero)\n      dispatch(setKashiApprovalPending('Approve Kashi'))\n      await tx.wait()\n      dispatch(setKashiApprovalPending(''))\n    }\n  }\n\n  const onCook = async function (pair: any, execute: (cooker: KashiCooker) => Promise<string>) {\n    const cooker = new KashiCooker(pair, account, library, chainId)\n    let summary\n    if (approvalState === BentoApprovalState.NOT_APPROVED && kashiPermit) {\n      cooker.approve(kashiPermit)\n      summary = 'Approve Kashi and ' + (await execute(cooker))\n    } else {\n      summary = await execute(cooker)\n    }\n    const result = await cooker.cook()\n    if (result.success) {\n      addTransaction(result.tx, { summary })\n      setKashiPermit(undefined)\n      await result.tx.wait()\n    }\n  }\n\n  return [approvalState, approveKashiFallback, kashiPermit, onApprove, onCook]\n}\n\nexport default useKashiApproveCallback\n","import { ApprovalState, useApproveCallback } from '../../hooks/useApproveCallback'\nimport { BENTOBOX_ADDRESS, WNATIVE_ADDRESS } from '@mistswapdex/sdk'\nimport useKashiApproveCallback, { BentoApprovalState } from '../../hooks/useKashiApproveCallback'\n\nimport Alert from '../../components/Alert'\nimport Button from '../../components/Button'\nimport Dots from '../../components/Dots'\nimport React from 'react'\nimport { t } from '@lingui/macro'\nimport { tryParseAmount } from '../../functions/parse'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useLingui } from '@lingui/react'\n\nexport function KashiApproveButton({ content, color }: any): any {\n  const { i18n } = useLingui()\n  const [kashiApprovalState, approveKashiFallback, kashiPermit, onApprove, onCook] = useKashiApproveCallback()\n  const showApprove =\n    (kashiApprovalState === BentoApprovalState.NOT_APPROVED || kashiApprovalState === BentoApprovalState.PENDING) &&\n    !kashiPermit\n  const showChildren = kashiApprovalState === BentoApprovalState.APPROVED || kashiPermit\n\n  return (\n    <>\n      {approveKashiFallback && (\n        <Alert\n          message={i18n._(\n            t`Something went wrong during signing of the approval. This is expected for hardware wallets, such as Trezor and Ledger. Click again and the fallback method will be used`\n          )}\n          className=\"mb-4\"\n        />\n      )}\n\n      {showApprove && (\n        <Button color={color} onClick={onApprove} className=\"mb-4\">\n          {i18n._(t`Approve Kashi`)}\n        </Button>\n      )}\n\n      {showChildren && React.cloneElement(content(onCook), { color })}\n    </>\n  )\n}\n\nexport function TokenApproveButton({ children, value, token, needed, color }: any): any {\n  const { i18n } = useLingui()\n  const { chainId } = useActiveWeb3React()\n  const [approvalState, approve] = useApproveCallback(\n    tryParseAmount(value, token),\n    chainId && BENTOBOX_ADDRESS[chainId]\n  )\n\n  const showApprove =\n    chainId &&\n    token &&\n    token.address !== WNATIVE_ADDRESS[chainId] &&\n    needed &&\n    value &&\n    (approvalState === ApprovalState.NOT_APPROVED || approvalState === ApprovalState.PENDING)\n\n  return showApprove ? (\n    <Button color={color} onClick={approve} className=\"mb-4\">\n      <Dots>\n        {i18n._(t`Approve`)} {token.symbol}\n      </Dots>\n    </Button>\n  ) : (\n    React.cloneElement(children, { color })\n  )\n}\n","export class Warning {\n  active = false\n  message = ''\n  breaking = false\n  or: Warning | undefined = undefined\n\n  constructor(active: boolean, message: string, breaking = false, or?: Warning) {\n    this.active = active\n    this.message = message\n    this.breaking = breaking\n    this.or = or\n  }\n}\n\nexport class Warnings extends Array<Warning> {\n  private _add(warning: Warning) {\n    if (warning.active) {\n      this.push(warning)\n    } else {\n      if (warning.or) {\n        this._add(warning.or)\n      }\n    }\n  }\n\n  add(active: boolean, message: string, breaking = false, or?: Warning) {\n    this._add(new Warning(active, message, breaking, or))\n    return this\n  }\n\n  addWarning(active: boolean, message: string, or?: Warning) {\n    this._add(new Warning(active, message, false, or))\n    return this\n  }\n\n  addError(active: boolean, message: string, or?: Warning) {\n    this._add(new Warning(active, message, true, or))\n    return this\n  }\n\n  get broken(): boolean {\n    return this.some((warning) => warning.breaking)\n  }\n}\n","import { ArrowDownRight, ArrowUpRight } from 'react-feather'\n\nimport { BigNumber } from '@ethersproject/bignumber'\nimport Button from '../../components/Button'\nimport Input from '../../components/Input'\nimport React from 'react'\nimport { formatNumber } from '../../functions/format'\n\ntype SmartNumberInputProps = {\n  color: 'blue' | 'pink'\n  token: any\n  value: string\n  setValue: any\n\n  useBentoTitleDirection: 'up' | 'down'\n  useBentoTitle: string\n  useBento: boolean\n  setUseBento: any\n\n  maxTitle?: string\n  max: BigNumber\n  pinMax?: boolean\n  setPinMax?: any\n  showMax?: boolean\n  disabled?: boolean\n  switchDisabled?: boolean\n}\n\nexport default function SmartNumberInput({\n  color = 'blue',\n  token,\n  value,\n  setValue,\n\n  useBentoTitleDirection = 'down',\n  useBentoTitle = '',\n  useBento,\n  setUseBento,\n\n  maxTitle = 'Max',\n  max,\n  pinMax = false,\n  setPinMax,\n  showMax = false,\n  disabled = false,\n  switchDisabled = false,\n}: SmartNumberInputProps) {\n  return (\n    <>\n      <div className=\"flex items-center justify-between my-4\">\n        <div className=\"flex items-center text-base text-secondary\">\n          <span>\n            {useBentoTitleDirection == 'down' ? (\n              <ArrowDownRight size=\"1rem\" style={{ display: 'inline' }} />\n            ) : (\n              <ArrowUpRight size=\"1rem\" style={{ display: 'inline' }} />\n            )}\n          </span>\n          <span className=\"mx-2\">{useBentoTitle}</span>\n          <span>\n            <Button\n              variant=\"outlined\"\n              size=\"xs\"\n              color={color}\n              className={'disabled:cursor-not-allowed focus:ring focus:ring-' + color}\n              onClick={() => {\n                setUseBento(!useBento)\n              }}\n              disabled={switchDisabled}\n            >\n              {useBento ? 'BentoBox' : 'Wallet'}\n            </Button>\n          </span>\n        </div>\n        <div className=\"text-base text-right text-secondary\" style={{ display: 'inline', cursor: 'pointer' }}>\n          {maxTitle} {formatNumber(max.toFixed(token.tokenInfo.decimals))}\n        </div>\n      </div>\n\n      <div className=\"relative flex items-center w-full mb-4\">\n        <Input.Numeric\n          className={\n            'w-full p-3 bg-dark-700 rounded disabled:cursor-not-allowed disabled:bg-dark-1000 disabled:ring disabled:ring-dark-800 focus:ring focus:ring-' +\n            color\n          }\n          value={value}\n          onUserInput={setValue}\n          onFocus={() => {\n            if (pinMax) {\n              setValue('')\n            }\n            if (setPinMax) {\n              setPinMax(false)\n            }\n          }}\n          disabled={disabled}\n        />\n        {showMax && max.gt(0) && (\n          <Button\n            variant=\"outlined\"\n            size=\"xs\"\n            color={color}\n            onClick={() => {\n              if (setPinMax) {\n                setPinMax(true)\n              } else {\n                setValue(max.toFixed(token.tokenInfo.decimals))\n              }\n            }}\n            className={'absolute right-4 focus:ring focus:ring-' + color}\n          >\n            MAX\n          </Button>\n        )}\n      </div>\n    </>\n  )\n}\n","import { Currency, TradeType, Trade as V2Trade } from '@mistswapdex/sdk'\nimport React, { useMemo } from 'react'\n\nimport FormattedPriceImpact from '../exchange-v1/swap/FormattedPriceImpact'\nimport QuestionHelper from '../../components/QuestionHelper'\nimport SwapRoute from '../exchange-v1/swap/SwapRoute'\nimport { computeRealizedLPFeePercent } from '../../functions/prices'\nimport { t } from '@lingui/macro'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useLingui } from '@lingui/react'\n\nfunction TradeReview({\n  trade,\n  allowedSlippage,\n}: {\n  trade: V2Trade<Currency, Currency, TradeType> | undefined\n  allowedSlippage: any\n}) {\n  const { i18n } = useLingui()\n\n  const showRoute = Boolean(trade && trade.route.path.length > 2)\n\n  const { realizedLPFee, priceImpact } = useMemo(() => {\n    if (!trade) return { realizedLPFee: undefined, priceImpact: undefined }\n\n    const realizedLpFeePercent = computeRealizedLPFeePercent(trade)\n    const realizedLPFee = trade.inputAmount.multiply(realizedLpFeePercent)\n    const priceImpact = trade.priceImpact.subtract(realizedLpFeePercent)\n    return { priceImpact, realizedLPFee }\n  }, [trade])\n\n  return (\n    <>\n      <div className=\"text-xl text-high-emphesis\">Swap Review</div>\n      {trade ? (\n        <div className=\"py-4 mb-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-lg text-secondary\">\n              {i18n._(t`Minimum received`)}\n              <QuestionHelper\n                text={i18n._(\n                  t`Your transaction will revert if there is a large, unfavorable price movement before it is confirmed.`\n                )}\n              />\n            </div>\n            <div className=\"text-lg\">\n              {`${trade.minimumAmountOut(allowedSlippage)?.toSignificant(4)} ${trade.outputAmount.currency.symbol}` ??\n                '-'}\n            </div>\n          </div>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-lg text-secondary\">\n              {i18n._(t`Price Impact`)}\n              <QuestionHelper\n                text={i18n._(t`The difference between the market price and estimated price due to trade size.`)}\n              />\n            </div>\n            <div className=\"text-lg\">\n              <FormattedPriceImpact priceImpact={priceImpact} />\n            </div>\n          </div>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-lg text-secondary\">\n              Liquidity Provider Fee\n              <QuestionHelper\n                text={i18n._(t`A portion of each trade (0.25%) goes to liquidity providers as a protocol incentive.`)}\n              />\n            </div>\n            <div className=\"text-lg\">\n              {realizedLPFee ? `${realizedLPFee.toSignificant(4)} ${trade.inputAmount.currency.symbol}` : '-'}\n            </div>\n          </div>\n          {showRoute && (\n            <div className=\"flex items-center justify-between\">\n              <div className=\"text-lg text-secondary\">\n                {i18n._(t`Route`)}\n                <QuestionHelper\n                  text={i18n._(t`Routing through these tokens resulted in the best price for your trade.`)}\n                />\n              </div>\n              <div className=\"text-lg\">\n                <SwapRoute trade={trade} />\n              </div>\n            </div>\n          )}\n        </div>\n      ) : (\n        <div className=\"mb-4 text-lg text-secondary\">{i18n._(t`No liquidity found to do swap`)}</div>\n      )}\n    </>\n  )\n}\n\nexport default TradeReview\n","import { formatNumber, formatPercent } from '../functions/format'\n\nimport { BigNumber } from '@ethersproject/bignumber'\nimport { getUSDString } from '../functions/kashi'\n\nexport enum Direction {\n  DOWN = -1,\n  FLAT = 0,\n  UP = 1,\n}\n\ninterface Line {\n  name: string\n  from: string\n  to: string\n  direction: Direction\n}\n\nexport class TransactionReview extends Array<Line> {\n  public add(name: string, from: string, to: string, direction: Direction): this {\n    this.push({\n      name: name,\n      from: from,\n      to: to,\n      direction: direction,\n    })\n    return this\n  }\n\n  public addTokenAmount(name: string, from: BigNumber, to: BigNumber, token: any): this {\n    this.add(\n      name,\n      formatNumber(from.toFixed(token.tokenInfo.decimals)) + ' ' + token.tokenInfo.symbol,\n      formatNumber(to.toFixed(token.tokenInfo.decimals)) + ' ' + token.tokenInfo.symbol,\n      from.eq(to) ? Direction.FLAT : from.lt(to) ? Direction.UP : Direction.DOWN\n    )\n    return this\n  }\n\n  public addUSD(name: string, from: BigNumber, to: BigNumber, token: any): this {\n    this.add(\n      name,\n      formatNumber(getUSDString(from, token), true),\n      formatNumber(getUSDString(to, token), true),\n      from.eq(to) ? Direction.FLAT : from.lt(to) ? Direction.UP : Direction.DOWN\n    )\n    return this\n  }\n\n  public addPercentage(name: string, from: BigNumber, to: BigNumber): this {\n    this.add(\n      name,\n      formatPercent(from.toFixed(16)),\n      formatPercent(to.toFixed(16)),\n      from.eq(to) ? Direction.FLAT : from.lt(to) ? Direction.UP : Direction.DOWN\n    )\n    return this\n  }\n\n  public addRate(name: string, from: BigNumber, to: BigNumber, pair: any): this {\n    this.add(\n      name,\n      formatNumber(from.toFixed(18 + pair.collateral.tokenInfo.decimals - pair.asset.tokenInfo.decimals)),\n      formatNumber(to.toFixed(18 + pair.collateral.tokenInfo.decimals - pair.asset.tokenInfo.decimals)),\n      from.eq(to) ? Direction.FLAT : from.lt(to) ? Direction.UP : Direction.DOWN\n    )\n    return this\n  }\n}\n","import { ArrowDownRight, ArrowRight, ArrowUpRight } from 'react-feather'\nimport { Direction, TransactionReview } from '../../entities/TransactionReview'\n\nimport React from 'react'\n\nfunction TransactionReviewView({ transactionReview }: { transactionReview: TransactionReview }) {\n  return (\n    <>\n      {transactionReview && transactionReview.length > 0 && (\n        <div className=\"py-4 mb-4\">\n          <div className=\"text-xl text-high-emphesis\">Transaction Review</div>\n          {transactionReview.map((line, i) => {\n            return (\n              <div className=\"flex items-center justify-between\" key={i}>\n                <div className=\"text-lg text-secondary\">{line.name}:</div>\n                <div className=\"text-lg\">\n                  {line.from}\n                  {line.direction === Direction.FLAT ? (\n                    <ArrowRight\n                      size=\"1rem\"\n                      style={{\n                        display: 'inline',\n                        marginRight: '6px',\n                        marginLeft: '6px',\n                      }}\n                    />\n                  ) : line.direction === Direction.UP ? (\n                    <ArrowUpRight\n                      size=\"1rem\"\n                      style={{\n                        display: 'inline',\n                        marginRight: '6px',\n                        marginLeft: '6px',\n                      }}\n                    />\n                  ) : (\n                    <ArrowDownRight\n                      size=\"1rem\"\n                      style={{\n                        display: 'inline',\n                        marginRight: '6px',\n                        marginLeft: '6px',\n                      }}\n                    />\n                  )}\n                  {line.to}\n                </div>\n              </div>\n            )\n          })}\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default TransactionReviewView\n","import Alert from '../../components/Alert'\nimport React from 'react'\nimport { Warnings } from '../../entities/Warnings'\n\nfunction WarningsList({ warnings }: { warnings: Warnings }) {\n  return (\n    <>\n      {warnings.map((warning, i) => (\n        <Alert key={i} type={warning.breaking ? 'error' : 'warning'} message={warning.message} className=\"mb-4\" />\n      ))}\n    </>\n  )\n}\n\nexport default WarningsList\n","import { ExchangeRateCheckBox, SwapCheckbox } from './Checkbox'\nimport { KashiApproveButton, TokenApproveButton } from './Button'\nimport { Percent, /*SUSHISWAP_MULTISWAPPER_ADDRESS,*/ WNATIVE } from '@mistswapdex/sdk'\nimport React, { useMemo, useState } from 'react'\nimport { Warning, Warnings } from '../../entities/Warnings'\nimport { ZERO, e10, maximum, minimum } from '../../functions/math'\nimport { computeRealizedLPFeePercent, warningSeverity } from '../../functions/prices'\nimport { hexConcat, hexlify } from '@ethersproject/bytes'\nimport { useExpertModeManager, useUserSlippageToleranceWithDefault } from '../../state/user/hooks'\n\nimport { AddressZero } from '@ethersproject/constants'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport Button from '../../components/Button'\nimport { Field } from '../../state/swap/actions'\nimport KashiCooker from '../../entities/KashiCooker'\nimport SmartNumberInput from './SmartNumberInput'\nimport TradeReview from './TradeReview'\nimport { TransactionReview } from '../../entities/TransactionReview'\nimport TransactionReviewView from './TransactionReview'\nimport WarningsView from './WarningsList'\nimport { defaultAbiCoder } from '@ethersproject/abi'\nimport { toShare } from '../../functions/bentobox'\nimport { tryParseAmount } from '../../functions/parse'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useCurrency } from '../../hooks/Tokens'\nimport { useKashiInfo } from './context'\nimport { useV2TradeExactIn } from '../../hooks/useV2Trades'\n\ninterface BorrowProps {\n  pair: any\n}\n\nconst DEFAULT_BORROW_SLIPPAGE_TOLERANCE = new Percent(50, 10_000)\n\nexport default function Borrow({ pair }: BorrowProps) {\n  const { account, chainId } = useActiveWeb3React()\n  const info = useKashiInfo()\n\n  // State\n  const [useBentoCollateral, setUseBentoCollateral] = useState<boolean>(pair.collateral.bentoBalance.gt(0))\n  const [useBentoBorrow, setUseBentoBorrow] = useState<boolean>(true)\n  const [collateralValue, setCollateralValue] = useState('')\n  const [borrowValue, setBorrowValue] = useState('')\n  const [swapBorrowValue, setSwapBorrowValue] = useState('')\n  const [updateOracle, setUpdateOracle] = useState(false)\n  const [swap, setSwap] = useState(false)\n\n  const assetToken = useCurrency(pair.asset.address) || undefined\n  const collateralToken = useCurrency(pair.collateral.address) || undefined\n\n  // Calculated\n  const assetNative = WNATIVE[chainId || 1].address === pair.collateral.address\n\n  const collateralBalance = useBentoCollateral\n    ? pair.collateral.bentoBalance\n    : assetNative\n    ? info?.ethBalance\n    : pair.collateral.balance\n\n  const displayUpdateOracle = pair.currentExchangeRate.gt(0) ? updateOracle : true\n\n  // Swap\n  // const [allowedSlippage] = useUserSlippageTolerance(); // 10 = 0.1%\n\n  const allowedSlippage = useUserSlippageToleranceWithDefault(DEFAULT_BORROW_SLIPPAGE_TOLERANCE) // custom from users\n\n  const parsedAmount = tryParseAmount(borrowValue, assetToken)\n\n  const foundTrade = useV2TradeExactIn(parsedAmount, collateralToken)\n\n  const { realizedLPFee, priceImpact } = useMemo(() => {\n    if (!foundTrade) return { realizedLPFee: undefined, priceImpact: undefined }\n\n    const realizedLpFeePercent = computeRealizedLPFeePercent(foundTrade)\n    const realizedLPFee = foundTrade.inputAmount.multiply(realizedLpFeePercent)\n    const priceImpact = foundTrade.priceImpact.subtract(realizedLpFeePercent)\n    return { priceImpact, realizedLPFee }\n  }, [foundTrade])\n\n  const extraCollateral =\n    swap && foundTrade ? BigNumber.from(foundTrade.minimumAmountOut(allowedSlippage).quotient.toString()) : ZERO\n\n  // const extraCollateral = swap\n  //   ? computeSlippageAdjustedAmounts(foundTrade, allowedSlippage)\n  //       [Field.OUTPUT]?.toFixed(pair.collateral.tokenInfo.decimals)\n  //       .toBigNumber(pair.collateral.tokenInfo.decimals) || ZERO\n  //   : ZERO;\n\n  const swapCollateral = collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals)\n\n  const nextUserCollateralValue = pair.userCollateralAmount.value\n    .add(collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals))\n    .add(extraCollateral)\n\n  // Calculate max borrow\n  const nextMaxBorrowableOracle = nextUserCollateralValue.mulDiv(e10(16).mul('75'), pair.oracleExchangeRate)\n\n  const nextMaxBorrowableSpot = nextUserCollateralValue.mulDiv(e10(16).mul('75'), pair.spotExchangeRate)\n\n  const nextMaxBorrowableStored = nextUserCollateralValue.mulDiv(\n    e10(16).mul('75'),\n    displayUpdateOracle ? pair.oracleExchangeRate : pair.currentExchangeRate\n  )\n\n  const nextMaxBorrowMinimum = minimum(nextMaxBorrowableOracle, nextMaxBorrowableSpot, nextMaxBorrowableStored)\n\n  const nextMaxBorrowSafe = nextMaxBorrowMinimum.mulDiv('95', '100').sub(pair.currentUserBorrowAmount.value)\n\n  const nextMaxBorrowPossible = maximum(minimum(nextMaxBorrowSafe, pair.maxAssetAvailable), ZERO)\n\n  const maxBorrow = nextMaxBorrowPossible.toFixed(pair.asset.tokenInfo.decimals)\n\n  const nextBorrowValue = pair.currentUserBorrowAmount.value.add(borrowValue.toBigNumber(pair.asset.tokenInfo.decimals))\n  const nextHealth = nextBorrowValue.mulDiv('1000000000000000000', nextMaxBorrowMinimum)\n\n  const collateralValueSet = !collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals).isZero()\n\n  const borrowValueSet = !borrowValue.toBigNumber(pair.asset.tokenInfo.decimals).isZero()\n\n  const trade = swap && borrowValueSet ? foundTrade : undefined\n\n  const [isExpertMode] = useExpertModeManager()\n\n  // const { priceImpactWithoutFee } = computeTradePriceBreakdown(trade);\n\n  const priceImpactSeverity = warningSeverity(priceImpact)\n\n  const borrowAmount = borrowValue.toBigNumber(pair.asset.tokenInfo.decimals)\n\n  const collateralWarnings = new Warnings()\n\n  collateralWarnings.add(\n    collateralBalance?.lt(collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals)),\n    `Please make sure your ${\n      useBentoCollateral ? 'BentoBox' : 'wallet'\n    } balance is sufficient to deposit and then try again.`,\n    true\n  )\n\n  const borrowWarnings = new Warnings()\n    .add(\n      nextMaxBorrowMinimum.lt(pair.currentUserBorrowAmount.value),\n      'You have surpassed your borrow limit and may be liquidated at any moment. Repay now or add collateral!',\n      true,\n      new Warning(\n        nextMaxBorrowSafe.lt(0),\n        'You have surpassed your borrow limit and assets are at a high risk of liquidation.',\n        true,\n        new Warning(\n          borrowValue.length > 0 && borrowAmount.gt(nextMaxBorrowMinimum.sub(pair.currentUserBorrowAmount.value)),\n          \"You don't have enough collateral to borrow this amount.\",\n          true,\n          new Warning(\n            borrowValue.length > 0 && borrowAmount.gt(nextMaxBorrowSafe),\n            'You will surpass your borrow limit and assets will be at a high risk of liquidation.',\n            false\n          )\n        )\n      )\n    )\n    .add(\n      borrowValue.length > 0 && pair.maxAssetAvailable.lt(borrowValue.toBigNumber(pair.asset.tokenInfo.decimals)),\n      'Not enough liquidity in this pair.',\n      true\n    )\n\n  // console.log('Oracle Discrepancy', {\n  //     name: pair.asset.tokenInfo.symbol + '-' + pair.collateral.tokenInfo.symbol,\n  //     borrowValueSet: borrowValueSet,\n  //     displayUpdateOracle: displayUpdateOracle,\n  //     currentExchangeRate: pair.currentExchangeRate.toFixed(\n  //         pair.asset.tokenInfo.decimals\n  //     ),\n  //     oracleExchangeRate: pair.oracleExchangeRate.toFixed(\n  //         pair.asset.tokenInfo.decimals\n  //     ),\n  //     diff:\n  //         pair.currentExchangeRate.toFixed(pair.asset.tokenInfo.decimals) /\n  //         pair.oracleExchangeRate.toFixed(pair.asset.tokenInfo.decimals),\n  // })\n\n  const transactionReview = new TransactionReview()\n  if ((collateralValue || borrowValue) && !collateralWarnings.broken && (!borrowWarnings.broken || !borrowValue)) {\n    if (collateralValueSet) {\n      transactionReview.addTokenAmount(\n        'Collateral',\n        pair.userCollateralAmount.value,\n        nextUserCollateralValue,\n        pair.collateral\n      )\n      transactionReview.addUSD(\n        'Collateral USD',\n        pair.userCollateralAmount.value,\n        nextUserCollateralValue,\n        pair.collateral\n      )\n    }\n    if (borrowValueSet) {\n      transactionReview.addTokenAmount('Borrowed', pair.currentUserBorrowAmount.value, nextBorrowValue, pair.asset)\n      transactionReview.addUSD('Borrowed USD', pair.currentUserBorrowAmount.value, nextBorrowValue, pair.asset)\n    }\n    if (displayUpdateOracle) {\n      transactionReview.addRate('Exchange Rate', pair.currentExchangeRate, pair.oracleExchangeRate, pair)\n    }\n    transactionReview.addTokenAmount(\n      'Borrow Limit',\n      pair.maxBorrowable.safe.value,\n      nextMaxBorrowSafe.sub(borrowValue.toBigNumber(pair.asset.tokenInfo.decimals)),\n      pair.asset\n    )\n    transactionReview.addPercentage('Limit Used', pair.health.value, nextHealth)\n    transactionReview.addPercentage('Borrow APR', pair.interestPerYear.value, pair.currentInterestPerYear.value)\n  }\n\n  let actionName = 'Nothing to do'\n\n  if (collateralValueSet) {\n    if (borrowValueSet) {\n      actionName = trade ? 'Borrow, swap and add collateral' : 'Add collateral and borrow'\n    } else {\n      actionName = 'Add collateral'\n    }\n  } else if (borrowValueSet) {\n    actionName = trade ? 'Borrow, swap and add as collateral' : 'Borrow'\n  }\n\n  if (swap && priceImpactSeverity > 3 && !isExpertMode) {\n    actionName = 'Price Impact High'\n  } else if (swap && priceImpactSeverity > 2) {\n    actionName = actionName + ' anyway'\n  }\n\n  const actionDisabled =\n    (collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals).lte(0) &&\n      borrowValue.toBigNumber(pair.asset.tokenInfo.decimals).lte(0)) ||\n    collateralWarnings.broken ||\n    (borrowValue.length > 0 && borrowWarnings.broken) ||\n    (swap && priceImpactSeverity > 3 && !isExpertMode) ||\n    (pair.userCollateralAmount.value.isZero() && !collateralValueSet)\n\n  // Handlers\n  async function onExecute(cooker: KashiCooker): Promise<string> {\n    let summary = ''\n\n    /*\n    if (borrowValueSet) {\n      if (displayUpdateOracle) {\n        cooker.updateExchangeRate(true, ZERO, ZERO)\n      }\n\n      if (swap && !useBentoCollateral) {\n        cooker.bentoDepositCollateral(collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals))\n      }\n\n      cooker.borrow(\n        borrowValue.toBigNumber(pair.asset.tokenInfo.decimals),\n        swap || useBentoBorrow,\n        swap ? SUSHISWAP_MULTISWAPPER_ADDRESS[chainId || 1] : ''\n      )\n    }\n    if (borrowValueSet && trade) {\n      const path = trade.route.path.map((token) => token.address) || []\n      if (path.length > 4) {\n        throw 'Path too long'\n      }\n\n      console.log('debug', [\n        pair.asset.address,\n        pair.collateral.address,\n        extraCollateral,\n        path.length > 2 ? path[1] : AddressZero,\n        path.length > 3 ? path[2] : AddressZero,\n        account,\n        toShare(pair.collateral, collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals)),\n        borrowValue.toBigNumber(pair.asset.tokenInfo.decimals),\n      ])\n\n      const data = defaultAbiCoder.encode(\n        ['address', 'address', 'uint256', 'address', 'address', 'address', 'uint256'],\n        [\n          pair.asset.address,\n          pair.collateral.address,\n          extraCollateral,\n          path.length > 2 ? path[1] : AddressZero,\n          path.length > 3 ? path[2] : AddressZero,\n          account,\n          toShare(pair.collateral, collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals)),\n        ]\n      )\n\n      cooker.action(\n        SUSHISWAP_MULTISWAPPER_ADDRESS[chainId || 1],\n        ZERO,\n        hexConcat([hexlify('0x3087d742'), data]),\n        false,\n        true,\n        1\n      )\n    }\n    if (collateralValueSet) {\n      cooker.addCollateral(\n        swap ? BigNumber.from(-1) : collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals),\n        useBentoCollateral || swap\n      )\n    }\n\n    if (collateralValueSet) {\n      if (borrowValueSet) {\n        summary = trade ? 'Borrow, swap and add collateral' : 'Add collateral and borrow'\n      } else {\n        summary = 'Add collateral'\n      }\n    } else if (borrowValueSet) {\n      summary = trade ? 'Borrow, swap and add as collateral' : 'Borrow'\n    }\n    */\n\n    return summary\n  }\n\n  function onMultiply(multiplier: string) {\n    const multipliedCollateral = swapCollateral.add(\n      swapCollateral.mulDiv(\n        multiplier.toBigNumber(pair.collateral.tokenInfo.decimals),\n        '1'.toBigNumber(pair.collateral.tokenInfo.decimals)\n      )\n    )\n\n    const multipliedBorrow = multipliedCollateral.mulDiv(e10(16).mul('75'), pair.currentExchangeRate)\n\n    // console.log({\n    //     original: swapCollateral.toFixed(pair.collateral.tokenInfo.decimals),\n    //     multiplied: swapCollateral\n    //         .add(\n    //             swapCollateral.mulDiv(\n    //                 multiplier.toBigNumber(pair.collateral.tokenInfo.decimals),\n    //                 '1'.toBigNumber(pair.collateral.tokenInfo.decimals)\n    //             )\n    //         )\n    //         .toFixed(pair.collateral.tokenInfo.decimals),\n    //     borrow: multipliedBorrow.toFixed(pair.asset.tokenInfo.decimals),\n    // })\n\n    // console.log('multipliedBorrow:', multipliedBorrow)\n\n    setBorrowValue(multipliedBorrow.toFixed(pair.asset.tokenInfo.decimals))\n  }\n\n  return (\n    <>\n      <div className=\"mt-6 mb-4 text-3xl text-high-emphesis\">Borrow {pair.asset.tokenInfo.symbol}</div>\n\n      <SmartNumberInput\n        color=\"pink\"\n        token={pair.collateral}\n        value={collateralValue}\n        setValue={setCollateralValue}\n        useBentoTitleDirection=\"down\"\n        useBentoTitle={`Add ${pair.collateral.tokenInfo.symbol} collateral from`}\n        useBento={useBentoCollateral}\n        setUseBento={setUseBentoCollateral}\n        maxTitle=\"Balance\"\n        max={collateralBalance}\n        showMax={true}\n      />\n\n      <SmartNumberInput\n        color=\"pink\"\n        token={pair.asset}\n        value={borrowValue}\n        setValue={setBorrowValue}\n        useBentoTitleDirection=\"up\"\n        useBentoTitle={`Borrow ${pair.asset.tokenInfo.symbol} to`}\n        useBento={useBentoBorrow}\n        setUseBento={setUseBentoBorrow}\n        maxTitle=\"Max\"\n        max={nextMaxBorrowPossible}\n      />\n\n      {collateralValueSet && (\n        <SwapCheckbox\n          trade={trade}\n          color=\"pink\"\n          swap={swap}\n          setSwap={setSwap}\n          title={`Swap borrowed ${pair.asset.tokenInfo.symbol} for ${pair.collateral.tokenInfo.symbol} collateral`}\n          help=\"Swapping your borrowed tokens for collateral allows for opening long/short positions with leverage in a single transaction.\"\n        />\n      )}\n\n      {borrowValueSet && (\n        <ExchangeRateCheckBox\n          color=\"pink\"\n          pair={pair}\n          updateOracle={updateOracle}\n          setUpdateOracle={setUpdateOracle}\n          desiredDirection=\"up\"\n        />\n      )}\n\n      {collateralValueSet && (\n        <>\n          <div className=\"mb-4\">\n            {['0.25', '0.5', '0.75', '1', '1.25', '1.5', '1.75', '2.0'].map((multipler, i) => (\n              <Button\n                variant=\"outlined\"\n                size=\"xs\"\n                color=\"pink\"\n                key={i}\n                onClick={() => {\n                  onMultiply(multipler)\n                  setSwap(true)\n                }}\n                className=\"mr-4 text-md focus:ring-pink\"\n              >\n                {multipler}x\n              </Button>\n            ))}\n\n            {/* <div className=\"mb-4\">\n                                <input\n                                    type=\"range\"\n                                    onChange={e => {\n                                        onMultiply(e.target.value)\n                                    }}\n                                    min=\"0\"\n                                    max=\"2\"\n                                    step=\"0.01\"\n                                    className=\"w-full slider\"\n                                />\n                                <div className=\"flex justify-between w-full px-2 text-center\">\n                                    <div className=\"font-semibold\">1x</div>\n                                    <div className=\"font-semibold\">2x</div>\n                                    <div className=\"font-semibold\">3x</div>\n                                </div>\n                            </div> */}\n          </div>\n        </>\n      )}\n\n      <WarningsView warnings={collateralWarnings}></WarningsView>\n\n      <WarningsView warnings={borrowWarnings}></WarningsView>\n\n      {swap && trade && <TradeReview trade={trade} allowedSlippage={allowedSlippage} />}\n\n      {(collateralValueSet ||\n        (borrowValueSet && !pair.userCollateralAmount.value.isZero()) ||\n        (swap && (priceImpactSeverity < 3 || isExpertMode))) && (\n        <TransactionReviewView transactionReview={transactionReview} />\n      )}\n\n      <KashiApproveButton\n        color=\"pink\"\n        content={(onCook: any) => (\n          <TokenApproveButton value={collateralValue} token={collateralToken} needed={!useBentoCollateral}>\n            <Button onClick={() => onCook(pair, onExecute)} disabled={actionDisabled}>\n              {actionName}\n            </Button>\n          </TokenApproveButton>\n        )}\n      />\n    </>\n  )\n}\n","import { ExchangeRateCheckBox, SwapCheckbox } from './Checkbox'\nimport { KashiApproveButton, TokenApproveButton } from './Button'\nimport {\n  Percent,\n  /*\n  SUSHISWAP_MULTISWAPPER_ADDRESS,\n  SUSHISWAP_MULTI_EXACT_SWAPPER_ADDRESS,\n  */\n  WNATIVE,\n} from '@mistswapdex/sdk'\nimport React, { useContext, useMemo, useState } from 'react'\nimport { Warning, Warnings } from '../../entities/Warnings'\nimport { ZERO, e10, maximum, minimum } from '../../functions/math'\nimport { computeRealizedLPFeePercent, warningSeverity } from '../../functions/prices'\nimport { hexConcat, hexlify } from '@ethersproject/bytes'\nimport { toAmount, toShare } from '../../functions/bentobox'\nimport {\n  useExpertModeManager,\n  useUserSlippageTolerance,\n  useUserSlippageToleranceWithDefault,\n} from '../../state/user/hooks'\nimport { useV2TradeExactIn, useV2TradeExactOut } from '../../hooks/useV2Trades'\n\nimport { AddressZero } from '@ethersproject/constants'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport Button from '../../components/Button'\nimport { Field } from '../../state/swap/actions'\nimport { KashiCooker } from '../../entities'\nimport SmartNumberInput from './SmartNumberInput'\nimport TradeReview from './TradeReview'\nimport { TransactionReview } from '../../entities/TransactionReview'\nimport TransactionReviewView from './TransactionReview'\nimport WarningsView from './WarningsList'\nimport { defaultAbiCoder } from '@ethersproject/abi'\nimport { tryParseAmount } from '../../functions/parse'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useCurrency } from '../../hooks/Tokens'\nimport { useKashiInfo } from './context'\n\ninterface RepayProps {\n  pair: any\n}\n\nconst DEFAULT_KASHI_REPAY_SLIPPAGE_TOLERANCE = new Percent(5, 100)\n\nexport default function Repay({ pair }: RepayProps) {\n  const { account, chainId } = useActiveWeb3React()\n  const info = useKashiInfo()\n\n  // State\n  const [useBentoRepay, setUseBentoRepay] = useState<boolean>(pair.asset.bentoBalance.gt(0))\n  const [useBentoRemove, setUseBentoRemoveCollateral] = useState<boolean>(true)\n\n  const [repayValue, setRepayAssetValue] = useState('')\n  const [removeValue, setRemoveCollateralValue] = useState('')\n  const [pinRemoveMax, setPinRemoveMax] = useState(false)\n  const [pinRepayMax, setPinRepayMax] = useState(false)\n  const [updateOracle, setUpdateOracle] = useState(false)\n  const [swap, setSwap] = useState(false)\n\n  const assetToken = useCurrency(pair.asset.address) || undefined\n  const collateralToken = useCurrency(pair.collateral.address) || undefined\n\n  // Calculated\n  const assetNative = WNATIVE[chainId || 1].address === pair.asset.address\n\n  const balance = useBentoRepay\n    ? toAmount(pair.asset, pair.asset.bentoBalance)\n    : assetNative\n    ? info?.ethBalance\n    : pair.asset.balance\n\n  const displayUpdateOracle = pair.currentExchangeRate.gt(0) ? updateOracle : true\n\n  const displayRepayValue = pinRepayMax\n    ? minimum(pair.currentUserBorrowAmount.value, balance).toFixed(pair.asset.tokenInfo.decimals)\n    : repayValue\n\n  const nextUserBorrowAmount = pair.currentUserBorrowAmount.value.sub(\n    displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals)\n  )\n\n  const nextMinCollateralOracle = nextUserBorrowAmount.mulDiv(pair.oracleExchangeRate, e10(16).mul('75'))\n  const nextMinCollateralSpot = nextUserBorrowAmount.mulDiv(pair.spotExchangeRate, e10(16).mul('75'))\n  const nextMinCollateralStored = nextUserBorrowAmount.mulDiv(\n    displayUpdateOracle ? pair.oracleExchangeRate : pair.currentExchangeRate,\n    e10(16).mul('75')\n  )\n  const nextMinCollateralMinimum = maximum(nextMinCollateralOracle, nextMinCollateralSpot, nextMinCollateralStored)\n  const nextMaxRemoveCollateral = maximum(\n    pair.userCollateralAmount.value.sub(nextMinCollateralMinimum.mul(100).div(95)),\n    ZERO\n  )\n  const maxRemoveCollateral = nextMaxRemoveCollateral.toFixed(pair.collateral.tokenInfo.decimals)\n\n  const displayRemoveValue = pinRemoveMax ? maxRemoveCollateral : removeValue\n\n  // Swap\n  // const [allowedSlippage] = useUserSlippageTolerance(); // 10 = 0.1%\n  const allowedSlippage = useUserSlippageToleranceWithDefault(DEFAULT_KASHI_REPAY_SLIPPAGE_TOLERANCE)\n\n  const parsedAmount = tryParseAmount(pair.currentUserBorrowAmount.string, assetToken)\n\n  const trade = useV2TradeExactOut(collateralToken, parsedAmount) || undefined\n\n  const { realizedLPFee, priceImpact } = useMemo(() => {\n    if (!trade) return { realizedLPFee: undefined, priceImpact: undefined }\n\n    const realizedLpFeePercent = computeRealizedLPFeePercent(trade)\n    const realizedLPFee = trade.inputAmount.multiply(realizedLpFeePercent)\n    const priceImpact = trade.priceImpact.subtract(realizedLpFeePercent)\n    return { priceImpact, realizedLPFee }\n  }, [trade])\n\n  // const maxAmountIn = swap\n  //   ? computeSlippageAdjustedAmounts(foundTrade, allowedSlippage)\n  //       [Field.INPUT]?.toFixed(pair.collateral.tokenInfo.decimals)\n  //       .toBigNumber(pair.collateral.tokenInfo.decimals) || ZERO\n  //   : ZERO;\n\n  const maxAmountIn =\n    swap && trade\n      ? trade\n          .maximumAmountIn(allowedSlippage)\n          .toFixed(pair.collateral.tokenInfo.decimals)\n          .toBigNumber(pair.collateral.tokenInfo.decimals)\n      : ZERO\n\n  // const nextUserCollateralValue = pair.userCollateralAmount.value.add(collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals)).add(extraCollateral)\n\n  const nextUserCollateralAmount = pair.userCollateralAmount.value.sub(\n    displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals)\n  )\n\n  const nextMaxBorrowableOracle = nextUserCollateralAmount.mulDiv(e10(16).mul('75'), pair.oracleExchangeRate)\n  const nextMaxBorrowableSpot = nextUserCollateralAmount.mulDiv(e10(16).mul('75'), pair.spotExchangeRate)\n  const nextMaxBorrowableStored = nextUserCollateralAmount.mulDiv(\n    e10(16).mul('75'),\n    displayUpdateOracle ? pair.oracleExchangeRate : pair.currentExchangeRate\n  )\n  const nextMaxBorrowMinimum = minimum(nextMaxBorrowableOracle, nextMaxBorrowableSpot, nextMaxBorrowableStored)\n  const nextMaxBorrowSafe = nextMaxBorrowMinimum.mulDiv('95', '100').sub(pair.currentUserBorrowAmount.value)\n  const nextMaxBorrowPossible = maximum(minimum(nextMaxBorrowSafe, pair.maxAssetAvailable), ZERO)\n\n  const nextHealth = pair.currentUserBorrowAmount.value\n    .sub(displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals))\n    .mulDiv(BigNumber.from('1000000000000000000'), nextMaxBorrowMinimum)\n\n  const transactionReview = new TransactionReview()\n\n  if (displayRepayValue || displayRemoveValue) {\n    transactionReview.addTokenAmount(\n      'Borrow Limit',\n      pair.maxBorrowable.safe.value,\n      nextMaxBorrowSafe.add(displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals)),\n      pair.asset\n    )\n    transactionReview.addPercentage('Health', pair.health.value, nextHealth)\n  }\n\n  const warnings = new Warnings()\n    .addError(\n      assetNative && !useBentoRepay && pinRepayMax,\n      `You cannot MAX repay ${pair.asset.tokenInfo.symbol} directly from your wallet. Please deposit your ${pair.asset.tokenInfo.symbol} into the BentoBox first, then repay. Because your debt is slowly accrueing interest we can't predict how much it will be once your transaction gets mined.`\n    )\n    .addError(\n      displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals).gt(pair.userCollateralAmount.value),\n      'You have insufficient collateral. Please enter a smaller amount or repay more.'\n    )\n    .addError(\n      displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals).gt(pair.currentUserBorrowAmount.value),\n      \"You can't repay more than you owe. To fully repay, please click the 'max' button.\",\n      new Warning(\n        balance?.lt(displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals)),\n        `Please make sure your ${\n          useBentoRepay ? 'BentoBox' : 'wallet'\n        } balance is sufficient to repay and then try again.`,\n        true\n      )\n    )\n    .addError(\n      displayRemoveValue\n        .toBigNumber(pair.collateral.tokenInfo.decimals)\n        .gt(maximum(pair.userCollateralAmount.value.sub(nextMinCollateralMinimum), ZERO)),\n      'Removing this much collateral would put you into insolvency.',\n      new Warning(\n        displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals).gt(nextMaxRemoveCollateral),\n        'Removing this much collateral would put you very close to insolvency.'\n      )\n    )\n\n  const removeValueSet =\n    !displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals).isZero() ||\n    (pinRemoveMax && pair.userCollateralShare.gt(ZERO))\n\n  const repayValueSet = !displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals).isZero()\n\n  // const trade = swap ? foundTrade : undefined;\n  // const trade = swap && removeValueSet ? foundTrade : undefined\n\n  const [isExpertMode] = useExpertModeManager()\n\n  // const { priceImpactWithoutFee } = computeTradePriceBreakdown(trade);\n\n  const priceImpactSeverity = warningSeverity(priceImpact)\n\n  let actionName = 'Nothing to do'\n\n  if (removeValueSet) {\n    if (repayValueSet) {\n      actionName = 'Repay and remove collateral'\n    } else {\n      actionName = 'Remove collateral'\n    }\n  } else if (repayValueSet) {\n    actionName = 'Repay'\n  } else if (swap) {\n    actionName = 'Automatic repay'\n  }\n\n  // const actionDisabled = false\n\n  const actionDisabled =\n    (!swap &&\n      !trade &&\n      displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals).lte(0) &&\n      displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals).lte(0) &&\n      (!pinRemoveMax || pair.userCollateralShare.isZero())) ||\n    warnings.some((warning) => warning.breaking)\n\n  function resetRepayState() {\n    setPinRepayMax(false)\n    setPinRemoveMax(false)\n    setRemoveCollateralValue('')\n    setRepayAssetValue('')\n  }\n\n  // Handlers\n  async function onExecute(cooker: KashiCooker) {\n    let summary = ''\n\n    /*\n    if (swap && trade) {\n      const share = toShare(pair.collateral, pair.userCollateralAmount.value)\n\n      cooker.removeCollateral(pair.userCollateralShare, true)\n      cooker.bentoTransferCollateral(pair.userCollateralShare, SUSHISWAP_MULTI_EXACT_SWAPPER_ADDRESS[chainId || 1])\n      cooker.repayShare(pair.userBorrowPart)\n\n      const path = trade.route.path.map((token) => token.address) || []\n\n      console.log('debug', [\n        pair.collateral.address,\n        pair.asset.address,\n        maxAmountIn,\n        path.length > 2 ? path[1] : AddressZero,\n        path.length > 3 ? path[2] : AddressZero,\n        account,\n        pair.userCollateralShare,\n      ])\n\n      const data = defaultAbiCoder.encode(\n        ['address', 'address', 'uint256', 'address', 'address', 'address', 'uint256'],\n        [\n          pair.collateral.address,\n          pair.asset.address,\n          maxAmountIn,\n          path.length > 2 ? path[1] : AddressZero,\n          path.length > 3 ? path[2] : AddressZero,\n          account,\n          pair.userCollateralShare,\n        ]\n      )\n\n      cooker.action(\n        SUSHISWAP_MULTI_EXACT_SWAPPER_ADDRESS[chainId || 1],\n        ZERO,\n        hexConcat([hexlify('0x3087d742'), data]),\n        true,\n        false,\n        1\n      )\n\n      cooker.repayPart(pair.userBorrowPart, true)\n\n      if (!useBentoRemove) {\n        cooker.bentoWithdrawCollateral(ZERO, BigNumber.from(-1))\n      }\n\n      summary = 'Repay All'\n    } else {\n      if (pinRepayMax && pair.userBorrowPart.gt(0) && balance.gte(pair.currentUserBorrowAmount.value)) {\n        cooker.repayPart(pair.userBorrowPart, useBentoRepay)\n        summary = 'Repay Max'\n      } else if (displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals).gt(0)) {\n        cooker.repay(displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals), useBentoRepay)\n        summary = 'Repay'\n      }\n      if (\n        displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals).gt(0) ||\n        (pinRemoveMax && pair.userCollateralShare.gt(0))\n      ) {\n        const share =\n          pinRemoveMax &&\n          (nextUserBorrowAmount.isZero() ||\n            (pinRepayMax && pair.userBorrowPart.gt(0) && balance.gte(pair.currentUserBorrowAmount.value)))\n            ? pair.userCollateralShare\n            : toShare(pair.collateral, displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals))\n\n        cooker.removeCollateral(share, useBentoRemove)\n        summary += (summary ? ' and ' : '') + 'Remove Collateral'\n      }\n    }\n\n    resetRepayState()\n\n    */\n    return summary\n  }\n\n  return (\n    <>\n      <div className=\"mt-6 mb-4 text-3xl text-high-emphesis\">Repay {pair.asset.tokenInfo.symbol}</div>\n\n      <SmartNumberInput\n        color=\"pink\"\n        token={pair.asset}\n        value={displayRepayValue}\n        setValue={setRepayAssetValue}\n        useBentoTitleDirection=\"down\"\n        useBentoTitle={`Repay ${pair.asset.tokenInfo.symbol} from`}\n        useBento={useBentoRepay}\n        setUseBento={setUseBentoRepay}\n        maxTitle=\"Balance\"\n        max={balance}\n        pinMax={pinRepayMax}\n        setPinMax={setPinRepayMax}\n        showMax={!swap && !pair.currentUserBorrowAmount.value.isZero()}\n        disabled={swap || pair.currentUserBorrowAmount.value.isZero()}\n        switchDisabled={swap || pair.currentUserBorrowAmount.value.isZero()}\n      />\n\n      <SmartNumberInput\n        color=\"pink\"\n        token={pair.collateral}\n        value={displayRemoveValue}\n        setValue={setRemoveCollateralValue}\n        useBentoTitleDirection=\"up\"\n        useBentoTitle={`Remove ${pair.collateral.tokenInfo.symbol} to`}\n        useBento={useBentoRemove}\n        setUseBento={setUseBentoRemoveCollateral}\n        max={nextMaxRemoveCollateral}\n        pinMax={pinRemoveMax}\n        setPinMax={setPinRemoveMax}\n        showMax={\n          pair.currentUserBorrowAmount.value.eq(displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals)) ||\n          pair.currentUserBorrowAmount.value.isZero()\n        }\n        disabled={swap || pair.userCollateralAmount.value.isZero()}\n        switchDisabled={pair.userCollateralAmount.value.isZero()}\n      />\n\n      {!pair.currentUserBorrowAmount.value.isZero() && (\n        <SwapCheckbox\n          trade={trade}\n          color=\"pink\"\n          swap={swap}\n          setSwap={(value: boolean) => {\n            resetRepayState()\n            setSwap(value)\n          }}\n          title={`Swap ${pair.collateral.tokenInfo.symbol} collateral for ${pair.asset.tokenInfo.symbol} and repay`}\n          help=\"Swapping your removed collateral tokens and repay allows for reducing your borrow by using your collateral and/or to unwind leveraged positions.\"\n        />\n      )}\n\n      {removeValueSet && (\n        <ExchangeRateCheckBox\n          color=\"pink\"\n          pair={pair}\n          updateOracle={updateOracle}\n          setUpdateOracle={setUpdateOracle}\n          desiredDirection=\"up\"\n        />\n      )}\n\n      <WarningsView warnings={warnings} />\n\n      {swap && trade && <TradeReview trade={trade} allowedSlippage={allowedSlippage} />}\n\n      {swap && (priceImpactSeverity < 3 || isExpertMode) && (\n        <TransactionReviewView transactionReview={transactionReview} />\n      )}\n\n      <KashiApproveButton\n        color=\"pink\"\n        content={(onCook: any) => (\n          <TokenApproveButton value={displayRepayValue} token={assetToken} needed={!useBentoRepay}>\n            <Button onClick={() => onCook(pair, onExecute)} disabled={actionDisabled}>\n              {actionName}\n            </Button>\n          </TokenApproveButton>\n        )}\n      />\n    </>\n  )\n}\n","import { Direction, TransactionReview } from '../../entities/TransactionReview'\nimport { KashiApproveButton, TokenApproveButton } from './Button'\nimport React, { useState } from 'react'\nimport { ZERO, e10 } from '../../functions/math'\n\nimport Button from '../../components/Button'\nimport KashiCooker from '../../entities/KashiCooker'\nimport SmartNumberInput from './SmartNumberInput'\nimport TransactionReviewList from './TransactionReview'\nimport { WNATIVE } from '@mistswapdex/sdk'\nimport { Warnings } from '../../entities/Warnings'\nimport WarningsList from './WarningsList'\nimport { formatNumber } from '../../functions/format'\nimport { t } from '@lingui/macro'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useCurrency } from '../../hooks/Tokens'\nimport { useKashiInfo } from './context'\nimport { useLingui } from '@lingui/react'\n\nexport default function Deposit({ pair }: any): JSX.Element {\n  const { chainId } = useActiveWeb3React()\n  const assetToken = useCurrency(pair.asset.address) || undefined\n\n  const { i18n } = useLingui()\n\n  // State\n  const [useBento, setUseBento] = useState<boolean>(pair.asset.bentoBalance.gt(0))\n  const [value, setValue] = useState('')\n\n  const info = useKashiInfo()\n\n  // Calculated\n  const assetNative = WNATIVE[chainId || 1].address === pair.asset.address\n  const balance = useBento ? pair.asset.bentoBalance : assetNative ? info?.ethBalance : pair.asset.balance\n\n  const max = useBento ? pair.asset.bentoBalance : assetNative ? info?.ethBalance : pair.asset.balance\n\n  const warnings = new Warnings()\n\n  warnings.add(\n    balance?.lt(value.toBigNumber(pair.asset.tokenInfo.decimals)),\n    i18n._(\n      t`Please make sure your ${useBento ? 'BentoBox' : 'wallet'} balance is sufficient to deposit and then try again.`\n    ),\n    true\n  )\n\n  const transactionReview = new TransactionReview()\n\n  if (value && !warnings.broken) {\n    const amount = value.toBigNumber(pair.asset.tokenInfo.decimals)\n    const newUserAssetAmount = pair.currentUserAssetAmount.value.add(amount)\n    transactionReview.addTokenAmount(\n      i18n._(t`Balance`),\n      pair.currentUserAssetAmount.value,\n      newUserAssetAmount,\n      pair.asset\n    )\n    transactionReview.addUSD(i18n._(t`Balance USD`), pair.currentUserAssetAmount.value, newUserAssetAmount, pair.asset)\n    const newUtilization = e10(18).mulDiv(pair.currentBorrowAmount.value, pair.currentAllAssets.value.add(amount))\n    transactionReview.addPercentage(i18n._(t`Borrowed`), pair.utilization.value, newUtilization)\n    if (pair.currentExchangeRate.isZero()) {\n      transactionReview.add(\n        'Exchange Rate',\n        formatNumber(\n          pair.currentExchangeRate.toFixed(18 + pair.collateral.tokenInfo.decimals - pair.asset.tokenInfo.decimals)\n        ),\n        formatNumber(\n          pair.oracleExchangeRate.toFixed(18 + pair.collateral.tokenInfo.decimals - pair.asset.tokenInfo.decimals)\n        ),\n        Direction.UP\n      )\n    }\n    transactionReview.addPercentage(i18n._(t`Supply APR`), pair.supplyAPR.value, pair.currentSupplyAPR.value)\n  }\n\n  // Handlers\n  async function onExecute(cooker: KashiCooker): Promise<string> {\n    if (pair.currentExchangeRate.isZero()) {\n      cooker.updateExchangeRate(false, ZERO, ZERO)\n    }\n    cooker.addAsset(value.toBigNumber(pair.asset.tokenInfo.decimals), useBento)\n    return `${i18n._(t`Deposit`)} ${pair.asset.tokenInfo.symbol}`\n  }\n\n  return (\n    <>\n      <div className=\"mt-6 text-3xl text-high-emphesis\">Deposit {pair.asset.tokenInfo.symbol}</div>\n\n      <SmartNumberInput\n        color=\"blue\"\n        token={pair.asset}\n        value={value}\n        setValue={setValue}\n        useBentoTitleDirection=\"down\"\n        useBentoTitle=\"from\"\n        useBento={useBento}\n        setUseBento={setUseBento}\n        maxTitle=\"Balance\"\n        max={max}\n        showMax={true}\n      />\n\n      <WarningsList warnings={warnings} />\n      <TransactionReviewList transactionReview={transactionReview} />\n\n      <KashiApproveButton\n        color=\"blue\"\n        content={(onCook: any) => (\n          <TokenApproveButton value={value} token={assetToken} needed={!useBento}>\n            <Button\n              onClick={() => onCook(pair, onExecute)}\n              disabled={value.toBigNumber(pair.asset.tokenInfo.decimals).lte(0) || warnings.broken}\n            >\n              {i18n._(t`Deposit`)}\n            </Button>\n          </TokenApproveButton>\n        )}\n      />\n    </>\n  )\n}\n","import React, { useState } from 'react'\nimport { e10, minimum } from '../../functions/math'\n\nimport Button from '../../components/Button'\nimport { KashiApproveButton } from './Button'\nimport KashiCooker from '../../entities/KashiCooker'\nimport SmartNumberInput from './SmartNumberInput'\nimport { TransactionReview } from '../../entities/TransactionReview'\nimport TransactionReviewView from './TransactionReview'\nimport { Warnings } from '../../entities/Warnings'\nimport WarningsView from './WarningsList'\nimport { t } from '@lingui/macro'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useKashiApprovalPending } from '../../state/application/hooks'\nimport useKashiApproveCallback from '../../hooks/useKashiApproveCallback'\nimport { useLingui } from '@lingui/react'\n\nexport default function LendWithdrawAction({ pair }: any): JSX.Element {\n  const { account } = useActiveWeb3React()\n  const pendingApprovalMessage = useKashiApprovalPending()\n\n  const { i18n } = useLingui()\n\n  // State\n  const [useBento, setUseBento] = useState<boolean>(pair.asset.bentoBalance.gt(0))\n  const [value, setValue] = useState('')\n  const [pinMax, setPinMax] = useState(false)\n\n  const [kashiApprovalState, approveKashiFallback, kashiPermit, onApprove, onCook] = useKashiApproveCallback()\n\n  // Calculated\n  const max = minimum(pair.maxAssetAvailable, pair.currentUserAssetAmount.value)\n  const displayValue = pinMax ? max.toFixed(pair.asset.tokenInfo.decimals) : value\n\n  const fraction = pinMax\n    ? minimum(pair.userAssetFraction, pair.maxAssetAvailableFraction)\n    : value.toBigNumber(pair.asset.tokenInfo.decimals).mulDiv(pair.currentTotalAsset.base, pair.currentAllAssets.value)\n\n  const warnings = new Warnings()\n    .add(\n      pair.currentUserAssetAmount.value.lt(value.toBigNumber(pair.asset.tokenInfo.decimals)),\n      i18n._(\n        t`Please make sure your ${\n          useBento ? 'BentoBox' : 'wallet'\n        } balance is sufficient to withdraw and then try again.`\n      ),\n      true\n    )\n    .add(\n      pair.maxAssetAvailableFraction.lt(fraction),\n      i18n._(\n        t`The isn't enough liquidity available at the moment to withdraw this amount. Please try withdrawing less or later.`\n      ),\n      true\n    )\n\n  const transactionReview = new TransactionReview()\n  if (displayValue && !warnings.broken) {\n    const amount = displayValue.toBigNumber(pair.asset.tokenInfo.decimals)\n    const newUserAssetAmount = pair.currentUserAssetAmount.value.sub(amount)\n    transactionReview.addTokenAmount(\n      i18n._(t`Balance`),\n      pair.currentUserAssetAmount.value,\n      newUserAssetAmount,\n      pair.asset\n    )\n    transactionReview.addUSD(i18n._(t`Balance USD`), pair.currentUserAssetAmount.value, newUserAssetAmount, pair.asset)\n\n    const newUtilization = e10(18).mulDiv(pair.currentBorrowAmount.value, pair.currentAllAssets.value.sub(amount))\n    transactionReview.addPercentage(i18n._(t`Borrowed`), pair.utilization.value, newUtilization)\n  }\n\n  // Handlers\n  async function onExecute(cooker: KashiCooker) {\n    const fraction = pinMax\n      ? minimum(pair.userAssetFraction, pair.maxAssetAvailableFraction)\n      : value\n          .toBigNumber(pair.asset.tokenInfo.decimals)\n          .mulDiv(pair.currentTotalAsset.base, pair.currentAllAssets.value)\n\n    cooker.removeAsset(fraction, useBento)\n    return `${i18n._(t`Withdraw`)} ${pair.asset.tokenInfo.symbol}`\n  }\n\n  return (\n    <>\n      <div className=\"mt-6 text-3xl text-high-emphesis\">\n        {i18n._(t`Withdraw`)} {pair.asset.tokenInfo.symbol}\n      </div>\n\n      <SmartNumberInput\n        color=\"blue\"\n        token={pair.asset}\n        value={displayValue}\n        setValue={setValue}\n        useBentoTitleDirection=\"up\"\n        useBentoTitle=\"to\"\n        useBento={useBento}\n        setUseBento={setUseBento}\n        max={max}\n        pinMax={pinMax}\n        setPinMax={setPinMax}\n        showMax={true}\n      />\n\n      <WarningsView warnings={warnings} />\n      <TransactionReviewView transactionReview={transactionReview}></TransactionReviewView>\n\n      <KashiApproveButton\n        color=\"blue\"\n        content={(onCook: any) => (\n          <Button\n            onClick={() => onCook(pair, onExecute)}\n            disabled={displayValue.toBigNumber(pair.asset.tokenInfo.decimals).lte(0) || warnings.broken}\n          >\n            {i18n._(t`Withdraw`)}\n          </Button>\n        )}\n      />\n    </>\n  )\n}\n","export { default as Borrow } from './Borrow'\nexport { default as Repay } from './Repay'\nexport { default as Deposit } from './Deposit'\nexport { default as Withdraw } from './Withdraw'\n","const normalize = (src) => {\n  return src[0] === '/' ? src.slice(1) : src\n}\n\nexport const cloudinaryLoader = ({ src, width, style }) => {\n  return `https://res.cloudinary.com/dnz2bkszg/image/fetch/f_auto,w_${width}/${normalize(src)}`\n}\n","import { isAddress } from '../functions/validate'\nimport useENSAddress from './useENSAddress'\nimport useENSName from './useENSName'\n\n/**\n * Given a name or address, does a lookup to resolve to an address and name\n * @param nameOrAddress ENS name or address\n */\nexport default function useENS(nameOrAddress?: string | null): {\n  loading: boolean\n  address: string | null\n  name: string | null\n} {\n  const validated = isAddress(nameOrAddress)\n  const reverseLookup = useENSName(validated ? validated : undefined)\n  const lookup = useENSAddress(nameOrAddress)\n\n  return {\n    loading: reverseLookup.loading || lookup.loading,\n    address: validated ? validated : lookup.address,\n    name: reverseLookup.ENSName ? reverseLookup.ENSName : !validated && lookup.address ? nameOrAddress || null : null,\n  }\n}\n","import { useENSRegistrarContract, useENSResolverContract } from './useContract'\n\nimport { isZero } from '../functions'\nimport { namehash } from '@ethersproject/hash'\nimport useDebounce from './useDebounce'\nimport { useMemo } from 'react'\nimport { useSingleCallResult } from '../state/multicall/hooks'\n\n/**\n * Does a lookup for an ENS name to find its address.\n */\nexport default function useENSAddress(ensName?: string | null): {\n  loading: boolean\n  address: string | null\n} {\n  const debouncedName = useDebounce(ensName, 200)\n  const ensNodeArgument = useMemo(() => {\n    if (!debouncedName) return [undefined]\n    try {\n      return debouncedName ? [namehash(debouncedName)] : [undefined]\n    } catch (error) {\n      return [undefined]\n    }\n  }, [debouncedName])\n  const registrarContract = useENSRegistrarContract(false)\n  const resolverAddress = useSingleCallResult(registrarContract, 'resolver', ensNodeArgument)\n  const resolverAddressResult = resolverAddress.result?.[0]\n  const resolverContract = useENSResolverContract(\n    resolverAddressResult && !isZero(resolverAddressResult) ? resolverAddressResult : undefined,\n    false\n  )\n  const addr = useSingleCallResult(resolverContract, 'addr', ensNodeArgument)\n\n  const changed = debouncedName !== ensName\n  return {\n    address: changed ? null : addr.result?.[0] ?? null,\n    loading: changed || resolverAddress.loading || addr.loading,\n  }\n}\n","import { RefObject, useEffect, useRef } from 'react'\n\nexport function useOnClickOutside<T extends HTMLElement>(\n  node: RefObject<T | undefined>,\n  handler: undefined | (() => void)\n) {\n  const handlerRef = useRef<undefined | (() => void)>(handler)\n  useEffect(() => {\n    handlerRef.current = handler\n  }, [handler])\n\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (node.current?.contains(e.target as Node) ?? false) {\n        return\n      }\n      if (handlerRef.current) handlerRef.current()\n    }\n\n    document.addEventListener('mousedown', handleClickOutside)\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n    }\n  }, [node])\n}\n","import { Currency, Percent, Trade, TradeType } from '@mistswapdex/sdk'\n\nimport { useMemo } from 'react'\nimport { useUserSlippageToleranceWithDefault } from '../state/user/hooks'\n\nconst V2_SWAP_DEFAULT_SLIPPAGE = new Percent(50, 10_000) // .50%\nconst ONE_TENTHS_PERCENT = new Percent(10, 10_000) // .10%\n\nexport default function useSwapSlippageTolerance(trade: Trade<Currency, Currency, TradeType> | undefined): Percent {\n  const defaultSlippageTolerance = useMemo(() => {\n    if (!trade) return ONE_TENTHS_PERCENT\n    return V2_SWAP_DEFAULT_SLIPPAGE\n  }, [trade])\n  return useUserSlippageToleranceWithDefault(defaultSlippageTolerance)\n}\n","export default {\"src\":\"/_next/static/image/public/kashi-logo.62f59b2e457064a93dda7212b580fa26.png\",\"height\":465,\"width\":1819,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAAGFBMVEWO0+uQ1OyS2/Cf4vVjweBzx+Ryw99ft9KVoV0CAAAACHRSTlNVTZ+HJT1BY+aNFMcAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAaSURBVAiZY2BmYmFhZGRkZWBmYmdlYGBgAwABngAtcL+7IAAAAABJRU5ErkJggg==\"};","import Container from '../../components/Container'\nimport Footer from '../../components/Footer'\nimport Header from '../../components/Header'\nimport Image from '../../components/Image'\nimport Link from 'next/link'\nimport Main from '../../components/Main'\nimport NavLink from '../../components/NavLink'\nimport Popups from '../../components/Popups'\nimport React from 'react'\nimport kashiLogo from '../../../public/kashi-logo.png'\nimport { useRouter } from 'next/router'\n\ninterface LayoutProps {\n  left?: JSX.Element\n  children?: React.ReactChild | React.ReactChild[]\n  right?: JSX.Element\n}\n\nexport default function Layout({\n  left = undefined,\n  children = undefined,\n  right = undefined,\n}: LayoutProps): JSX.Element {\n  const router = useRouter()\n  return (\n    <div className=\"z-0 flex flex-col items-start w-full h-screen\">\n      <Header />\n      <Main>\n        <Container className=\"px-4 py-4 md:py-8 lg:py-12\" maxWidth=\"7xl\">\n          <div className={`mb-2 grid grid-cols-12 gap-4`}>\n            <div className=\"flex justify-center col-span-12 xl:col-span-3 lg:justify-start\">\n              <Link href=\"/borrow\">\n                <a className=\"flex justify-center xl:justify-start xl:mx-8\">\n                  <Image src={kashiLogo} alt=\"Kashi\" height={64} width={250} />\n                </a>\n              </Link>\n            </div>\n            <div className=\"flex items-end col-span-12 xl:col-span-9\">\n              <nav className=\"flex items-center justify-between w-full\">\n                <div className=\"flex\">\n                  <NavLink href=\"/lend\">\n                    <a\n                      className={\n                        'pl-4 pr-2 sm:pl-8 sm:pr-4 flex items-center font-medium ' +\n                        (router.pathname.startsWith('/lend')\n                          ? 'text-high-emphesis'\n                          : 'text-secondary hover:text-primary')\n                      }\n                    >\n                      <div className=\"text-base whitespace-nowrap\">Lend</div>\n                    </a>\n                  </NavLink>\n                  <NavLink href=\"/borrow\">\n                    <a\n                      className={\n                        'px-2 sm:px-4 flex items-center font-medium ' +\n                        (router.pathname.startsWith('/borrow')\n                          ? 'text-high-emphesis'\n                          : 'text-secondary hover:text-primary')\n                      }\n                    >\n                      <div className=\"text-base whitespace-nowrap\">Borrow</div>\n                    </a>\n                  </NavLink>\n\n                  <NavLink href=\"/kashi/create\">\n                    <a\n                      className={\n                        'px-2 sm:px-4 flex items-center font-medium ' +\n                        (router.pathname.startsWith('/kashi/create')\n                          ? 'text-high-emphesis'\n                          : 'text-secondary hover:text-primary')\n                      }\n                    >\n                      <div className=\"text-base whitespace-nowrap\">Create</div>\n                    </a>\n                  </NavLink>\n                </div>\n                <div className=\"flex pr-2 sm:pr-4\">\n                  <NavLink href=\"/balances\">\n                    <a\n                      className={`px-2 sm:px-4 flex justify-end items-center font-medium ${\n                        router.pathname === '/balances' ? 'text-high-emphesis' : 'text-secondary hover:text-primary'\n                      }`}\n                    >\n                      <svg\n                        className=\"mr-2 fill-current\"\n                        width={24}\n                        height={24}\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        viewBox=\"0 0 355.24 205.5\"\n                      >\n                        <path d=\"M350.43,97c-8.7-20-28.9-43.7-56.7-63.5S237.13,2,215.43.2c-1.2-.1-2.4-.2-3.5-.2H76.53c-13,0-23,4-28.4,11.7L4.63,72.3c-6.3,8.8-6.1,21.7.2,36.2,8.7,20,29,43.7,56.7,63.5s56.7,31.5,78.4,33.3c1.7.1,3.3.2,4.9.2h135.5c12.1-.4,21.5-4.3,26.8-11.6l43.4-60.6C356.93,124.3,356.73,111.5,350.43,97ZM209.93,7.4c1.6,0,3.2.1,4.9.2,20.7,1.7,48.2,13,74.6,31.9,4.3,3.1,11.8,9.7,15.7,12.9H188.43l-45-45ZM41.06,40.25c0-1.12-.15-2.24-.15-3.36a1.67,1.67,0,0,1,1.58-1.74,1.62,1.62,0,0,1,1.74,1.61,23.39,23.39,0,0,0,.15,3.11A1.52,1.52,0,0,1,43,41.62,1.68,1.68,0,0,1,41.06,40.25Zm53.15,71.67a1.74,1.74,0,0,1-2.37.13C72.54,95.5,48.5,72,42.33,47a1.77,1.77,0,0,1,1.27-2,1.83,1.83,0,0,1,2,1.24c6,24.39,29.58,47.16,48.41,63.46A1.7,1.7,0,0,1,94.21,111.92ZM173,146.77a1.5,1.5,0,0,1-1.89,1.24c-2.22-.37-4.27-1-6.49-1.49a1.58,1.58,0,0,1-1.11-2.12,1.52,1.52,0,0,1,2.06-1.12l6.17,1.49A1.7,1.7,0,0,1,173,146.77ZM200.51,150c-6.49,1.12-14.4.75-22.94-.62a1.63,1.63,0,0,1-1.42-1.87,1.68,1.68,0,0,1,1.9-1.37c8.22,1.37,15.66,1.75,22,.63a1.67,1.67,0,0,1,1.9,1.36A1.62,1.62,0,0,1,200.51,150Zm-11.78-12.6c-1.6,0-3.1-.1-4.7-.2-20.8-1.7-48.3-13-74.7-31.9s-45.8-41.4-54.2-60.5c-4.9-11.3-5.9-21.4-1.2-28.4l.3-.4c4.1-5.8,11.6-8.4,21.2-8.6h57.5l130,130Zm155.8-8.7-.3.4c-4.2,5.6-11.7,8.1-21.1,8.2h-49.7l-77.9-77.9h117.7c15.8,14.6,24.4,26.8,30.3,40.5C348.63,111.5,349.63,121.8,344.53,128.7Z\" />\n                      </svg>\n                      <div className=\"text-base whitespace-nowrap\">BentoBox</div>\n                      {/* <div className=\"ml-2 text-base whitespace-nowrap\">\n                                                {formatNumber(\n                                                    balances\n                                                        ?.reduce((previousValue, currentValue) => {\n                                                            return previousValue.add(currentValue.bento.usdValue)\n                                                        }, Zero)\n                                                        .toFixed(getCurrency(chainId).decimals),\n                                                    true\n                                                )}\n                                            </div> */}\n                    </a>\n                  </NavLink>\n                </div>\n              </nav>\n            </div>\n          </div>\n          <div className={`grid grid-cols-12 gap-4 min-h-1/2`}>\n            {left && (\n              <div className={`hidden xl:block xl:col-span-3`} style={{ maxHeight: '40rem' }}>\n                {left}\n              </div>\n            )}\n            <div\n              className={`col-span-12 ${right ? 'lg:col-span-8 xl:col-span-6' : 'xl:col-span-9'}`}\n              style={{ minHeight: '40rem' }}\n            >\n              {children}\n            </div>\n            {right && (\n              <div className=\"col-span-12 lg:col-span-4 xl:col-span-3\" style={{ maxHeight: '40rem' }}>\n                {right}\n              </div>\n            )}\n          </div>\n        </Container>\n      </Main>\n      <Popups />\n      <Footer />\n    </div>\n  )\n}\n","import { isTransactionRecent, useAllTransactions } from '../state/transactions/hooks'\nimport { useEffect, useMemo, useState } from 'react'\n\nimport { TransactionDetails } from '../state/transactions/reducer'\n\n// we want the latest one to come first, so return negative if a is after b\nfunction newTransactionsFirst(a: TransactionDetails, b: TransactionDetails) {\n  return b.addedTime - a.addedTime\n}\n\nconst useTransactionStatus = () => {\n  const [pendingTXStatus, setPendingTXStatus] = useState<any>(false)\n\n  // Determine if change in transactions, if so, run query again\n  const allTransactions = useAllTransactions()\n  const sortedRecentTransactions = useMemo(() => {\n    const txs = Object.values(allTransactions)\n    return txs.filter(isTransactionRecent).sort(newTransactionsFirst)\n  }, [allTransactions])\n  const pending = sortedRecentTransactions.filter((tx) => !tx.receipt).map((tx) => tx.hash)\n  const hasPendingTransactions = !!pending.length\n\n  useEffect(() => {\n    setPendingTXStatus(hasPendingTransactions)\n  }, [hasPendingTransactions])\n\n  return pendingTXStatus\n}\n\nexport default useTransactionStatus\n","import { KASHI_ADDRESS, FLEXUSD_ADDRESS, WNATIVE_ADDRESS } from '@mistswapdex/sdk'\nimport { useBentoBoxContract, useBoringHelperContract, useContract } from '../../hooks/useContract'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\n\nimport { BigNumber } from '@ethersproject/bignumber'\nimport ERC20_ABI from '../../constants/abis/erc20.json'\nimport { WrappedTokenInfo } from '../lists/wrappedTokenInfo'\nimport { e10 } from '../../functions/math'\nimport { easyAmount } from '../../functions/kashi'\nimport { getAddress } from '@ethersproject/address'\nimport { toAmount } from '../../functions/bentobox'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useAllTokens } from '../../hooks/Tokens'\nimport { useSingleCallResult } from '../multicall/hooks'\nimport useTransactionStatus from '../../hooks/useTransactionStatus'\n\nexport interface BentoBalance {\n  address: string\n  name: string\n  symbol: string\n  decimals: number\n  balance: any\n  bentoBalance: any\n  wallet: any\n  bento: any\n}\n\nexport function useBentoBalances(): BentoBalance[] {\n  const { chainId, account } = useActiveWeb3React()\n\n  const boringHelperContract = useBoringHelperContract()\n\n  const tokens = useAllTokens()\n\n  const weth = WNATIVE_ADDRESS[chainId]\n\n  const tokenAddresses = Object.keys(tokens)\n\n  const balanceData = useSingleCallResult(boringHelperContract, 'getBalances', [account, tokenAddresses])\n\n  const uiData = useSingleCallResult(boringHelperContract, 'getUIInfo', [\n    account,\n    [],\n    FLEXUSD_ADDRESS[chainId],\n    [KASHI_ADDRESS[chainId]],\n  ])\n\n  // IERC20 token = addresses[i];\n  // balances[i].totalSupply = token.totalSupply();\n  // balances[i].token = token;\n  // balances[i].balance = token.balanceOf(who);\n  // balances[i].bentoAllowance = token.allowance(who, address(bentoBox));\n  // balances[i].nonce = token.nonces(who);\n  // balances[i].bentoBalance = bentoBox.balanceOf(token, who);\n  // (balances[i].bentoAmount, balances[i].bentoShare) = bentoBox.totals(token);\n  // balances[i].rate = getETHRate(token);\n\n  return useMemo(() => {\n    if (\n      uiData.loading ||\n      balanceData.loading ||\n      uiData.error ||\n      balanceData.error ||\n      !uiData.result ||\n      !balanceData.result\n    )\n      return []\n    return tokenAddresses\n      .map((key: string, i: number) => {\n        const token = tokens[key]\n\n        const usd = e10(token.decimals).mulDiv(uiData.result[0].ethRate, balanceData.result[0][i].rate)\n\n        const full = {\n          ...token,\n          ...balanceData.result[0][i],\n          usd,\n        }\n        return {\n          ...token,\n          usd,\n          address: token.address,\n          name: token.name,\n          symbol: token.symbol,\n          decimals: token.decimals,\n          balance: token.address === weth ? uiData.result[0].ethBalance : balanceData.result[0][i].balance,\n          bentoBalance: balanceData.result[0][i].bentoBalance,\n          wallet: easyAmount(\n            token.address === weth ? uiData.result[0].ethBalance : balanceData.result[0][i].balance,\n            full\n          ),\n          bento: easyAmount(toAmount(full, balanceData.result[0][i].bentoBalance), full),\n        }\n      })\n      .filter((token) => token.balance.gt('0') || token.bentoBalance.gt('0'))\n  }, [\n    uiData.loading,\n    uiData.error,\n    uiData.result,\n    balanceData.loading,\n    balanceData.error,\n    balanceData.result,\n    tokenAddresses,\n    tokens,\n    weth,\n  ])\n}\n\nexport function useBentoBalance(tokenAddress: string): {\n  value: BigNumber\n  decimals: number\n} {\n  const { account } = useActiveWeb3React()\n\n  const boringHelperContract = useBoringHelperContract()\n  const bentoBoxContract = useBentoBoxContract()\n  const tokenAddressChecksum = getAddress(tokenAddress)\n  const tokenContract = useContract(tokenAddressChecksum ? tokenAddressChecksum : undefined, ERC20_ABI)\n\n  const currentTransactionStatus = useTransactionStatus()\n\n  const [balance, setBalance] = useState<any>()\n\n  // const balanceData = useSingleCallResult(boringHelperContract, 'getBalances', [account, tokenAddresses])\n\n  const fetchBentoBalance = useCallback(async () => {\n    const balances = await boringHelperContract?.getBalances(account, [tokenAddressChecksum])\n    const decimals = await tokenContract?.decimals()\n\n    const amount = BigNumber.from(balances[0].bentoShare).isZero()\n      ? BigNumber.from(0)\n      : BigNumber.from(balances[0].bentoBalance)\n          .mul(BigNumber.from(balances[0].bentoAmount))\n          .div(BigNumber.from(balances[0].bentoShare))\n\n    setBalance({\n      value: amount,\n      decimals: decimals,\n    })\n  }, [account, tokenAddressChecksum, tokenContract, boringHelperContract])\n\n  useEffect(() => {\n    if (account && bentoBoxContract && boringHelperContract && tokenContract) {\n      fetchBentoBalance()\n    }\n  }, [account, bentoBoxContract, currentTransactionStatus, fetchBentoBalance, tokenContract, boringHelperContract])\n\n  return balance\n}\n\nexport function useBentoMasterContractAllowed(masterContract?: string, user?: string): boolean | undefined {\n  const contract = useBentoBoxContract()\n\n  const inputs = useMemo(() => [masterContract, user], [masterContract, user])\n\n  const allowed = useSingleCallResult(contract, 'masterContractApproved', inputs).result\n\n  return useMemo(() => (allowed ? allowed[0] : undefined), [allowed])\n}\n"],"names":["React","useState","XIcon","classNames","TYPE","information","color","icon","warning","error","Alert","title","message","type","className","showIcon","dismissable","show","setShow","Header","children","Card","header","undefined","footer","backgroundImage","description","borderRadius","backgroundRepeat","backgroundSize","backgroundPosition","useENS","inputRegex","RegExp","AddressInput","memo","value","onUserInput","placeholder","align","fontSize","rest","address","loading","enforcer","nextUserInput","event","target","replace","displayName","escapeRegExp","defaultClassName","Input","test","Number","Address","Numeric","Percent","Main","height","Switch","Toggle","id","isActive","toggle","useRef","useSetUserSlippageTolerance","useUserSlippageTolerance","useUserTransactionTTL","DEFAULT_DEADLINE_FROM_NOW","QuestionHelper","Typography","useLingui","Button","SlippageError","DeadlineError","TransactionSettings","placeholderSlippage","i18n","inputRef","userSlippageTolerance","setUserSlippageTolerance","deadline","setDeadline","slippageInput","setSlippageInput","slippageError","setSlippageError","deadlineInput","setDeadlineInput","deadlineError","setDeadlineError","parseSlippageInput","length","parsed","Math","floor","parseFloat","isInteger","InvalidInput","tooLow","lessThan","tooHigh","greaterThan","parseCustomDeadline","console","_","toFixed","e","RiskyLow","maxWidth","marginRight","toString","useExpertModeManager","useUserArcherUseRelay","useUserSingleHopOnly","useModalOpen","useToggleSettingsMenu","AdjustmentsIcon","ApplicationModal","Modal","ModalHeader","useActiveWeb3React","useOnClickOutside","SettingsTab","chainId","node","open","SETTINGS","expertMode","toggleExpertMode","singleHopOnly","setSingleHopOnly","showConfirmation","setShowConfirmation","ttl","setTtl","userUseArcher","setUserUseArcher","CHAINLINK_PRICE_FEED_MAP","BigNumber","WNATIVE","getProviderOrSigner","getSigner","AddressZero","Contract","KASHIPAIR_ABI","ZERO","defaultAbiCoder","toElastic","toShare","signMasterContractApproval","bentoBoxContract","masterContract","user","library","approved","nonce","nonces","typedData","types","SetMasterContractApproval","name","primaryType","domain","verifyingContract","signer","_signTypedData","Action","KashiCooker","constructor","pair","account","actions","values","datas","add","action","data","push","from","approve","permit","BENTO_SETAPPROVAL","encode","v","r","s","updateExchangeRate","mustUpdate","minRate","maxRate","UPDATE_EXCHANGE_RATE","bentoDepositCollateral","amount","useNative","collateral","BENTO_DEPOSIT","bentoWithdrawCollateral","share","BENTO_WITHDRAW","bentoTransferCollateral","toAddress","BENTO_TRANSFER","repayShare","part","GET_REPAY_SHARE","addCollateral","fromBento","lt","ADD_COLLATERAL","addAsset","asset","ADD_ASSET","removeAsset","fraction","toBento","REMOVE_ASSET","removeCollateral","REMOVE_COLLATERAL","removeCollateralFraction","borrow","BORROW","repay","GET_REPAY_PART","REPAY","repayPart","totalBorrow","mul","div","useValue1","useValue2","returnValues","CALL","cook","success","kashiPairCloneContract","tx","reduce","a","b","ChainId","e10","AbstractOracle","tokens","SMARTBCH","oracle","oracleData","SushiSwapTWAP0Oracle","SushiSwapTWAP1Oracle","ChainlinkOracle","valid","validate","mapping","params","decode","decimals","to","assetAddress","collateralAddress","needed","divider","eq","lowerEqual","value1","value2","toLowerCase","getOracle","warningSeverity","SEVERITY","FormattedPriceImpact","priceImpact","multiply","Fragment","ChevronRightIcon","unwrappedToken","SwapRoute","trade","route","path","map","token","i","isLastItem","currency","symbol","KASHI_ADDRESS","NATIVE","FLEXUSD_ADDRESS","WNATIVE_ADDRESS","createContext","useCallback","useContext","useEffect","useReducer","maximum","minimum","accrue","accrueTotalAssetWithFee","easyAmount","getUSDValue","interestAccrue","takeFee","toAmount","useBentoBoxContract","useBoringHelperContract","Fraction","bentobox","getAddress","useAllTokens","useBlockNumber","usePrevious","ActionType","initialState","info","ethBalance","sushiBalance","sushiBarBalance","xsushiBalance","xsushiSupply","sushiBarAllowance","factories","ethRate","sushiRate","btcRate","pendingSushi","blockTimeStamp","masterContractApproved","pairs","KashiContext","state","dispatch","reducer","SYNC","UPDATE","payload","getPairs","logs","masterAddress","queryFilter","filters","LogDeploy","clones","clone","args","cloneAddress","log","deployParams","Tokens","Array","rpcToObj","rpc_obj","obj","Object","keys","isNaN","item","KashiProvider","blockNumber","wnative","boringHelperContract","updatePairs","includes","getUIInfo","logPairs","invalidOracles","allPairAddresses","filter","pollKashiPairs","pairTokens","forEach","pairAddresses","balances","getBalances","missingTokens","balance","assign","tokenInfo","usd","mulDiv","rate","elapsedSeconds","Date","now","sub","accrueInfo","lastAccrued","interestPerYear","interestPerSecond","totalCollateralAmount","totalCollateralShare","totalAssetAmount","totalAsset","elastic","currentBorrowAmount","currentAllAssets","marketHealth","currentExchangeRate","oracleExchangeRate","spotExchangeRate","currentTotalAsset","currentAllAssetShares","maxAssetAvailable","base","maxAssetAvailableFraction","utilization","supplyAPR","currentInterestPerYear","currentSupplyAPR","userCollateralAmount","userCollateralShare","currentUserAssetAmount","userAssetFraction","currentUserBorrowAmount","userBorrowPart","currentUserLentAmount","feesEarned","feesEarnedFraction","maxBorrowable","spot","stored","safe","possible","safeMaxRemovable","health","netWorth","search","string","pow","previousBlockNumber","useKashiInfo","context","Error","useKashiPairs","useKashiPair","find","COLOR","pink","blue","Checkbox","set","checked","Settings","useSwapSlippageTolerance","ExchangeRateCheckBox","updateOracle","setUpdateOracle","desiredDirection","displayUpdateOracle","gt","isZero","SwapCheckbox","swap","setSwap","help","allowedSlippage","useMemo","setKashiApprovalPending","useBentoMasterContractAllowed","useDispatch","useKashiApprovalPending","useTransactionAdder","HashZero","splitSignature","BentoApprovalState","BentoApproveOutcome","useKashiApproveCallback","approveKashiFallback","setApproveKashiFallback","kashiPermit","setKashiPermit","pendingApproval","currentAllowed","addTransaction","approvalState","UNKNOWN","PENDING","APPROVED","NOT_APPROVED","outcome","NOT_READY","signature","SUCCESS","code","REJECTED","FAILED","onApprove","result","setMasterContractApproval","wait","onCook","execute","cooker","summary","ApprovalState","useApproveCallback","BENTOBOX_ADDRESS","Dots","tryParseAmount","KashiApproveButton","content","kashiApprovalState","showApprove","showChildren","cloneElement","TokenApproveButton","Warning","active","breaking","or","Warnings","_add","addWarning","addError","broken","some","ArrowDownRight","ArrowUpRight","formatNumber","SmartNumberInput","setValue","useBentoTitleDirection","useBentoTitle","useBento","setUseBento","maxTitle","max","pinMax","setPinMax","showMax","disabled","switchDisabled","display","cursor","computeRealizedLPFeePercent","TradeReview","showRoute","Boolean","realizedLPFee","realizedLpFeePercent","inputAmount","subtract","minimumAmountOut","toSignificant","outputAmount","formatPercent","getUSDString","Direction","TransactionReview","direction","addTokenAmount","FLAT","UP","DOWN","addUSD","addPercentage","addRate","ArrowRight","TransactionReviewView","transactionReview","line","marginLeft","WarningsList","warnings","useUserSlippageToleranceWithDefault","WarningsView","useCurrency","useV2TradeExactIn","DEFAULT_BORROW_SLIPPAGE_TOLERANCE","Borrow","useBentoCollateral","setUseBentoCollateral","bentoBalance","useBentoBorrow","setUseBentoBorrow","collateralValue","setCollateralValue","borrowValue","setBorrowValue","swapBorrowValue","setSwapBorrowValue","assetToken","collateralToken","assetNative","collateralBalance","parsedAmount","foundTrade","extraCollateral","quotient","swapCollateral","toBigNumber","nextUserCollateralValue","nextMaxBorrowableOracle","nextMaxBorrowableSpot","nextMaxBorrowableStored","nextMaxBorrowMinimum","nextMaxBorrowSafe","nextMaxBorrowPossible","maxBorrow","nextBorrowValue","nextHealth","collateralValueSet","borrowValueSet","isExpertMode","priceImpactSeverity","borrowAmount","collateralWarnings","borrowWarnings","actionName","actionDisabled","lte","onExecute","onMultiply","multiplier","multipliedCollateral","multipliedBorrow","multipler","useV2TradeExactOut","DEFAULT_KASHI_REPAY_SLIPPAGE_TOLERANCE","Repay","useBentoRepay","setUseBentoRepay","useBentoRemove","setUseBentoRemoveCollateral","repayValue","setRepayAssetValue","removeValue","setRemoveCollateralValue","pinRemoveMax","setPinRemoveMax","pinRepayMax","setPinRepayMax","displayRepayValue","nextUserBorrowAmount","nextMinCollateralOracle","nextMinCollateralSpot","nextMinCollateralStored","nextMinCollateralMinimum","nextMaxRemoveCollateral","maxRemoveCollateral","displayRemoveValue","maxAmountIn","maximumAmountIn","nextUserCollateralAmount","removeValueSet","repayValueSet","resetRepayState","TransactionReviewList","Deposit","newUserAssetAmount","newUtilization","LendWithdrawAction","pendingApprovalMessage","displayValue","default","Withdraw","normalize","src","slice","cloudinaryLoader","width","style","isAddress","useENSAddress","useENSName","nameOrAddress","validated","reverseLookup","lookup","ENSName","useENSRegistrarContract","useENSResolverContract","namehash","useDebounce","useSingleCallResult","ensName","debouncedName","ensNodeArgument","registrarContract","resolverAddress","resolverAddressResult","resolverContract","addr","changed","handler","handlerRef","current","handleClickOutside","contains","document","addEventListener","removeEventListener","V2_SWAP_DEFAULT_SLIPPAGE","ONE_TENTHS_PERCENT","defaultSlippageTolerance","Container","Footer","Image","Link","NavLink","Popups","kashiLogo","useRouter","Layout","left","right","router","pathname","startsWith","maxHeight","minHeight","isTransactionRecent","useAllTransactions","newTransactionsFirst","addedTime","useTransactionStatus","pendingTXStatus","setPendingTXStatus","allTransactions","sortedRecentTransactions","txs","sort","pending","receipt","hash","hasPendingTransactions","useContract","ERC20_ABI","useBentoBalances","weth","tokenAddresses","balanceData","uiData","key","full","wallet","bento","useBentoBalance","tokenAddress","tokenAddressChecksum","tokenContract","currentTransactionStatus","setBalance","fetchBentoBalance","bentoShare","bentoAmount","contract","inputs","allowed"],"sourceRoot":""}