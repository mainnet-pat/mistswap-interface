{"version":3,"file":"7767.js","mappings":"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","sources":["webpack://mistswap-interface/./src/features/onsen/hooks.ts"],"sourcesContent":["import {\n  ChainId,\n  CurrencyAmount,\n  JSBI,\n  MASTERCHEF_ADDRESS,\n  MASTERCHEF_V2_ADDRESS,\n} from '@mistswapdex/sdk'\nimport { Chef } from './enum'\nimport { NEVER_RELOAD, useSingleCallResult, useSingleContractMultipleData } from '../../state/multicall/hooks'\nimport { Dispatch, useCallback, useEffect, useMemo, useState } from 'react'\nimport { useMasterChefContract, useMasterChefV2Contract } from '../../hooks/useContract'\n\nimport { Contract } from '@ethersproject/contracts'\nimport { MIST } from '../../config/tokens'\nimport { Zero } from '@ethersproject/constants'\nimport concat from 'lodash/concat'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport zip from 'lodash/zip'\n\nexport function useChefContract(chef: Chef) {\n  const masterChefContract = useMasterChefContract()\n  const masterChefV2Contract = useMasterChefV2Contract()\n  const contracts = useMemo(\n    () => ({\n      [Chef.MASTERCHEF]: masterChefContract,\n      [Chef.MASTERCHEF_V2]: masterChefV2Contract,\n    }),\n    [masterChefContract, masterChefV2Contract]\n  )\n  return useMemo(() => {\n    return contracts[chef]\n  }, [contracts, chef])\n}\n\nconst CHEFS = {\n  [ChainId.SMARTBCH]: [Chef.MASTERCHEF, Chef.MASTERCHEF_V2],\n}\n\nexport function useChefContracts(chefs: Chef[]) {\n  const masterChefContract = useMasterChefContract()\n  const masterChefV2Contract = useMasterChefV2Contract()\n  const contracts = useMemo(\n    () => ({\n      [Chef.MASTERCHEF]: masterChefContract,\n      [Chef.MASTERCHEF_V2]: masterChefV2Contract,\n    }),\n    [masterChefContract, masterChefV2Contract]\n  )\n  return chefs.map((chef) => contracts[chef])\n}\n\nexport function useUserInfo(farm, token) {\n  const { account } = useActiveWeb3React()\n\n  const contract = useChefContract(farm.chef)\n\n  const args = useMemo(() => {\n    if (!account) {\n      return\n    }\n    return [String(farm.id), String(account)]\n  }, [farm, account])\n\n  const result = useSingleCallResult(args ? contract : null, 'userInfo', args)?.result\n\n  const value = result?.[0]\n\n  const amount = value ? JSBI.BigInt(value.toString()) : undefined\n\n  return amount ? CurrencyAmount.fromRawAmount(token, amount) : undefined\n}\n\nexport function usePendingSushi(farm) {\n  const { account, chainId } = useActiveWeb3React()\n\n  const contract = useChefContract(farm.chef)\n\n  const args = useMemo(() => {\n    if (!account) {\n      return\n    }\n    return [String(farm.id), String(account)]\n  }, [farm, account])\n\n  const result = useSingleCallResult(args ? contract : null, 'pendingSushi', args)?.result\n\n  const value = result?.[0]\n\n  const amount = value ? JSBI.BigInt(value.toString()) : undefined\n\n  return amount ? CurrencyAmount.fromRawAmount(MIST[chainId], amount) : undefined\n}\n\nexport function usePendingToken(farm, contract) {\n  const { account } = useActiveWeb3React()\n\n  const args = useMemo(() => {\n    if (!account || !farm) {\n      return\n    }\n    return [String(farm.pid), String(account)]\n  }, [farm, account])\n\n  const pendingTokens = useSingleContractMultipleData(\n    args ? contract : null,\n    'pendingTokens',\n    args.map((arg) => [...arg, '0'])\n  )\n\n  return useMemo(() => pendingTokens, [pendingTokens])\n}\n\nexport function useChefPositions(contract?: Contract | null, rewarder?: Contract | null, chainId = undefined) {\n  const { account } = useActiveWeb3React()\n\n  const numberOfPools = useSingleCallResult(contract ? contract : null, 'poolLength', undefined, NEVER_RELOAD)\n    ?.result?.[0]\n\n  const args = useMemo(() => {\n    if (!account || !numberOfPools) {\n      return\n    }\n    return [...Array(numberOfPools.toNumber()).keys()].map((pid) => [String(pid), String(account)])\n  }, [numberOfPools, account])\n\n  const pendingSushi = useSingleContractMultipleData(args ? contract : null, 'pendingSushi', args)\n\n  const userInfo = useSingleContractMultipleData(args ? contract : null, 'userInfo', args)\n\n  // const pendingTokens = useSingleContractMultipleData(\n  //     rewarder,\n  //     'pendingTokens',\n  //     args.map((arg) => [...arg, '0'])\n  // )\n\n  const getChef = useCallback(() => {\n    if (MASTERCHEF_ADDRESS[chainId] === contract.address) {\n      return Chef.MASTERCHEF\n    } else if (MASTERCHEF_V2_ADDRESS[chainId] === contract.address) {\n      return Chef.MASTERCHEF_V2\n    }\n  }, [chainId, contract])\n\n  return useMemo(() => {\n    if (!pendingSushi || !userInfo) {\n      return []\n    }\n    return zip(pendingSushi, userInfo)\n      .map((data, i) => ({\n        id: args[i][0],\n        pendingSushi: data[0].result?.[0] || Zero,\n        amount: data[1].result?.[0] || Zero,\n        chef: getChef(),\n        // pendingTokens: data?.[2]?.result,\n      }))\n      .filter(({ pendingSushi, amount }) => {\n        return (pendingSushi && !pendingSushi.isZero()) || (amount && !amount.isZero())\n      })\n  }, [args, getChef, pendingSushi, userInfo])\n}\n\nexport function usePositions(chainId = undefined) {\n  const [masterChefV1Positions, masterChefV2Positions] = [\n    useChefPositions(useMasterChefContract(), undefined, chainId),\n    useChefPositions(useMasterChefV2Contract(), undefined, chainId),\n  ]\n  return concat(masterChefV1Positions, masterChefV2Positions)\n}\n\n/*\n  Currently expensive to render farm list item. The infinite scroll is used to\n  to minimize this impact. This hook pairs with it, keeping track of visible\n  items and passes this to <InfiniteScroll> component.\n*/\nexport function useInfiniteScroll(items: any[]): [number, Dispatch<number>] {\n  const [itemsDisplayed, setItemsDisplayed] = useState(10)\n  useEffect(() => setItemsDisplayed(10), [items.length])\n  return [itemsDisplayed, setItemsDisplayed]\n}\n"],"names":["ChainId","CurrencyAmount","JSBI","MASTERCHEF_ADDRESS","MASTERCHEF_V2_ADDRESS","Chef","NEVER_RELOAD","useSingleCallResult","useSingleContractMultipleData","useCallback","useEffect","useMemo","useState","useMasterChefContract","useMasterChefV2Contract","MIST","Zero","concat","useActiveWeb3React","zip","useChefContract","chef","masterChefContract","masterChefV2Contract","contracts","MASTERCHEF","MASTERCHEF_V2","CHEFS","SMARTBCH","useChefContracts","chefs","map","useUserInfo","farm","token","account","contract","args","String","id","result","value","amount","BigInt","toString","undefined","fromRawAmount","usePendingSushi","chainId","usePendingToken","pid","pendingTokens","arg","useChefPositions","rewarder","numberOfPools","Array","toNumber","keys","pendingSushi","userInfo","getChef","address","data","i","filter","isZero","usePositions","masterChefV1Positions","masterChefV2Positions","useInfiniteScroll","items","itemsDisplayed","setItemsDisplayed","length"],"sourceRoot":""}