{"version":3,"file":"static/chunks/259-9d663242f5dad52e5357.js","mappings":"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","sources":["webpack://_N_E/./src/components/Alert/index.tsx","webpack://_N_E/./src/entities/KashiCooker.ts","webpack://_N_E/./src/features/exchange-v1/swap/FormattedPriceImpact.tsx","webpack://_N_E/./src/features/exchange-v1/swap/SwapRoute.tsx","webpack://_N_E/./src/components/Checkbox/index.tsx","webpack://_N_E/./src/features/kashi/Checkbox.tsx","webpack://_N_E/./src/hooks/useKashiApproveCallback.ts","webpack://_N_E/./src/features/kashi/Button.tsx","webpack://_N_E/./src/entities/Warnings.ts","webpack://_N_E/./src/features/kashi/SmartNumberInput.tsx","webpack://_N_E/./src/features/kashi/TradeReview.tsx","webpack://_N_E/./src/entities/TransactionReview.ts","webpack://_N_E/./src/features/kashi/TransactionReview.tsx","webpack://_N_E/./src/features/kashi/WarningsList.tsx","webpack://_N_E/./src/features/kashi/Borrow.tsx","webpack://_N_E/./src/features/kashi/Repay.tsx","webpack://_N_E/./src/features/kashi/Deposit.tsx","webpack://_N_E/./src/features/kashi/Withdraw.tsx","webpack://_N_E/./src/hooks/useSwapSlippageTollerence.ts","webpack://_N_E/./src/state/bentobox/hooks.ts"],"sourcesContent":["import React, { useState } from 'react'\n\nimport { XIcon } from '@heroicons/react/solid'\nimport { classNames } from '../../functions'\n\nconst TYPE = {\n  information: {\n    color: 'bg-purple bg-opacity-20 text-high-emphesis',\n    icon: (\n      <svg\n        width=\"33\"\n        height=\"33\"\n        className=\"text-low-emphesis\"\n        viewBox=\"0 0 33 33\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        path=\"currentColor\"\n        fill=\"currentColor\"\n        aria-hidden=\"true\"\n      >\n        <path\n          d=\"M16.5 0C7.40184 0 0 7.40184 0 16.5C0 25.5982 7.40184 33 16.5 33C25.5982 33 33 25.5982 33 16.5C33 7.40184 25.5982 0 16.5 0ZM16.5 25.9909C15.5747 25.9909 14.8245 25.2407 14.8245 24.3154C14.8245 23.39 15.5747 22.6398 16.5 22.6398C17.4253 22.6398 18.1755 23.39 18.1755 24.3154C18.1755 25.2407 17.4253 25.9909 16.5 25.9909ZM18.1755 17.3898C18.1755 18.3152 17.4253 19.0654 16.5 19.0654C15.5747 19.0654 14.8245 18.3152 14.8245 17.3898V8.56534C14.8245 7.63999 15.5747 6.8898 16.5 6.8898C17.4253 6.8898 18.1755 7.63999 18.1755 8.56534V17.3898Z\"\n          fill=\"#575757\"\n        />\n      </svg>\n    ),\n  },\n  warning: {\n    color: 'bg-yellow bg-opacity-25 text-high-emphesis',\n    icon: (\n      <svg\n        className=\"w-5 h-5 text-yellow\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 20 20\"\n        fill=\"currentColor\"\n        aria-hidden=\"true\"\n      >\n        <path\n          fillRule=\"evenodd\"\n          d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\"\n          clipRule=\"evenodd\"\n        />\n      </svg>\n    ),\n  },\n  error: {\n    color: 'bg-red bg-opacity-25 text-high-emphesis',\n    icon: (\n      <svg\n        className=\"w-5 h-5 text-red\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 20 20\"\n        fill=\"currentColor\"\n        aria-hidden=\"true\"\n      >\n        <path\n          fillRule=\"evenodd\"\n          d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\n          clipRule=\"evenodd\"\n        />\n      </svg>\n    ),\n  },\n}\n\nexport interface AlertProps {\n  title?: string\n  message?: string | React.ReactChild | React.ReactChild[]\n  type?: 'warning' | 'error' | 'information'\n  showIcon?: boolean\n  dismissable?: boolean\n}\n\nexport default function Alert({\n  title,\n  message,\n  type = 'warning',\n  className = '',\n  showIcon = false,\n  dismissable = true,\n}: AlertProps & React.HTMLAttributes<HTMLDivElement>): JSX.Element | null {\n  // TODO: Persist this...\n  const [show, setShow] = useState(true)\n  const { color, icon } = TYPE[type]\n  return message && show ? (\n    <div className={classNames('block relative w-full rounded text-sm p-4', show && 'pr-10', color, className)}>\n      {title && <div className=\"mb-1 text-2xl font-medium\">{title}</div>}\n      <div className=\"flex items-center\">\n        {showIcon && <div className=\"flex-shrink-0\">{icon}</div>}\n        <div className={!showIcon ? 'ml-0' : 'ml-3'}>\n          <p className=\"text-base\">{message}</p>\n        </div>\n      </div>\n      {dismissable && (\n        <div className=\"absolute top-2 right-2\">\n          <button\n            type=\"button\"\n            onClick={() => setShow(!show)}\n            className=\"inline-flex opacity-80 hover:opacity-100 focused:opacity-100 rounded p-1.5 text-primary hover:text-high-emphesis focus:text-high-emphesis focus:outline-none focus:ring focus:ring-offset focus:ring-offset-purple focus:ring-purple\"\n          >\n            <span className=\"sr-only\">Dismiss</span>\n            <XIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\n          </button>\n        </div>\n      )}\n    </div>\n  ) : null\n}\n","import { BigNumber, BigNumberish } from '@ethersproject/bignumber'\nimport { ChainId, WNATIVE } from '@mistswapdex/sdk'\nimport { getProviderOrSigner, getSigner } from '../functions/contract'\n\nimport { AddressZero } from '@ethersproject/constants'\nimport { Contract } from '@ethersproject/contracts'\nimport KASHIPAIR_ABI from '../constants/abis/kashipair.json'\nimport { KashiPermit } from '../hooks/useKashiApproveCallback'\nimport { Web3Provider } from '@ethersproject/providers'\nimport { ZERO } from '../functions/math'\nimport { defaultAbiCoder } from '@ethersproject/abi'\nimport { toElastic } from '../functions/rebase'\nimport { toShare } from '../functions/bentobox'\n\nexport async function signMasterContractApproval(\n  bentoBoxContract: Contract | null,\n  masterContract: string | undefined,\n  user: string,\n  library: Web3Provider,\n  approved: boolean,\n  chainId: ChainId | undefined\n): Promise<string> {\n  const warning = approved ? 'Give FULL access to funds in (and approved to) BentoBox?' : 'Revoke access to BentoBox?'\n  const nonce = await bentoBoxContract?.nonces(user)\n  const message = {\n    warning,\n    user,\n    masterContract,\n    approved,\n    nonce,\n  }\n\n  const typedData = {\n    types: {\n      SetMasterContractApproval: [\n        { name: 'warning', type: 'string' },\n        { name: 'user', type: 'address' },\n        { name: 'masterContract', type: 'address' },\n        { name: 'approved', type: 'bool' },\n        { name: 'nonce', type: 'uint256' },\n      ],\n    },\n    primaryType: 'SetMasterContractApproval',\n    domain: {\n      name: 'BentoBox V1',\n      chainId: chainId,\n      verifyingContract: bentoBoxContract?.address,\n    },\n    message: message,\n  }\n  const signer = getSigner(library, user)\n  return signer._signTypedData(typedData.domain, typedData.types, typedData.message)\n}\n\nenum Action {\n  ADD_ASSET = 1,\n  REPAY = 2,\n  REMOVE_ASSET = 3,\n  REMOVE_COLLATERAL = 4,\n  BORROW = 5,\n  GET_REPAY_SHARE = 6,\n  GET_REPAY_PART = 7,\n  ACCRUE = 8,\n\n  // Functions that don't need accrue to be called\n  ADD_COLLATERAL = 10,\n  UPDATE_EXCHANGE_RATE = 11,\n\n  // Function on BentoBox\n  BENTO_DEPOSIT = 20,\n  BENTO_WITHDRAW = 21,\n  BENTO_TRANSFER = 22,\n  BENTO_TRANSFER_MULTIPLE = 23,\n  BENTO_SETAPPROVAL = 24,\n\n  // Any external call (except to BentoBox)\n  CALL = 30,\n}\n\nexport default class KashiCooker {\n  private pair: any\n  private account: string\n  private library: Web3Provider | undefined\n  private chainId: ChainId\n\n  private actions: Action[]\n  private values: BigNumber[]\n  private datas: string[]\n\n  constructor(\n    pair: any,\n    account: string | null | undefined,\n    library: Web3Provider | undefined,\n    chainId: ChainId | undefined\n  ) {\n    this.pair = pair\n    this.account = account || AddressZero\n    this.library = library\n    this.chainId = chainId || 1\n\n    this.actions = []\n    this.values = []\n    this.datas = []\n  }\n\n  add(action: Action, data: string, value: BigNumberish = 0): void {\n    this.actions.push(action)\n    this.datas.push(data)\n    this.values.push(BigNumber.from(value))\n  }\n\n  approve(permit: KashiPermit): void {\n    if (permit) {\n      this.add(\n        Action.BENTO_SETAPPROVAL,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'bool', 'uint8', 'bytes32', 'bytes32'],\n          [permit.account, permit.masterContract, true, permit.v, permit.r, permit.s]\n        )\n      )\n    }\n  }\n\n  updateExchangeRate(mustUpdate = false, minRate = ZERO, maxRate = ZERO): KashiCooker {\n    this.add(\n      Action.UPDATE_EXCHANGE_RATE,\n      defaultAbiCoder.encode(['bool', 'uint256', 'uint256'], [mustUpdate, minRate, maxRate])\n    )\n    return this\n  }\n\n  bentoDepositCollateral(amount: BigNumber): KashiCooker {\n    const useNative = this.pair.collateral.address === WNATIVE[this.chainId].address\n\n    this.add(\n      Action.BENTO_DEPOSIT,\n      defaultAbiCoder.encode(\n        ['address', 'address', 'int256', 'int256'],\n        [useNative ? AddressZero : this.pair.collateral.address, this.account, amount, 0]\n      ),\n      useNative ? amount : ZERO\n    )\n\n    return this\n  }\n\n  bentoWithdrawCollateral(amount: BigNumber, share: BigNumber): KashiCooker {\n    const useNative = this.pair.collateral.address === WNATIVE[this.chainId].address\n\n    this.add(\n      Action.BENTO_WITHDRAW,\n      defaultAbiCoder.encode(\n        ['address', 'address', 'int256', 'int256'],\n        [useNative ? AddressZero : this.pair.collateral.address, this.account, amount, share]\n      ),\n      useNative ? amount : ZERO\n    )\n\n    return this\n  }\n\n  bentoTransferCollateral(share: BigNumber, toAddress: string): KashiCooker {\n    this.add(\n      Action.BENTO_TRANSFER,\n      defaultAbiCoder.encode(['address', 'address', 'int256'], [this.pair.collateral.address, toAddress, share])\n    )\n\n    return this\n  }\n\n  repayShare(part: BigNumber): KashiCooker {\n    this.add(Action.GET_REPAY_SHARE, defaultAbiCoder.encode(['int256'], [part]))\n\n    return this\n  }\n\n  addCollateral(amount: BigNumber, fromBento: boolean): KashiCooker {\n    let share: BigNumber\n    if (fromBento) {\n      share = amount.lt(0) ? amount : toShare(this.pair.collateral, amount)\n    } else {\n      const useNative = this.pair.collateral.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_DEPOSIT,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.collateral.address, this.account, amount, 0]\n        ),\n        useNative ? amount : ZERO\n      )\n      share = BigNumber.from(-2)\n    }\n\n    this.add(Action.ADD_COLLATERAL, defaultAbiCoder.encode(['int256', 'address', 'bool'], [share, this.account, false]))\n    return this\n  }\n\n  addAsset(amount: BigNumber, fromBento: boolean): KashiCooker {\n    let share: BigNumber\n    if (fromBento) {\n      share = toShare(this.pair.asset, amount)\n    } else {\n      const useNative = this.pair.asset.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_DEPOSIT,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.asset.address, this.account, amount, 0]\n        ),\n        useNative ? amount : ZERO\n      )\n      share = BigNumber.from(-2)\n    }\n\n    this.add(Action.ADD_ASSET, defaultAbiCoder.encode(['int256', 'address', 'bool'], [share, this.account, false]))\n    return this\n  }\n\n  removeAsset(fraction: BigNumber, toBento: boolean): KashiCooker {\n    this.add(Action.REMOVE_ASSET, defaultAbiCoder.encode(['int256', 'address'], [fraction, this.account]))\n    if (!toBento) {\n      const useNative = this.pair.asset.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_WITHDRAW,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.asset.address, this.account, 0, -1]\n        )\n      )\n    }\n    return this\n  }\n\n  removeCollateral(share: BigNumber, toBento: boolean): KashiCooker {\n    this.add(Action.REMOVE_COLLATERAL, defaultAbiCoder.encode(['int256', 'address'], [share, this.account]))\n    if (!toBento) {\n      const useNative = this.pair.collateral.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_WITHDRAW,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.collateral.address, this.account, 0, share]\n        )\n      )\n    }\n    return this\n  }\n\n  removeCollateralFraction(fraction: BigNumber, toBento: boolean): KashiCooker {\n    this.add(Action.REMOVE_COLLATERAL, defaultAbiCoder.encode(['int256', 'address'], [fraction, this.account]))\n    if (!toBento) {\n      const useNative = this.pair.collateral.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_WITHDRAW,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.collateral.address, this.account, 0, -1]\n        )\n      )\n    }\n    return this\n  }\n\n  borrow(amount: BigNumber, toBento: boolean, toAddress = ''): KashiCooker {\n    this.add(\n      Action.BORROW,\n      defaultAbiCoder.encode(['int256', 'address'], [amount, toAddress && toBento ? toAddress : this.account])\n    )\n    if (!toBento) {\n      const useNative = this.pair.asset.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_WITHDRAW,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.asset.address, toAddress || this.account, amount, 0]\n        )\n      )\n    }\n    return this\n  }\n\n  repay(amount: BigNumber, fromBento: boolean): KashiCooker {\n    if (!fromBento) {\n      const useNative = this.pair.asset.address === WNATIVE[this.chainId].address\n\n      this.add(\n        Action.BENTO_DEPOSIT,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.asset.address, this.account, amount, 0]\n        ),\n        useNative ? amount : ZERO\n      )\n    }\n    this.add(Action.GET_REPAY_PART, defaultAbiCoder.encode(['int256'], [fromBento ? amount : -1]))\n    this.add(Action.REPAY, defaultAbiCoder.encode(['int256', 'address', 'bool'], [-1, this.account, false]))\n    return this\n  }\n\n  repayPart(part: BigNumber, fromBento: boolean): KashiCooker {\n    if (!fromBento) {\n      const useNative = this.pair.asset.address === WNATIVE[this.chainId].address\n\n      this.add(Action.GET_REPAY_SHARE, defaultAbiCoder.encode(['int256'], [part]))\n      this.add(\n        Action.BENTO_DEPOSIT,\n        defaultAbiCoder.encode(\n          ['address', 'address', 'int256', 'int256'],\n          [useNative ? AddressZero : this.pair.asset.address, this.account, 0, -1]\n        ),\n        // TODO: Put some warning in the UI or not allow repaying ETH directly from wallet, because this can't be pre-calculated\n        useNative ? toShare(this.pair.asset, toElastic(this.pair.totalBorrow, part, true)).mul(1001).div(1000) : ZERO\n      )\n    }\n    this.add(Action.REPAY, defaultAbiCoder.encode(['int256', 'address', 'bool'], [part, this.account, false]))\n    return this\n  }\n\n  action(\n    address: string,\n    value: BigNumberish,\n    data: string,\n    useValue1: boolean,\n    useValue2: boolean,\n    returnValues: number\n  ): void {\n    this.add(\n      Action.CALL,\n      defaultAbiCoder.encode(\n        ['address', 'bytes', 'bool', 'bool', 'uint8'],\n        [address, data, useValue1, useValue2, returnValues]\n      ),\n      value\n    )\n  }\n\n  async cook() {\n    if (!this.library) {\n      return {\n        success: false,\n      }\n    }\n\n    const kashiPairCloneContract = new Contract(\n      this.pair.address,\n      KASHIPAIR_ABI,\n      getProviderOrSigner(this.library, this.account) as any\n    )\n\n    try {\n      return {\n        success: true,\n        tx: await kashiPairCloneContract.cook(this.actions, this.values, this.datas, {\n          value: this.values.reduce((a, b) => a.add(b), ZERO),\n        }),\n      }\n    } catch (error) {\n      console.error('KashiCooker Error: ', error)\n      return {\n        success: false,\n        error: error,\n      }\n    }\n  }\n}\n","import { ONE_BIPS } from '../../../constants'\nimport { Percent } from '@mistswapdex/sdk'\nimport React from 'react'\nimport { warningSeverity } from '../../../functions/prices'\n\nconst SEVERITY = {\n  0: 'text-green',\n  1: 'text-high-emphesis',\n  2: 'text-yellow',\n  3: 'text-red',\n  4: 'text-red',\n}\n\nexport default function FormattedPriceImpact({ priceImpact }: { priceImpact?: Percent }) {\n  return (\n    <div className={`text-sm font-bold ${SEVERITY[warningSeverity(priceImpact)]}`}>\n      {priceImpact ? `${priceImpact.multiply(-1).toFixed(2)}%` : '-'}\n    </div>\n  )\n}\n","import { Currency, Trade, TradeType } from '@mistswapdex/sdk'\nimport React, { Fragment, memo } from 'react'\n\nimport { ChevronRightIcon } from '@heroicons/react/outline'\nimport { unwrappedToken } from '../../../functions/currency/wrappedCurrency'\n\nconst SwapRoute = memo(({ trade }: { trade: Trade<Currency, Currency, TradeType> }) => {\n  return (\n    <div className=\"flex flex-wrap items-center justify-end\">\n      {trade.route.path.map((token, i, path) => {\n        const isLastItem: boolean = i === path.length - 1\n        const currency = unwrappedToken(token)\n        return (\n          <Fragment key={i}>\n            <div className=\"flex space-x-2 flex-end\">\n              <div className=\"text-sm font-bold text-high-emphesis\">{currency.symbol}</div>\n            </div>\n            {isLastItem ? null : <ChevronRightIcon width={12} height={12} />}\n          </Fragment>\n        )\n      })}\n    </div>\n  )\n})\n\nSwapRoute.displayName = 'SwapRoute'\n\nexport default SwapRoute\n","import QuestionHelper from '../QuestionHelper'\nimport React from 'react'\nimport Settings from '../Settings'\n\nexport type Color = 'pink' | 'blue'\n\nconst COLOR = {\n  pink: 'checked:bg-pink checked:border-transparent focus:ring-pink',\n  blue: 'checked:bg-blue checked:border-transparent focus:ring-blue',\n}\n\nexport interface CheckboxProps {\n  color: Color\n  set: (value: boolean) => void\n}\n\nfunction Checkbox({\n  color,\n  set,\n  className = '',\n  ...rest\n}: CheckboxProps & React.InputHTMLAttributes<HTMLInputElement>): JSX.Element {\n  return (\n    <input\n      type=\"checkbox\"\n      onChange={(event) => set(event.target.checked)}\n      className={`appearance-none h-5 w-5 rounded-sm bg-dark-700 border-transparent disabled:bg-dark-1000 disabled:border-dark-800 ${COLOR[color]} ${className}`}\n      {...rest}\n    />\n  )\n}\n\nexport default Checkbox\n","import Checkbox from '../../components/Checkbox'\nimport QuestionHelper from '../../components/QuestionHelper'\nimport React from 'react'\nimport Settings from '../../components/Settings'\nimport useSwapSlippageTolerance from '../../hooks/useSwapSlippageTollerence'\n\nexport function ExchangeRateCheckBox({ color, pair, updateOracle, setUpdateOracle, desiredDirection }: any) {\n  const displayUpdateOracle = pair.currentExchangeRate.gt(0) ? updateOracle : true\n  const show =\n    displayUpdateOracle || desiredDirection === 'up'\n      ? pair.oracleExchangeRate.lt(pair.currentExchangeRate)\n      : pair.oracleExchangeRate.gt(pair.currentExchangeRate)\n\n  return (\n    show && (\n      <div className=\"flex items-center mb-4\">\n        <Checkbox\n          color={color}\n          checked={displayUpdateOracle}\n          disabled={pair.currentExchangeRate.isZero()}\n          set={setUpdateOracle}\n        />\n        <span className=\"ml-2 mr-1 text-primary\">Update exchange rate from the oracle</span>\n        <QuestionHelper\n          text={\n            pair.currentExchangeRate.gt(0)\n              ? 'The exchange rate from the oracle is only updated when needed. When the price in Kashi is different from the oracle, this may reduce the amount you can borrow. Updating the exchange rate from the oracle may increase your borrow limit.'\n              : 'The exchange rate has not been updated from the oracle yet in this market. If you borrow, it will be updated.'\n          }\n        />\n      </div>\n    )\n  )\n}\n\nexport function SwapCheckbox({ title, color, swap, setSwap, help, trade }: any) {\n  const allowedSlippage = useSwapSlippageTolerance(trade)\n  return (\n    <div className=\"flex items-center justify-between mb-4\">\n      <div>\n        <Checkbox color={color} checked={swap} set={setSwap} />\n        <span className=\"ml-2 mr-1 text-primary\">{title}</span>\n        <QuestionHelper text={help} />\n      </div>\n      {swap && <Settings placeholderSlippage={allowedSlippage} />}\n    </div>\n  )\n}\n\nexport default Checkbox\n","import KashiCooker, { signMasterContractApproval } from '../entities/KashiCooker'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\n\nimport { KASHI_ADDRESS } from '@mistswapdex/sdk'\nimport { setKashiApprovalPending } from '../state/application/actions'\nimport { useActiveWeb3React } from '../hooks/useActiveWeb3React'\nimport { useBentoBoxContract } from './useContract'\nimport { useBentoMasterContractAllowed } from '../state/bentobox/hooks'\nimport { useDispatch } from 'react-redux'\nimport { useKashiApprovalPending } from '../state/application/hooks'\nimport { useTransactionAdder } from '../state/transactions/hooks'\nimport { AddressZero, HashZero } from '@ethersproject/constants'\nimport { splitSignature } from '@ethersproject/bytes'\n\nexport enum BentoApprovalState {\n  UNKNOWN,\n  NOT_APPROVED,\n  PENDING,\n  FAILED,\n  APPROVED,\n}\n\nexport interface KashiPermit {\n  account: string\n  masterContract: string\n  v: number\n  r: string\n  s: string\n}\n\nexport enum BentoApproveOutcome {\n  SUCCESS,\n  REJECTED,\n  FAILED,\n  NOT_READY,\n}\n\nexport type BentoApproveResult = {\n  outcome: BentoApproveOutcome\n  permit?: KashiPermit\n}\n\n// returns a variable indicating the state of the approval and a function which approves if necessary or early returns\nfunction useKashiApproveCallback(): [\n  BentoApprovalState,\n  boolean,\n  KashiPermit | undefined,\n  () => void,\n  (pair: any, execute: (cooker: KashiCooker) => Promise<string>) => void\n] {\n  const { account, library, chainId } = useActiveWeb3React()\n  const dispatch = useDispatch()\n  const [approveKashiFallback, setApproveKashiFallback] = useState<boolean>(false)\n  const [kashiPermit, setKashiPermit] = useState<KashiPermit | undefined>(undefined)\n\n  useEffect(() => {\n    setKashiPermit(undefined)\n  }, [account, chainId])\n\n  const masterContract = chainId && KASHI_ADDRESS[chainId]\n\n  const pendingApproval = useKashiApprovalPending()\n  const currentAllowed = useBentoMasterContractAllowed(masterContract, account || AddressZero)\n  const addTransaction = useTransactionAdder()\n\n  // check the current approval status\n  const approvalState: BentoApprovalState = useMemo(() => {\n    if (!masterContract) return BentoApprovalState.UNKNOWN\n    if (!currentAllowed && pendingApproval) return BentoApprovalState.PENDING\n\n    return currentAllowed ? BentoApprovalState.APPROVED : BentoApprovalState.NOT_APPROVED\n  }, [masterContract, currentAllowed, pendingApproval])\n\n  const bentoBoxContract = useBentoBoxContract()\n\n  const approve = useCallback(async (): Promise<BentoApproveResult> => {\n    if (approvalState !== BentoApprovalState.NOT_APPROVED) {\n      console.error('approve was called unnecessarily')\n      return { outcome: BentoApproveOutcome.NOT_READY }\n    }\n    if (!masterContract) {\n      console.error('no token')\n      return { outcome: BentoApproveOutcome.NOT_READY }\n    }\n\n    if (!bentoBoxContract) {\n      console.error('no bentobox contract')\n      return { outcome: BentoApproveOutcome.NOT_READY }\n    }\n\n    if (!account) {\n      console.error('no account')\n      return { outcome: BentoApproveOutcome.NOT_READY }\n    }\n    if (!library) {\n      console.error('no library')\n      return { outcome: BentoApproveOutcome.NOT_READY }\n    }\n\n    try {\n      const signature = await signMasterContractApproval(\n        bentoBoxContract,\n        masterContract,\n        account,\n        library,\n        true,\n        chainId\n      )\n      const { v, r, s } = splitSignature(signature)\n      return {\n        outcome: BentoApproveOutcome.SUCCESS,\n        permit: { account, masterContract, v, r, s },\n      }\n    } catch (e) {\n      return {\n        outcome: e.code === 4001 ? BentoApproveOutcome.REJECTED : BentoApproveOutcome.FAILED,\n      }\n    }\n  }, [approvalState, account, library, chainId, bentoBoxContract, masterContract])\n\n  const onApprove = async function () {\n    if (!approveKashiFallback) {\n      const result = await approve()\n      if (result.outcome === BentoApproveOutcome.SUCCESS) {\n        setKashiPermit(result.permit)\n      } else if (result.outcome === BentoApproveOutcome.FAILED) {\n        setApproveKashiFallback(true)\n      }\n    } else {\n      const tx = await bentoBoxContract?.setMasterContractApproval(account, masterContract, true, 0, HashZero, HashZero)\n      dispatch(setKashiApprovalPending('Approve Kashi'))\n      await tx.wait()\n      dispatch(setKashiApprovalPending(''))\n    }\n  }\n\n  const onCook = async function (pair: any, execute: (cooker: KashiCooker) => Promise<string>) {\n    const cooker = new KashiCooker(pair, account, library, chainId)\n    let summary\n    if (approvalState === BentoApprovalState.NOT_APPROVED && kashiPermit) {\n      cooker.approve(kashiPermit)\n      summary = 'Approve Kashi and ' + (await execute(cooker))\n    } else {\n      summary = await execute(cooker)\n    }\n    const result = await cooker.cook()\n    if (result.success) {\n      addTransaction(result.tx, { summary })\n      setKashiPermit(undefined)\n      await result.tx.wait()\n    }\n  }\n\n  return [approvalState, approveKashiFallback, kashiPermit, onApprove, onCook]\n}\n\nexport default useKashiApproveCallback\n","import { ApprovalState, useApproveCallback } from '../../hooks/useApproveCallback'\nimport { BENTOBOX_ADDRESS, WNATIVE_ADDRESS } from '@mistswapdex/sdk'\nimport useKashiApproveCallback, { BentoApprovalState } from '../../hooks/useKashiApproveCallback'\n\nimport Alert from '../../components/Alert'\nimport Button from '../../components/Button'\nimport Dots from '../../components/Dots'\nimport React from 'react'\nimport { t } from '@lingui/macro'\nimport { tryParseAmount } from '../../functions/parse'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useLingui } from '@lingui/react'\n\nexport function KashiApproveButton({ content, color }: any): any {\n  const { i18n } = useLingui()\n  const [kashiApprovalState, approveKashiFallback, kashiPermit, onApprove, onCook] = useKashiApproveCallback()\n  const showApprove =\n    (kashiApprovalState === BentoApprovalState.NOT_APPROVED || kashiApprovalState === BentoApprovalState.PENDING) &&\n    !kashiPermit\n  const showChildren = kashiApprovalState === BentoApprovalState.APPROVED || kashiPermit\n\n  return (\n    <>\n      {approveKashiFallback && (\n        <Alert\n          message={i18n._(\n            t`Something went wrong during signing of the approval. This is expected for hardware wallets, such as Trezor and Ledger. Click again and the fallback method will be used`\n          )}\n          className=\"mb-4\"\n        />\n      )}\n\n      {showApprove && (\n        <Button color={color} onClick={onApprove} className=\"mb-4\">\n          {i18n._(t`Approve Kashi`)}\n        </Button>\n      )}\n\n      {showChildren && React.cloneElement(content(onCook), { color })}\n    </>\n  )\n}\n\nexport function TokenApproveButton({ children, value, token, needed, color }: any): any {\n  const { i18n } = useLingui()\n  const { chainId } = useActiveWeb3React()\n  const [approvalState, approve] = useApproveCallback(\n    tryParseAmount(value, token),\n    chainId && BENTOBOX_ADDRESS[chainId]\n  )\n\n  const showApprove =\n    chainId &&\n    token &&\n    token.address !== WNATIVE_ADDRESS[chainId] &&\n    needed &&\n    value &&\n    (approvalState === ApprovalState.NOT_APPROVED || approvalState === ApprovalState.PENDING)\n\n  return showApprove ? (\n    <Button color={color} onClick={approve} className=\"mb-4\">\n      <Dots>\n        {i18n._(t`Approve`)} {token.symbol}\n      </Dots>\n    </Button>\n  ) : (\n    React.cloneElement(children, { color })\n  )\n}\n","export class Warning {\n  active = false\n  message = ''\n  breaking = false\n  or: Warning | undefined = undefined\n\n  constructor(active: boolean, message: string, breaking = false, or?: Warning) {\n    this.active = active\n    this.message = message\n    this.breaking = breaking\n    this.or = or\n  }\n}\n\nexport class Warnings extends Array<Warning> {\n  private _add(warning: Warning) {\n    if (warning.active) {\n      this.push(warning)\n    } else {\n      if (warning.or) {\n        this._add(warning.or)\n      }\n    }\n  }\n\n  add(active: boolean, message: string, breaking = false, or?: Warning) {\n    this._add(new Warning(active, message, breaking, or))\n    return this\n  }\n\n  addWarning(active: boolean, message: string, or?: Warning) {\n    this._add(new Warning(active, message, false, or))\n    return this\n  }\n\n  addError(active: boolean, message: string, or?: Warning) {\n    this._add(new Warning(active, message, true, or))\n    return this\n  }\n\n  get broken(): boolean {\n    return this.some((warning) => warning.breaking)\n  }\n}\n","import { ArrowDownRight, ArrowUpRight } from 'react-feather'\n\nimport { BigNumber } from '@ethersproject/bignumber'\nimport Button from '../../components/Button'\nimport Input from '../../components/Input'\nimport React from 'react'\nimport { formatNumber } from '../../functions/format'\n\ntype SmartNumberInputProps = {\n  color: 'blue' | 'pink'\n  token: any\n  value: string\n  setValue: any\n\n  useBentoTitleDirection: 'up' | 'down'\n  useBentoTitle: string\n  useBento: boolean\n  setUseBento: any\n\n  maxTitle?: string\n  max: BigNumber\n  pinMax?: boolean\n  setPinMax?: any\n  showMax?: boolean\n  disabled?: boolean\n  switchDisabled?: boolean\n}\n\nexport default function SmartNumberInput({\n  color = 'blue',\n  token,\n  value,\n  setValue,\n\n  useBentoTitleDirection = 'down',\n  useBentoTitle = '',\n  useBento,\n  setUseBento,\n\n  maxTitle = 'Max',\n  max,\n  pinMax = false,\n  setPinMax,\n  showMax = false,\n  disabled = false,\n  switchDisabled = false,\n}: SmartNumberInputProps) {\n  return (\n    <>\n      <div className=\"flex items-center justify-between my-4\">\n        <div className=\"flex items-center text-base text-secondary\">\n          <span>\n            {useBentoTitleDirection == 'down' ? (\n              <ArrowDownRight size=\"1rem\" style={{ display: 'inline' }} />\n            ) : (\n              <ArrowUpRight size=\"1rem\" style={{ display: 'inline' }} />\n            )}\n          </span>\n          <span className=\"mx-2\">{useBentoTitle}</span>\n          <span>\n            <Button\n              variant=\"outlined\"\n              size=\"xs\"\n              color={color}\n              className={'disabled:cursor-not-allowed focus:ring focus:ring-' + color}\n              onClick={() => {\n                setUseBento(!useBento)\n              }}\n              disabled={switchDisabled}\n            >\n              {useBento ? 'BentoBox' : 'Wallet'}\n            </Button>\n          </span>\n        </div>\n        <div className=\"text-base text-right text-secondary\" style={{ display: 'inline', cursor: 'pointer' }}>\n          {maxTitle} {formatNumber(max.toFixed(token.tokenInfo.decimals))}\n        </div>\n      </div>\n\n      <div className=\"relative flex items-center w-full mb-4\">\n        <Input.Numeric\n          className={\n            'w-full p-3 bg-dark-700 rounded disabled:cursor-not-allowed disabled:bg-dark-1000 disabled:ring disabled:ring-dark-800 focus:ring focus:ring-' +\n            color\n          }\n          value={value}\n          onUserInput={setValue}\n          onFocus={() => {\n            if (pinMax) {\n              setValue('')\n            }\n            if (setPinMax) {\n              setPinMax(false)\n            }\n          }}\n          disabled={disabled}\n        />\n        {showMax && max.gt(0) && (\n          <Button\n            variant=\"outlined\"\n            size=\"xs\"\n            color={color}\n            onClick={() => {\n              if (setPinMax) {\n                setPinMax(true)\n              } else {\n                setValue(max.toFixed(token.tokenInfo.decimals))\n              }\n            }}\n            className={'absolute right-4 focus:ring focus:ring-' + color}\n          >\n            MAX\n          </Button>\n        )}\n      </div>\n    </>\n  )\n}\n","import { Currency, TradeType, Trade as V2Trade } from '@mistswapdex/sdk'\nimport React, { useMemo } from 'react'\n\nimport FormattedPriceImpact from '../exchange-v1/swap/FormattedPriceImpact'\nimport QuestionHelper from '../../components/QuestionHelper'\nimport SwapRoute from '../exchange-v1/swap/SwapRoute'\nimport { computeRealizedLPFeePercent } from '../../functions/prices'\nimport { t } from '@lingui/macro'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useLingui } from '@lingui/react'\n\nfunction TradeReview({\n  trade,\n  allowedSlippage,\n}: {\n  trade: V2Trade<Currency, Currency, TradeType> | undefined\n  allowedSlippage: any\n}) {\n  const { i18n } = useLingui()\n\n  const showRoute = Boolean(trade && trade.route.path.length > 2)\n\n  const { realizedLPFee, priceImpact } = useMemo(() => {\n    if (!trade) return { realizedLPFee: undefined, priceImpact: undefined }\n\n    const realizedLpFeePercent = computeRealizedLPFeePercent(trade)\n    const realizedLPFee = trade.inputAmount.multiply(realizedLpFeePercent)\n    const priceImpact = trade.priceImpact.subtract(realizedLpFeePercent)\n    return { priceImpact, realizedLPFee }\n  }, [trade])\n\n  return (\n    <>\n      <div className=\"text-xl text-high-emphesis\">Swap Review</div>\n      {trade ? (\n        <div className=\"py-4 mb-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-lg text-secondary\">\n              {i18n._(t`Minimum received`)}\n              <QuestionHelper\n                text={i18n._(\n                  t`Your transaction will revert if there is a large, unfavorable price movement before it is confirmed.`\n                )}\n              />\n            </div>\n            <div className=\"text-lg\">\n              {`${trade.minimumAmountOut(allowedSlippage)?.toSignificant(4)} ${trade.outputAmount.currency.symbol}` ??\n                '-'}\n            </div>\n          </div>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-lg text-secondary\">\n              {i18n._(t`Price Impact`)}\n              <QuestionHelper\n                text={i18n._(t`The difference between the market price and estimated price due to trade size.`)}\n              />\n            </div>\n            <div className=\"text-lg\">\n              <FormattedPriceImpact priceImpact={priceImpact} />\n            </div>\n          </div>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-lg text-secondary\">\n              Liquidity Provider Fee\n              <QuestionHelper\n                text={i18n._(t`A portion of each trade (0.25%) goes to liquidity providers as a protocol incentive.`)}\n              />\n            </div>\n            <div className=\"text-lg\">\n              {realizedLPFee ? `${realizedLPFee.toSignificant(4)} ${trade.inputAmount.currency.symbol}` : '-'}\n            </div>\n          </div>\n          {showRoute && (\n            <div className=\"flex items-center justify-between\">\n              <div className=\"text-lg text-secondary\">\n                {i18n._(t`Route`)}\n                <QuestionHelper\n                  text={i18n._(t`Routing through these tokens resulted in the best price for your trade.`)}\n                />\n              </div>\n              <div className=\"text-lg\">\n                <SwapRoute trade={trade} />\n              </div>\n            </div>\n          )}\n        </div>\n      ) : (\n        <div className=\"mb-4 text-lg text-secondary\">{i18n._(t`No liquidity found to do swap`)}</div>\n      )}\n    </>\n  )\n}\n\nexport default TradeReview\n","import { formatNumber, formatPercent } from '../functions/format'\n\nimport { BigNumber } from '@ethersproject/bignumber'\nimport { getUSDString } from '../functions/kashi'\n\nexport enum Direction {\n  DOWN = -1,\n  FLAT = 0,\n  UP = 1,\n}\n\ninterface Line {\n  name: string\n  from: string\n  to: string\n  direction: Direction\n}\n\nexport class TransactionReview extends Array<Line> {\n  public add(name: string, from: string, to: string, direction: Direction): this {\n    this.push({\n      name: name,\n      from: from,\n      to: to,\n      direction: direction,\n    })\n    return this\n  }\n\n  public addTokenAmount(name: string, from: BigNumber, to: BigNumber, token: any): this {\n    this.add(\n      name,\n      formatNumber(from.toFixed(token.tokenInfo.decimals)) + ' ' + token.tokenInfo.symbol,\n      formatNumber(to.toFixed(token.tokenInfo.decimals)) + ' ' + token.tokenInfo.symbol,\n      from.eq(to) ? Direction.FLAT : from.lt(to) ? Direction.UP : Direction.DOWN\n    )\n    return this\n  }\n\n  public addUSD(name: string, from: BigNumber, to: BigNumber, token: any): this {\n    this.add(\n      name,\n      formatNumber(getUSDString(from, token), true),\n      formatNumber(getUSDString(to, token), true),\n      from.eq(to) ? Direction.FLAT : from.lt(to) ? Direction.UP : Direction.DOWN\n    )\n    return this\n  }\n\n  public addPercentage(name: string, from: BigNumber, to: BigNumber): this {\n    this.add(\n      name,\n      formatPercent(from.toFixed(16)),\n      formatPercent(to.toFixed(16)),\n      from.eq(to) ? Direction.FLAT : from.lt(to) ? Direction.UP : Direction.DOWN\n    )\n    return this\n  }\n\n  public addRate(name: string, from: BigNumber, to: BigNumber, pair: any): this {\n    this.add(\n      name,\n      formatNumber(from.toFixed(18 + pair.collateral.tokenInfo.decimals - pair.asset.tokenInfo.decimals)),\n      formatNumber(to.toFixed(18 + pair.collateral.tokenInfo.decimals - pair.asset.tokenInfo.decimals)),\n      from.eq(to) ? Direction.FLAT : from.lt(to) ? Direction.UP : Direction.DOWN\n    )\n    return this\n  }\n}\n","import { ArrowDownRight, ArrowRight, ArrowUpRight } from 'react-feather'\nimport { Direction, TransactionReview } from '../../entities/TransactionReview'\n\nimport React from 'react'\n\nfunction TransactionReviewView({ transactionReview }: { transactionReview: TransactionReview }) {\n  return (\n    <>\n      {transactionReview && transactionReview.length > 0 && (\n        <div className=\"py-4 mb-4\">\n          <div className=\"text-xl text-high-emphesis\">Transaction Review</div>\n          {transactionReview.map((line, i) => {\n            return (\n              <div className=\"flex items-center justify-between\" key={i}>\n                <div className=\"text-lg text-secondary\">{line.name}:</div>\n                <div className=\"text-lg\">\n                  {line.from}\n                  {line.direction === Direction.FLAT ? (\n                    <ArrowRight\n                      size=\"1rem\"\n                      style={{\n                        display: 'inline',\n                        marginRight: '6px',\n                        marginLeft: '6px',\n                      }}\n                    />\n                  ) : line.direction === Direction.UP ? (\n                    <ArrowUpRight\n                      size=\"1rem\"\n                      style={{\n                        display: 'inline',\n                        marginRight: '6px',\n                        marginLeft: '6px',\n                      }}\n                    />\n                  ) : (\n                    <ArrowDownRight\n                      size=\"1rem\"\n                      style={{\n                        display: 'inline',\n                        marginRight: '6px',\n                        marginLeft: '6px',\n                      }}\n                    />\n                  )}\n                  {line.to}\n                </div>\n              </div>\n            )\n          })}\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default TransactionReviewView\n","import Alert from '../../components/Alert'\nimport React from 'react'\nimport { Warnings } from '../../entities/Warnings'\n\nfunction WarningsList({ warnings }: { warnings: Warnings }) {\n  return (\n    <>\n      {warnings.map((warning, i) => (\n        <Alert key={i} type={warning.breaking ? 'error' : 'warning'} message={warning.message} className=\"mb-4\" />\n      ))}\n    </>\n  )\n}\n\nexport default WarningsList\n","import { ExchangeRateCheckBox, SwapCheckbox } from './Checkbox'\nimport { KashiApproveButton, TokenApproveButton } from './Button'\nimport { Percent, /*SUSHISWAP_MULTISWAPPER_ADDRESS,*/ WNATIVE } from '@mistswapdex/sdk'\nimport React, { useMemo, useState } from 'react'\nimport { Warning, Warnings } from '../../entities/Warnings'\nimport { ZERO, e10, maximum, minimum } from '../../functions/math'\nimport { computeRealizedLPFeePercent, warningSeverity } from '../../functions/prices'\nimport { hexConcat, hexlify } from '@ethersproject/bytes'\nimport { useExpertModeManager, useUserSlippageToleranceWithDefault } from '../../state/user/hooks'\n\nimport { AddressZero } from '@ethersproject/constants'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport Button from '../../components/Button'\nimport { Field } from '../../state/swap/actions'\nimport KashiCooker from '../../entities/KashiCooker'\nimport SmartNumberInput from './SmartNumberInput'\nimport TradeReview from './TradeReview'\nimport { TransactionReview } from '../../entities/TransactionReview'\nimport TransactionReviewView from './TransactionReview'\nimport WarningsView from './WarningsList'\nimport { defaultAbiCoder } from '@ethersproject/abi'\nimport { toShare } from '../../functions/bentobox'\nimport { tryParseAmount } from '../../functions/parse'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useCurrency } from '../../hooks/Tokens'\nimport { useKashiInfo } from './context'\nimport { useV2TradeExactIn } from '../../hooks/useV2Trades'\n\ninterface BorrowProps {\n  pair: any\n}\n\nconst DEFAULT_BORROW_SLIPPAGE_TOLERANCE = new Percent(50, 10_000)\n\nexport default function Borrow({ pair }: BorrowProps) {\n  const { account, chainId } = useActiveWeb3React()\n  const info = useKashiInfo()\n\n  // State\n  const [useBentoCollateral, setUseBentoCollateral] = useState<boolean>(pair.collateral.bentoBalance.gt(0))\n  const [useBentoBorrow, setUseBentoBorrow] = useState<boolean>(true)\n  const [collateralValue, setCollateralValue] = useState('')\n  const [borrowValue, setBorrowValue] = useState('')\n  const [swapBorrowValue, setSwapBorrowValue] = useState('')\n  const [updateOracle, setUpdateOracle] = useState(false)\n  const [swap, setSwap] = useState(false)\n\n  const assetToken = useCurrency(pair.asset.address) || undefined\n  const collateralToken = useCurrency(pair.collateral.address) || undefined\n\n  // Calculated\n  const assetNative = WNATIVE[chainId || 1].address === pair.collateral.address\n\n  const collateralBalance = useBentoCollateral\n    ? pair.collateral.bentoBalance\n    : assetNative\n    ? info?.ethBalance\n    : pair.collateral.balance\n\n  const displayUpdateOracle = pair.currentExchangeRate.gt(0) ? updateOracle : true\n\n  // Swap\n  // const [allowedSlippage] = useUserSlippageTolerance(); // 10 = 0.1%\n\n  const allowedSlippage = useUserSlippageToleranceWithDefault(DEFAULT_BORROW_SLIPPAGE_TOLERANCE) // custom from users\n\n  const parsedAmount = tryParseAmount(borrowValue, assetToken)\n\n  const foundTrade = useV2TradeExactIn(parsedAmount, collateralToken)\n\n  const { realizedLPFee, priceImpact } = useMemo(() => {\n    if (!foundTrade) return { realizedLPFee: undefined, priceImpact: undefined }\n\n    const realizedLpFeePercent = computeRealizedLPFeePercent(foundTrade)\n    const realizedLPFee = foundTrade.inputAmount.multiply(realizedLpFeePercent)\n    const priceImpact = foundTrade.priceImpact.subtract(realizedLpFeePercent)\n    return { priceImpact, realizedLPFee }\n  }, [foundTrade])\n\n  const extraCollateral =\n    swap && foundTrade ? BigNumber.from(foundTrade.minimumAmountOut(allowedSlippage).quotient.toString()) : ZERO\n\n  // const extraCollateral = swap\n  //   ? computeSlippageAdjustedAmounts(foundTrade, allowedSlippage)\n  //       [Field.OUTPUT]?.toFixed(pair.collateral.tokenInfo.decimals)\n  //       .toBigNumber(pair.collateral.tokenInfo.decimals) || ZERO\n  //   : ZERO;\n\n  const swapCollateral = collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals)\n\n  const nextUserCollateralValue = pair.userCollateralAmount.value\n    .add(collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals))\n    .add(extraCollateral)\n\n  // Calculate max borrow\n  const nextMaxBorrowableOracle = nextUserCollateralValue.mulDiv(e10(16).mul('75'), pair.oracleExchangeRate)\n\n  const nextMaxBorrowableSpot = nextUserCollateralValue.mulDiv(e10(16).mul('75'), pair.spotExchangeRate)\n\n  const nextMaxBorrowableStored = nextUserCollateralValue.mulDiv(\n    e10(16).mul('75'),\n    displayUpdateOracle ? pair.oracleExchangeRate : pair.currentExchangeRate\n  )\n\n  const nextMaxBorrowMinimum = minimum(nextMaxBorrowableOracle, nextMaxBorrowableSpot, nextMaxBorrowableStored)\n\n  const nextMaxBorrowSafe = nextMaxBorrowMinimum.mulDiv('95', '100').sub(pair.currentUserBorrowAmount.value)\n\n  const nextMaxBorrowPossible = maximum(minimum(nextMaxBorrowSafe, pair.maxAssetAvailable), ZERO)\n\n  const maxBorrow = nextMaxBorrowPossible.toFixed(pair.asset.tokenInfo.decimals)\n\n  const nextBorrowValue = pair.currentUserBorrowAmount.value.add(borrowValue.toBigNumber(pair.asset.tokenInfo.decimals))\n  const nextHealth = nextBorrowValue.mulDiv('1000000000000000000', nextMaxBorrowMinimum)\n\n  const collateralValueSet = !collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals).isZero()\n\n  const borrowValueSet = !borrowValue.toBigNumber(pair.asset.tokenInfo.decimals).isZero()\n\n  const trade = swap && borrowValueSet ? foundTrade : undefined\n\n  const [isExpertMode] = useExpertModeManager()\n\n  // const { priceImpactWithoutFee } = computeTradePriceBreakdown(trade);\n\n  const priceImpactSeverity = warningSeverity(priceImpact)\n\n  const borrowAmount = borrowValue.toBigNumber(pair.asset.tokenInfo.decimals)\n\n  const collateralWarnings = new Warnings()\n\n  collateralWarnings.add(\n    collateralBalance?.lt(collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals)),\n    `Please make sure your ${\n      useBentoCollateral ? 'BentoBox' : 'wallet'\n    } balance is sufficient to deposit and then try again.`,\n    true\n  )\n\n  const borrowWarnings = new Warnings()\n    .add(\n      nextMaxBorrowMinimum.lt(pair.currentUserBorrowAmount.value),\n      'You have surpassed your borrow limit and may be liquidated at any moment. Repay now or add collateral!',\n      true,\n      new Warning(\n        nextMaxBorrowSafe.lt(0),\n        'You have surpassed your borrow limit and assets are at a high risk of liquidation.',\n        true,\n        new Warning(\n          borrowValue.length > 0 && borrowAmount.gt(nextMaxBorrowMinimum.sub(pair.currentUserBorrowAmount.value)),\n          \"You don't have enough collateral to borrow this amount.\",\n          true,\n          new Warning(\n            borrowValue.length > 0 && borrowAmount.gt(nextMaxBorrowSafe),\n            'You will surpass your borrow limit and assets will be at a high risk of liquidation.',\n            false\n          )\n        )\n      )\n    )\n    .add(\n      borrowValue.length > 0 && pair.maxAssetAvailable.lt(borrowValue.toBigNumber(pair.asset.tokenInfo.decimals)),\n      'Not enough liquidity in this pair.',\n      true\n    )\n\n  // console.log('Oracle Discrepancy', {\n  //     name: pair.asset.tokenInfo.symbol + '-' + pair.collateral.tokenInfo.symbol,\n  //     borrowValueSet: borrowValueSet,\n  //     displayUpdateOracle: displayUpdateOracle,\n  //     currentExchangeRate: pair.currentExchangeRate.toFixed(\n  //         pair.asset.tokenInfo.decimals\n  //     ),\n  //     oracleExchangeRate: pair.oracleExchangeRate.toFixed(\n  //         pair.asset.tokenInfo.decimals\n  //     ),\n  //     diff:\n  //         pair.currentExchangeRate.toFixed(pair.asset.tokenInfo.decimals) /\n  //         pair.oracleExchangeRate.toFixed(pair.asset.tokenInfo.decimals),\n  // })\n\n  const transactionReview = new TransactionReview()\n  if ((collateralValue || borrowValue) && !collateralWarnings.broken && (!borrowWarnings.broken || !borrowValue)) {\n    if (collateralValueSet) {\n      transactionReview.addTokenAmount(\n        'Collateral',\n        pair.userCollateralAmount.value,\n        nextUserCollateralValue,\n        pair.collateral\n      )\n      transactionReview.addUSD(\n        'Collateral USD',\n        pair.userCollateralAmount.value,\n        nextUserCollateralValue,\n        pair.collateral\n      )\n    }\n    if (borrowValueSet) {\n      transactionReview.addTokenAmount('Borrowed', pair.currentUserBorrowAmount.value, nextBorrowValue, pair.asset)\n      transactionReview.addUSD('Borrowed USD', pair.currentUserBorrowAmount.value, nextBorrowValue, pair.asset)\n    }\n    if (displayUpdateOracle) {\n      transactionReview.addRate('Exchange Rate', pair.currentExchangeRate, pair.oracleExchangeRate, pair)\n    }\n    transactionReview.addTokenAmount(\n      'Borrow Limit',\n      pair.maxBorrowable.safe.value,\n      nextMaxBorrowSafe.sub(borrowValue.toBigNumber(pair.asset.tokenInfo.decimals)),\n      pair.asset\n    )\n    transactionReview.addPercentage('Limit Used', pair.health.value, nextHealth)\n    transactionReview.addPercentage('Borrow APR', pair.interestPerYear.value, pair.currentInterestPerYear.value)\n  }\n\n  let actionName = 'Nothing to do'\n\n  if (collateralValueSet) {\n    if (borrowValueSet) {\n      actionName = trade ? 'Borrow, swap and add collateral' : 'Add collateral and borrow'\n    } else {\n      actionName = 'Add collateral'\n    }\n  } else if (borrowValueSet) {\n    actionName = trade ? 'Borrow, swap and add as collateral' : 'Borrow'\n  }\n\n  if (swap && priceImpactSeverity > 3 && !isExpertMode) {\n    actionName = 'Price Impact High'\n  } else if (swap && priceImpactSeverity > 2) {\n    actionName = actionName + ' anyway'\n  }\n\n  const actionDisabled =\n    (collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals).lte(0) &&\n      borrowValue.toBigNumber(pair.asset.tokenInfo.decimals).lte(0)) ||\n    collateralWarnings.broken ||\n    (borrowValue.length > 0 && borrowWarnings.broken) ||\n    (swap && priceImpactSeverity > 3 && !isExpertMode) ||\n    (pair.userCollateralAmount.value.isZero() && !collateralValueSet)\n\n  // Handlers\n  async function onExecute(cooker: KashiCooker): Promise<string> {\n    let summary = ''\n\n    /*\n    if (borrowValueSet) {\n      if (displayUpdateOracle) {\n        cooker.updateExchangeRate(true, ZERO, ZERO)\n      }\n\n      if (swap && !useBentoCollateral) {\n        cooker.bentoDepositCollateral(collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals))\n      }\n\n      cooker.borrow(\n        borrowValue.toBigNumber(pair.asset.tokenInfo.decimals),\n        swap || useBentoBorrow,\n        swap ? SUSHISWAP_MULTISWAPPER_ADDRESS[chainId || 1] : ''\n      )\n    }\n    if (borrowValueSet && trade) {\n      const path = trade.route.path.map((token) => token.address) || []\n      if (path.length > 4) {\n        throw 'Path too long'\n      }\n\n      console.log('debug', [\n        pair.asset.address,\n        pair.collateral.address,\n        extraCollateral,\n        path.length > 2 ? path[1] : AddressZero,\n        path.length > 3 ? path[2] : AddressZero,\n        account,\n        toShare(pair.collateral, collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals)),\n        borrowValue.toBigNumber(pair.asset.tokenInfo.decimals),\n      ])\n\n      const data = defaultAbiCoder.encode(\n        ['address', 'address', 'uint256', 'address', 'address', 'address', 'uint256'],\n        [\n          pair.asset.address,\n          pair.collateral.address,\n          extraCollateral,\n          path.length > 2 ? path[1] : AddressZero,\n          path.length > 3 ? path[2] : AddressZero,\n          account,\n          toShare(pair.collateral, collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals)),\n        ]\n      )\n\n      cooker.action(\n        SUSHISWAP_MULTISWAPPER_ADDRESS[chainId || 1],\n        ZERO,\n        hexConcat([hexlify('0x3087d742'), data]),\n        false,\n        true,\n        1\n      )\n    }\n    if (collateralValueSet) {\n      cooker.addCollateral(\n        swap ? BigNumber.from(-1) : collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals),\n        useBentoCollateral || swap\n      )\n    }\n\n    if (collateralValueSet) {\n      if (borrowValueSet) {\n        summary = trade ? 'Borrow, swap and add collateral' : 'Add collateral and borrow'\n      } else {\n        summary = 'Add collateral'\n      }\n    } else if (borrowValueSet) {\n      summary = trade ? 'Borrow, swap and add as collateral' : 'Borrow'\n    }\n    */\n\n    return summary\n  }\n\n  function onMultiply(multiplier: string) {\n    const multipliedCollateral = swapCollateral.add(\n      swapCollateral.mulDiv(\n        multiplier.toBigNumber(pair.collateral.tokenInfo.decimals),\n        '1'.toBigNumber(pair.collateral.tokenInfo.decimals)\n      )\n    )\n\n    const multipliedBorrow = multipliedCollateral.mulDiv(e10(16).mul('75'), pair.currentExchangeRate)\n\n    // console.log({\n    //     original: swapCollateral.toFixed(pair.collateral.tokenInfo.decimals),\n    //     multiplied: swapCollateral\n    //         .add(\n    //             swapCollateral.mulDiv(\n    //                 multiplier.toBigNumber(pair.collateral.tokenInfo.decimals),\n    //                 '1'.toBigNumber(pair.collateral.tokenInfo.decimals)\n    //             )\n    //         )\n    //         .toFixed(pair.collateral.tokenInfo.decimals),\n    //     borrow: multipliedBorrow.toFixed(pair.asset.tokenInfo.decimals),\n    // })\n\n    // console.log('multipliedBorrow:', multipliedBorrow)\n\n    setBorrowValue(multipliedBorrow.toFixed(pair.asset.tokenInfo.decimals))\n  }\n\n  return (\n    <>\n      <div className=\"mt-6 mb-4 text-3xl text-high-emphesis\">Borrow {pair.asset.tokenInfo.symbol}</div>\n\n      <SmartNumberInput\n        color=\"pink\"\n        token={pair.collateral}\n        value={collateralValue}\n        setValue={setCollateralValue}\n        useBentoTitleDirection=\"down\"\n        useBentoTitle={`Add ${pair.collateral.tokenInfo.symbol} collateral from`}\n        useBento={useBentoCollateral}\n        setUseBento={setUseBentoCollateral}\n        maxTitle=\"Balance\"\n        max={collateralBalance}\n        showMax={true}\n      />\n\n      <SmartNumberInput\n        color=\"pink\"\n        token={pair.asset}\n        value={borrowValue}\n        setValue={setBorrowValue}\n        useBentoTitleDirection=\"up\"\n        useBentoTitle={`Borrow ${pair.asset.tokenInfo.symbol} to`}\n        useBento={useBentoBorrow}\n        setUseBento={setUseBentoBorrow}\n        maxTitle=\"Max\"\n        max={nextMaxBorrowPossible}\n      />\n\n      {collateralValueSet && (\n        <SwapCheckbox\n          trade={trade}\n          color=\"pink\"\n          swap={swap}\n          setSwap={setSwap}\n          title={`Swap borrowed ${pair.asset.tokenInfo.symbol} for ${pair.collateral.tokenInfo.symbol} collateral`}\n          help=\"Swapping your borrowed tokens for collateral allows for opening long/short positions with leverage in a single transaction.\"\n        />\n      )}\n\n      {borrowValueSet && (\n        <ExchangeRateCheckBox\n          color=\"pink\"\n          pair={pair}\n          updateOracle={updateOracle}\n          setUpdateOracle={setUpdateOracle}\n          desiredDirection=\"up\"\n        />\n      )}\n\n      {collateralValueSet && (\n        <>\n          <div className=\"mb-4\">\n            {['0.25', '0.5', '0.75', '1', '1.25', '1.5', '1.75', '2.0'].map((multipler, i) => (\n              <Button\n                variant=\"outlined\"\n                size=\"xs\"\n                color=\"pink\"\n                key={i}\n                onClick={() => {\n                  onMultiply(multipler)\n                  setSwap(true)\n                }}\n                className=\"mr-4 text-md focus:ring-pink\"\n              >\n                {multipler}x\n              </Button>\n            ))}\n\n            {/* <div className=\"mb-4\">\n                                <input\n                                    type=\"range\"\n                                    onChange={e => {\n                                        onMultiply(e.target.value)\n                                    }}\n                                    min=\"0\"\n                                    max=\"2\"\n                                    step=\"0.01\"\n                                    className=\"w-full slider\"\n                                />\n                                <div className=\"flex justify-between w-full px-2 text-center\">\n                                    <div className=\"font-semibold\">1x</div>\n                                    <div className=\"font-semibold\">2x</div>\n                                    <div className=\"font-semibold\">3x</div>\n                                </div>\n                            </div> */}\n          </div>\n        </>\n      )}\n\n      <WarningsView warnings={collateralWarnings}></WarningsView>\n\n      <WarningsView warnings={borrowWarnings}></WarningsView>\n\n      {swap && trade && <TradeReview trade={trade} allowedSlippage={allowedSlippage} />}\n\n      {(collateralValueSet ||\n        (borrowValueSet && !pair.userCollateralAmount.value.isZero()) ||\n        (swap && (priceImpactSeverity < 3 || isExpertMode))) && (\n        <TransactionReviewView transactionReview={transactionReview} />\n      )}\n\n      <KashiApproveButton\n        color=\"pink\"\n        content={(onCook: any) => (\n          <TokenApproveButton value={collateralValue} token={collateralToken} needed={!useBentoCollateral}>\n            <Button onClick={() => onCook(pair, onExecute)} disabled={actionDisabled}>\n              {actionName}\n            </Button>\n          </TokenApproveButton>\n        )}\n      />\n    </>\n  )\n}\n","import { ExchangeRateCheckBox, SwapCheckbox } from './Checkbox'\nimport { KashiApproveButton, TokenApproveButton } from './Button'\nimport {\n  Percent,\n  /*\n  SUSHISWAP_MULTISWAPPER_ADDRESS,\n  SUSHISWAP_MULTI_EXACT_SWAPPER_ADDRESS,\n  */\n  WNATIVE,\n} from '@mistswapdex/sdk'\nimport React, { useContext, useMemo, useState } from 'react'\nimport { Warning, Warnings } from '../../entities/Warnings'\nimport { ZERO, e10, maximum, minimum } from '../../functions/math'\nimport { computeRealizedLPFeePercent, warningSeverity } from '../../functions/prices'\nimport { hexConcat, hexlify } from '@ethersproject/bytes'\nimport { toAmount, toShare } from '../../functions/bentobox'\nimport {\n  useExpertModeManager,\n  useUserSlippageTolerance,\n  useUserSlippageToleranceWithDefault,\n} from '../../state/user/hooks'\nimport { useV2TradeExactIn, useV2TradeExactOut } from '../../hooks/useV2Trades'\n\nimport { AddressZero } from '@ethersproject/constants'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport Button from '../../components/Button'\nimport { Field } from '../../state/swap/actions'\nimport { KashiCooker } from '../../entities'\nimport SmartNumberInput from './SmartNumberInput'\nimport TradeReview from './TradeReview'\nimport { TransactionReview } from '../../entities/TransactionReview'\nimport TransactionReviewView from './TransactionReview'\nimport WarningsView from './WarningsList'\nimport { defaultAbiCoder } from '@ethersproject/abi'\nimport { tryParseAmount } from '../../functions/parse'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useCurrency } from '../../hooks/Tokens'\nimport { useKashiInfo } from './context'\n\ninterface RepayProps {\n  pair: any\n}\n\nconst DEFAULT_KASHI_REPAY_SLIPPAGE_TOLERANCE = new Percent(5, 100)\n\nexport default function Repay({ pair }: RepayProps) {\n  const { account, chainId } = useActiveWeb3React()\n  const info = useKashiInfo()\n\n  // State\n  const [useBentoRepay, setUseBentoRepay] = useState<boolean>(pair.asset.bentoBalance.gt(0))\n  const [useBentoRemove, setUseBentoRemoveCollateral] = useState<boolean>(true)\n\n  const [repayValue, setRepayAssetValue] = useState('')\n  const [removeValue, setRemoveCollateralValue] = useState('')\n  const [pinRemoveMax, setPinRemoveMax] = useState(false)\n  const [pinRepayMax, setPinRepayMax] = useState(false)\n  const [updateOracle, setUpdateOracle] = useState(false)\n  const [swap, setSwap] = useState(false)\n\n  const assetToken = useCurrency(pair.asset.address) || undefined\n  const collateralToken = useCurrency(pair.collateral.address) || undefined\n\n  // Calculated\n  const assetNative = WNATIVE[chainId || 1].address === pair.asset.address\n\n  const balance = useBentoRepay\n    ? toAmount(pair.asset, pair.asset.bentoBalance)\n    : assetNative\n    ? info?.ethBalance\n    : pair.asset.balance\n\n  const displayUpdateOracle = pair.currentExchangeRate.gt(0) ? updateOracle : true\n\n  const displayRepayValue = pinRepayMax\n    ? minimum(pair.currentUserBorrowAmount.value, balance).toFixed(pair.asset.tokenInfo.decimals)\n    : repayValue\n\n  const nextUserBorrowAmount = pair.currentUserBorrowAmount.value.sub(\n    displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals)\n  )\n\n  const nextMinCollateralOracle = nextUserBorrowAmount.mulDiv(pair.oracleExchangeRate, e10(16).mul('75'))\n  const nextMinCollateralSpot = nextUserBorrowAmount.mulDiv(pair.spotExchangeRate, e10(16).mul('75'))\n  const nextMinCollateralStored = nextUserBorrowAmount.mulDiv(\n    displayUpdateOracle ? pair.oracleExchangeRate : pair.currentExchangeRate,\n    e10(16).mul('75')\n  )\n  const nextMinCollateralMinimum = maximum(nextMinCollateralOracle, nextMinCollateralSpot, nextMinCollateralStored)\n  const nextMaxRemoveCollateral = maximum(\n    pair.userCollateralAmount.value.sub(nextMinCollateralMinimum.mul(100).div(95)),\n    ZERO\n  )\n  const maxRemoveCollateral = nextMaxRemoveCollateral.toFixed(pair.collateral.tokenInfo.decimals)\n\n  const displayRemoveValue = pinRemoveMax ? maxRemoveCollateral : removeValue\n\n  // Swap\n  // const [allowedSlippage] = useUserSlippageTolerance(); // 10 = 0.1%\n  const allowedSlippage = useUserSlippageToleranceWithDefault(DEFAULT_KASHI_REPAY_SLIPPAGE_TOLERANCE)\n\n  const parsedAmount = tryParseAmount(pair.currentUserBorrowAmount.string, assetToken)\n\n  const trade = useV2TradeExactOut(collateralToken, parsedAmount) || undefined\n\n  const { realizedLPFee, priceImpact } = useMemo(() => {\n    if (!trade) return { realizedLPFee: undefined, priceImpact: undefined }\n\n    const realizedLpFeePercent = computeRealizedLPFeePercent(trade)\n    const realizedLPFee = trade.inputAmount.multiply(realizedLpFeePercent)\n    const priceImpact = trade.priceImpact.subtract(realizedLpFeePercent)\n    return { priceImpact, realizedLPFee }\n  }, [trade])\n\n  // const maxAmountIn = swap\n  //   ? computeSlippageAdjustedAmounts(foundTrade, allowedSlippage)\n  //       [Field.INPUT]?.toFixed(pair.collateral.tokenInfo.decimals)\n  //       .toBigNumber(pair.collateral.tokenInfo.decimals) || ZERO\n  //   : ZERO;\n\n  const maxAmountIn =\n    swap && trade\n      ? trade\n          .maximumAmountIn(allowedSlippage)\n          .toFixed(pair.collateral.tokenInfo.decimals)\n          .toBigNumber(pair.collateral.tokenInfo.decimals)\n      : ZERO\n\n  // const nextUserCollateralValue = pair.userCollateralAmount.value.add(collateralValue.toBigNumber(pair.collateral.tokenInfo.decimals)).add(extraCollateral)\n\n  const nextUserCollateralAmount = pair.userCollateralAmount.value.sub(\n    displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals)\n  )\n\n  const nextMaxBorrowableOracle = nextUserCollateralAmount.mulDiv(e10(16).mul('75'), pair.oracleExchangeRate)\n  const nextMaxBorrowableSpot = nextUserCollateralAmount.mulDiv(e10(16).mul('75'), pair.spotExchangeRate)\n  const nextMaxBorrowableStored = nextUserCollateralAmount.mulDiv(\n    e10(16).mul('75'),\n    displayUpdateOracle ? pair.oracleExchangeRate : pair.currentExchangeRate\n  )\n  const nextMaxBorrowMinimum = minimum(nextMaxBorrowableOracle, nextMaxBorrowableSpot, nextMaxBorrowableStored)\n  const nextMaxBorrowSafe = nextMaxBorrowMinimum.mulDiv('95', '100').sub(pair.currentUserBorrowAmount.value)\n  const nextMaxBorrowPossible = maximum(minimum(nextMaxBorrowSafe, pair.maxAssetAvailable), ZERO)\n\n  const nextHealth = pair.currentUserBorrowAmount.value\n    .sub(displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals))\n    .mulDiv(BigNumber.from('1000000000000000000'), nextMaxBorrowMinimum)\n\n  const transactionReview = new TransactionReview()\n\n  if (displayRepayValue || displayRemoveValue) {\n    transactionReview.addTokenAmount(\n      'Borrow Limit',\n      pair.maxBorrowable.safe.value,\n      nextMaxBorrowSafe.add(displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals)),\n      pair.asset\n    )\n    transactionReview.addPercentage('Health', pair.health.value, nextHealth)\n  }\n\n  const warnings = new Warnings()\n    .addError(\n      assetNative && !useBentoRepay && pinRepayMax,\n      `You cannot MAX repay ${pair.asset.tokenInfo.symbol} directly from your wallet. Please deposit your ${pair.asset.tokenInfo.symbol} into the BentoBox first, then repay. Because your debt is slowly accrueing interest we can't predict how much it will be once your transaction gets mined.`\n    )\n    .addError(\n      displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals).gt(pair.userCollateralAmount.value),\n      'You have insufficient collateral. Please enter a smaller amount or repay more.'\n    )\n    .addError(\n      displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals).gt(pair.currentUserBorrowAmount.value),\n      \"You can't repay more than you owe. To fully repay, please click the 'max' button.\",\n      new Warning(\n        balance?.lt(displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals)),\n        `Please make sure your ${\n          useBentoRepay ? 'BentoBox' : 'wallet'\n        } balance is sufficient to repay and then try again.`,\n        true\n      )\n    )\n    .addError(\n      displayRemoveValue\n        .toBigNumber(pair.collateral.tokenInfo.decimals)\n        .gt(maximum(pair.userCollateralAmount.value.sub(nextMinCollateralMinimum), ZERO)),\n      'Removing this much collateral would put you into insolvency.',\n      new Warning(\n        displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals).gt(nextMaxRemoveCollateral),\n        'Removing this much collateral would put you very close to insolvency.'\n      )\n    )\n\n  const removeValueSet =\n    !displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals).isZero() ||\n    (pinRemoveMax && pair.userCollateralShare.gt(ZERO))\n\n  const repayValueSet = !displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals).isZero()\n\n  // const trade = swap ? foundTrade : undefined;\n  // const trade = swap && removeValueSet ? foundTrade : undefined\n\n  const [isExpertMode] = useExpertModeManager()\n\n  // const { priceImpactWithoutFee } = computeTradePriceBreakdown(trade);\n\n  const priceImpactSeverity = warningSeverity(priceImpact)\n\n  let actionName = 'Nothing to do'\n\n  if (removeValueSet) {\n    if (repayValueSet) {\n      actionName = 'Repay and remove collateral'\n    } else {\n      actionName = 'Remove collateral'\n    }\n  } else if (repayValueSet) {\n    actionName = 'Repay'\n  } else if (swap) {\n    actionName = 'Automatic repay'\n  }\n\n  // const actionDisabled = false\n\n  const actionDisabled =\n    (!swap &&\n      !trade &&\n      displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals).lte(0) &&\n      displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals).lte(0) &&\n      (!pinRemoveMax || pair.userCollateralShare.isZero())) ||\n    warnings.some((warning) => warning.breaking)\n\n  function resetRepayState() {\n    setPinRepayMax(false)\n    setPinRemoveMax(false)\n    setRemoveCollateralValue('')\n    setRepayAssetValue('')\n  }\n\n  // Handlers\n  async function onExecute(cooker: KashiCooker) {\n    let summary = ''\n\n    /*\n    if (swap && trade) {\n      const share = toShare(pair.collateral, pair.userCollateralAmount.value)\n\n      cooker.removeCollateral(pair.userCollateralShare, true)\n      cooker.bentoTransferCollateral(pair.userCollateralShare, SUSHISWAP_MULTI_EXACT_SWAPPER_ADDRESS[chainId || 1])\n      cooker.repayShare(pair.userBorrowPart)\n\n      const path = trade.route.path.map((token) => token.address) || []\n\n      console.log('debug', [\n        pair.collateral.address,\n        pair.asset.address,\n        maxAmountIn,\n        path.length > 2 ? path[1] : AddressZero,\n        path.length > 3 ? path[2] : AddressZero,\n        account,\n        pair.userCollateralShare,\n      ])\n\n      const data = defaultAbiCoder.encode(\n        ['address', 'address', 'uint256', 'address', 'address', 'address', 'uint256'],\n        [\n          pair.collateral.address,\n          pair.asset.address,\n          maxAmountIn,\n          path.length > 2 ? path[1] : AddressZero,\n          path.length > 3 ? path[2] : AddressZero,\n          account,\n          pair.userCollateralShare,\n        ]\n      )\n\n      cooker.action(\n        SUSHISWAP_MULTI_EXACT_SWAPPER_ADDRESS[chainId || 1],\n        ZERO,\n        hexConcat([hexlify('0x3087d742'), data]),\n        true,\n        false,\n        1\n      )\n\n      cooker.repayPart(pair.userBorrowPart, true)\n\n      if (!useBentoRemove) {\n        cooker.bentoWithdrawCollateral(ZERO, BigNumber.from(-1))\n      }\n\n      summary = 'Repay All'\n    } else {\n      if (pinRepayMax && pair.userBorrowPart.gt(0) && balance.gte(pair.currentUserBorrowAmount.value)) {\n        cooker.repayPart(pair.userBorrowPart, useBentoRepay)\n        summary = 'Repay Max'\n      } else if (displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals).gt(0)) {\n        cooker.repay(displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals), useBentoRepay)\n        summary = 'Repay'\n      }\n      if (\n        displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals).gt(0) ||\n        (pinRemoveMax && pair.userCollateralShare.gt(0))\n      ) {\n        const share =\n          pinRemoveMax &&\n          (nextUserBorrowAmount.isZero() ||\n            (pinRepayMax && pair.userBorrowPart.gt(0) && balance.gte(pair.currentUserBorrowAmount.value)))\n            ? pair.userCollateralShare\n            : toShare(pair.collateral, displayRemoveValue.toBigNumber(pair.collateral.tokenInfo.decimals))\n\n        cooker.removeCollateral(share, useBentoRemove)\n        summary += (summary ? ' and ' : '') + 'Remove Collateral'\n      }\n    }\n\n    resetRepayState()\n\n    */\n    return summary\n  }\n\n  return (\n    <>\n      <div className=\"mt-6 mb-4 text-3xl text-high-emphesis\">Repay {pair.asset.tokenInfo.symbol}</div>\n\n      <SmartNumberInput\n        color=\"pink\"\n        token={pair.asset}\n        value={displayRepayValue}\n        setValue={setRepayAssetValue}\n        useBentoTitleDirection=\"down\"\n        useBentoTitle={`Repay ${pair.asset.tokenInfo.symbol} from`}\n        useBento={useBentoRepay}\n        setUseBento={setUseBentoRepay}\n        maxTitle=\"Balance\"\n        max={balance}\n        pinMax={pinRepayMax}\n        setPinMax={setPinRepayMax}\n        showMax={!swap && !pair.currentUserBorrowAmount.value.isZero()}\n        disabled={swap || pair.currentUserBorrowAmount.value.isZero()}\n        switchDisabled={swap || pair.currentUserBorrowAmount.value.isZero()}\n      />\n\n      <SmartNumberInput\n        color=\"pink\"\n        token={pair.collateral}\n        value={displayRemoveValue}\n        setValue={setRemoveCollateralValue}\n        useBentoTitleDirection=\"up\"\n        useBentoTitle={`Remove ${pair.collateral.tokenInfo.symbol} to`}\n        useBento={useBentoRemove}\n        setUseBento={setUseBentoRemoveCollateral}\n        max={nextMaxRemoveCollateral}\n        pinMax={pinRemoveMax}\n        setPinMax={setPinRemoveMax}\n        showMax={\n          pair.currentUserBorrowAmount.value.eq(displayRepayValue.toBigNumber(pair.asset.tokenInfo.decimals)) ||\n          pair.currentUserBorrowAmount.value.isZero()\n        }\n        disabled={swap || pair.userCollateralAmount.value.isZero()}\n        switchDisabled={pair.userCollateralAmount.value.isZero()}\n      />\n\n      {!pair.currentUserBorrowAmount.value.isZero() && (\n        <SwapCheckbox\n          trade={trade}\n          color=\"pink\"\n          swap={swap}\n          setSwap={(value: boolean) => {\n            resetRepayState()\n            setSwap(value)\n          }}\n          title={`Swap ${pair.collateral.tokenInfo.symbol} collateral for ${pair.asset.tokenInfo.symbol} and repay`}\n          help=\"Swapping your removed collateral tokens and repay allows for reducing your borrow by using your collateral and/or to unwind leveraged positions.\"\n        />\n      )}\n\n      {removeValueSet && (\n        <ExchangeRateCheckBox\n          color=\"pink\"\n          pair={pair}\n          updateOracle={updateOracle}\n          setUpdateOracle={setUpdateOracle}\n          desiredDirection=\"up\"\n        />\n      )}\n\n      <WarningsView warnings={warnings} />\n\n      {swap && trade && <TradeReview trade={trade} allowedSlippage={allowedSlippage} />}\n\n      {swap && (priceImpactSeverity < 3 || isExpertMode) && (\n        <TransactionReviewView transactionReview={transactionReview} />\n      )}\n\n      <KashiApproveButton\n        color=\"pink\"\n        content={(onCook: any) => (\n          <TokenApproveButton value={displayRepayValue} token={assetToken} needed={!useBentoRepay}>\n            <Button onClick={() => onCook(pair, onExecute)} disabled={actionDisabled}>\n              {actionName}\n            </Button>\n          </TokenApproveButton>\n        )}\n      />\n    </>\n  )\n}\n","import { Direction, TransactionReview } from '../../entities/TransactionReview'\nimport { KashiApproveButton, TokenApproveButton } from './Button'\nimport React, { useState } from 'react'\nimport { ZERO, e10 } from '../../functions/math'\n\nimport Button from '../../components/Button'\nimport KashiCooker from '../../entities/KashiCooker'\nimport SmartNumberInput from './SmartNumberInput'\nimport TransactionReviewList from './TransactionReview'\nimport { WNATIVE } from '@mistswapdex/sdk'\nimport { Warnings } from '../../entities/Warnings'\nimport WarningsList from './WarningsList'\nimport { formatNumber } from '../../functions/format'\nimport { t } from '@lingui/macro'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useCurrency } from '../../hooks/Tokens'\nimport { useKashiInfo } from './context'\nimport { useLingui } from '@lingui/react'\n\nexport default function Deposit({ pair }: any): JSX.Element {\n  const { chainId } = useActiveWeb3React()\n  const assetToken = useCurrency(pair.asset.address) || undefined\n\n  const { i18n } = useLingui()\n\n  // State\n  const [useBento, setUseBento] = useState<boolean>(pair.asset.bentoBalance.gt(0))\n  const [value, setValue] = useState('')\n\n  const info = useKashiInfo()\n\n  // Calculated\n  const assetNative = WNATIVE[chainId || 1].address === pair.asset.address\n  const balance = useBento ? pair.asset.bentoBalance : assetNative ? info?.ethBalance : pair.asset.balance\n\n  const max = useBento ? pair.asset.bentoBalance : assetNative ? info?.ethBalance : pair.asset.balance\n\n  const warnings = new Warnings()\n\n  warnings.add(\n    balance?.lt(value.toBigNumber(pair.asset.tokenInfo.decimals)),\n    i18n._(\n      t`Please make sure your ${useBento ? 'BentoBox' : 'wallet'} balance is sufficient to deposit and then try again.`\n    ),\n    true\n  )\n\n  const transactionReview = new TransactionReview()\n\n  if (value && !warnings.broken) {\n    const amount = value.toBigNumber(pair.asset.tokenInfo.decimals)\n    const newUserAssetAmount = pair.currentUserAssetAmount.value.add(amount)\n    transactionReview.addTokenAmount(\n      i18n._(t`Balance`),\n      pair.currentUserAssetAmount.value,\n      newUserAssetAmount,\n      pair.asset\n    )\n    transactionReview.addUSD(i18n._(t`Balance USD`), pair.currentUserAssetAmount.value, newUserAssetAmount, pair.asset)\n    const newUtilization = e10(18).mulDiv(pair.currentBorrowAmount.value, pair.currentAllAssets.value.add(amount))\n    transactionReview.addPercentage(i18n._(t`Borrowed`), pair.utilization.value, newUtilization)\n    if (pair.currentExchangeRate.isZero()) {\n      transactionReview.add(\n        'Exchange Rate',\n        formatNumber(\n          pair.currentExchangeRate.toFixed(18 + pair.collateral.tokenInfo.decimals - pair.asset.tokenInfo.decimals)\n        ),\n        formatNumber(\n          pair.oracleExchangeRate.toFixed(18 + pair.collateral.tokenInfo.decimals - pair.asset.tokenInfo.decimals)\n        ),\n        Direction.UP\n      )\n    }\n    transactionReview.addPercentage(i18n._(t`Supply APR`), pair.supplyAPR.value, pair.currentSupplyAPR.value)\n  }\n\n  // Handlers\n  async function onExecute(cooker: KashiCooker): Promise<string> {\n    if (pair.currentExchangeRate.isZero()) {\n      cooker.updateExchangeRate(false, ZERO, ZERO)\n    }\n    cooker.addAsset(value.toBigNumber(pair.asset.tokenInfo.decimals), useBento)\n    return `${i18n._(t`Deposit`)} ${pair.asset.tokenInfo.symbol}`\n  }\n\n  return (\n    <>\n      <div className=\"mt-6 text-3xl text-high-emphesis\">Deposit {pair.asset.tokenInfo.symbol}</div>\n\n      <SmartNumberInput\n        color=\"blue\"\n        token={pair.asset}\n        value={value}\n        setValue={setValue}\n        useBentoTitleDirection=\"down\"\n        useBentoTitle=\"from\"\n        useBento={useBento}\n        setUseBento={setUseBento}\n        maxTitle=\"Balance\"\n        max={max}\n        showMax={true}\n      />\n\n      <WarningsList warnings={warnings} />\n      <TransactionReviewList transactionReview={transactionReview} />\n\n      <KashiApproveButton\n        color=\"blue\"\n        content={(onCook: any) => (\n          <TokenApproveButton value={value} token={assetToken} needed={!useBento}>\n            <Button\n              onClick={() => onCook(pair, onExecute)}\n              disabled={value.toBigNumber(pair.asset.tokenInfo.decimals).lte(0) || warnings.broken}\n            >\n              {i18n._(t`Deposit`)}\n            </Button>\n          </TokenApproveButton>\n        )}\n      />\n    </>\n  )\n}\n","import React, { useState } from 'react'\nimport { e10, minimum } from '../../functions/math'\n\nimport Button from '../../components/Button'\nimport { KashiApproveButton } from './Button'\nimport KashiCooker from '../../entities/KashiCooker'\nimport SmartNumberInput from './SmartNumberInput'\nimport { TransactionReview } from '../../entities/TransactionReview'\nimport TransactionReviewView from './TransactionReview'\nimport { Warnings } from '../../entities/Warnings'\nimport WarningsView from './WarningsList'\nimport { t } from '@lingui/macro'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useKashiApprovalPending } from '../../state/application/hooks'\nimport useKashiApproveCallback from '../../hooks/useKashiApproveCallback'\nimport { useLingui } from '@lingui/react'\n\nexport default function LendWithdrawAction({ pair }: any): JSX.Element {\n  const { account } = useActiveWeb3React()\n  const pendingApprovalMessage = useKashiApprovalPending()\n\n  const { i18n } = useLingui()\n\n  // State\n  const [useBento, setUseBento] = useState<boolean>(pair.asset.bentoBalance.gt(0))\n  const [value, setValue] = useState('')\n  const [pinMax, setPinMax] = useState(false)\n\n  const [kashiApprovalState, approveKashiFallback, kashiPermit, onApprove, onCook] = useKashiApproveCallback()\n\n  // Calculated\n  const max = minimum(pair.maxAssetAvailable, pair.currentUserAssetAmount.value)\n  const displayValue = pinMax ? max.toFixed(pair.asset.tokenInfo.decimals) : value\n\n  const fraction = pinMax\n    ? minimum(pair.userAssetFraction, pair.maxAssetAvailableFraction)\n    : value.toBigNumber(pair.asset.tokenInfo.decimals).mulDiv(pair.currentTotalAsset.base, pair.currentAllAssets.value)\n\n  const warnings = new Warnings()\n    .add(\n      pair.currentUserAssetAmount.value.lt(value.toBigNumber(pair.asset.tokenInfo.decimals)),\n      i18n._(\n        t`Please make sure your ${\n          useBento ? 'BentoBox' : 'wallet'\n        } balance is sufficient to withdraw and then try again.`\n      ),\n      true\n    )\n    .add(\n      pair.maxAssetAvailableFraction.lt(fraction),\n      i18n._(\n        t`The isn't enough liquidity available at the moment to withdraw this amount. Please try withdrawing less or later.`\n      ),\n      true\n    )\n\n  const transactionReview = new TransactionReview()\n  if (displayValue && !warnings.broken) {\n    const amount = displayValue.toBigNumber(pair.asset.tokenInfo.decimals)\n    const newUserAssetAmount = pair.currentUserAssetAmount.value.sub(amount)\n    transactionReview.addTokenAmount(\n      i18n._(t`Balance`),\n      pair.currentUserAssetAmount.value,\n      newUserAssetAmount,\n      pair.asset\n    )\n    transactionReview.addUSD(i18n._(t`Balance USD`), pair.currentUserAssetAmount.value, newUserAssetAmount, pair.asset)\n\n    const newUtilization = e10(18).mulDiv(pair.currentBorrowAmount.value, pair.currentAllAssets.value.sub(amount))\n    transactionReview.addPercentage(i18n._(t`Borrowed`), pair.utilization.value, newUtilization)\n  }\n\n  // Handlers\n  async function onExecute(cooker: KashiCooker) {\n    const fraction = pinMax\n      ? minimum(pair.userAssetFraction, pair.maxAssetAvailableFraction)\n      : value\n          .toBigNumber(pair.asset.tokenInfo.decimals)\n          .mulDiv(pair.currentTotalAsset.base, pair.currentAllAssets.value)\n\n    cooker.removeAsset(fraction, useBento)\n    return `${i18n._(t`Withdraw`)} ${pair.asset.tokenInfo.symbol}`\n  }\n\n  return (\n    <>\n      <div className=\"mt-6 text-3xl text-high-emphesis\">\n        {i18n._(t`Withdraw`)} {pair.asset.tokenInfo.symbol}\n      </div>\n\n      <SmartNumberInput\n        color=\"blue\"\n        token={pair.asset}\n        value={displayValue}\n        setValue={setValue}\n        useBentoTitleDirection=\"up\"\n        useBentoTitle=\"to\"\n        useBento={useBento}\n        setUseBento={setUseBento}\n        max={max}\n        pinMax={pinMax}\n        setPinMax={setPinMax}\n        showMax={true}\n      />\n\n      <WarningsView warnings={warnings} />\n      <TransactionReviewView transactionReview={transactionReview}></TransactionReviewView>\n\n      <KashiApproveButton\n        color=\"blue\"\n        content={(onCook: any) => (\n          <Button\n            onClick={() => onCook(pair, onExecute)}\n            disabled={displayValue.toBigNumber(pair.asset.tokenInfo.decimals).lte(0) || warnings.broken}\n          >\n            {i18n._(t`Withdraw`)}\n          </Button>\n        )}\n      />\n    </>\n  )\n}\n","import { Currency, Percent, Trade, TradeType } from '@mistswapdex/sdk'\n\nimport { useMemo } from 'react'\nimport { useUserSlippageToleranceWithDefault } from '../state/user/hooks'\n\nconst V2_SWAP_DEFAULT_SLIPPAGE = new Percent(50, 10_000) // .50%\nconst ONE_TENTHS_PERCENT = new Percent(10, 10_000) // .10%\n\nexport default function useSwapSlippageTolerance(trade: Trade<Currency, Currency, TradeType> | undefined): Percent {\n  const defaultSlippageTolerance = useMemo(() => {\n    if (!trade) return ONE_TENTHS_PERCENT\n    return V2_SWAP_DEFAULT_SLIPPAGE\n  }, [trade])\n  return useUserSlippageToleranceWithDefault(defaultSlippageTolerance)\n}\n","import { KASHI_ADDRESS, FLEXUSD_ADDRESS, WNATIVE_ADDRESS } from '@mistswapdex/sdk'\nimport { useBentoBoxContract, useBoringHelperContract, useContract } from '../../hooks/useContract'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\n\nimport { BigNumber } from '@ethersproject/bignumber'\nimport ERC20_ABI from '../../constants/abis/erc20.json'\nimport { WrappedTokenInfo } from '../lists/wrappedTokenInfo'\nimport { e10 } from '../../functions/math'\nimport { easyAmount } from '../../functions/kashi'\nimport { getAddress } from '@ethersproject/address'\nimport { toAmount } from '../../functions/bentobox'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useAllTokens } from '../../hooks/Tokens'\nimport { useSingleCallResult } from '../multicall/hooks'\nimport useTransactionStatus from '../../hooks/useTransactionStatus'\n\nexport interface BentoBalance {\n  address: string\n  name: string\n  symbol: string\n  decimals: number\n  balance: any\n  bentoBalance: any\n  wallet: any\n  bento: any\n}\n\nexport function useBentoBalances(): BentoBalance[] {\n  const { chainId, account } = useActiveWeb3React()\n\n  const boringHelperContract = useBoringHelperContract()\n\n  const tokens = useAllTokens()\n\n  const weth = WNATIVE_ADDRESS[chainId]\n\n  const tokenAddresses = Object.keys(tokens)\n\n  const balanceData = useSingleCallResult(boringHelperContract, 'getBalances', [account, tokenAddresses])\n\n  const uiData = useSingleCallResult(boringHelperContract, 'getUIInfo', [\n    account,\n    [],\n    FLEXUSD_ADDRESS[chainId],\n    [KASHI_ADDRESS[chainId]],\n  ])\n\n  // IERC20 token = addresses[i];\n  // balances[i].totalSupply = token.totalSupply();\n  // balances[i].token = token;\n  // balances[i].balance = token.balanceOf(who);\n  // balances[i].bentoAllowance = token.allowance(who, address(bentoBox));\n  // balances[i].nonce = token.nonces(who);\n  // balances[i].bentoBalance = bentoBox.balanceOf(token, who);\n  // (balances[i].bentoAmount, balances[i].bentoShare) = bentoBox.totals(token);\n  // balances[i].rate = getETHRate(token);\n\n  return useMemo(() => {\n    if (\n      uiData.loading ||\n      balanceData.loading ||\n      uiData.error ||\n      balanceData.error ||\n      !uiData.result ||\n      !balanceData.result\n    )\n      return []\n    return tokenAddresses\n      .map((key: string, i: number) => {\n        const token = tokens[key]\n\n        const usd = e10(token.decimals).mulDiv(uiData.result[0].ethRate, balanceData.result[0][i].rate)\n\n        const full = {\n          ...token,\n          ...balanceData.result[0][i],\n          usd,\n        }\n        return {\n          ...token,\n          usd,\n          address: token.address,\n          name: token.name,\n          symbol: token.symbol,\n          decimals: token.decimals,\n          balance: token.address === weth ? uiData.result[0].ethBalance : balanceData.result[0][i].balance,\n          bentoBalance: balanceData.result[0][i].bentoBalance,\n          wallet: easyAmount(\n            token.address === weth ? uiData.result[0].ethBalance : balanceData.result[0][i].balance,\n            full\n          ),\n          bento: easyAmount(toAmount(full, balanceData.result[0][i].bentoBalance), full),\n        }\n      })\n      .filter((token) => token.balance.gt('0') || token.bentoBalance.gt('0'))\n  }, [\n    uiData.loading,\n    uiData.error,\n    uiData.result,\n    balanceData.loading,\n    balanceData.error,\n    balanceData.result,\n    tokenAddresses,\n    tokens,\n    weth,\n  ])\n}\n\nexport function useBentoBalance(tokenAddress: string): {\n  value: BigNumber\n  decimals: number\n} {\n  const { account } = useActiveWeb3React()\n\n  const boringHelperContract = useBoringHelperContract()\n  const bentoBoxContract = useBentoBoxContract()\n  const tokenAddressChecksum = getAddress(tokenAddress)\n  const tokenContract = useContract(tokenAddressChecksum ? tokenAddressChecksum : undefined, ERC20_ABI)\n\n  const currentTransactionStatus = useTransactionStatus()\n\n  const [balance, setBalance] = useState<any>()\n\n  // const balanceData = useSingleCallResult(boringHelperContract, 'getBalances', [account, tokenAddresses])\n\n  const fetchBentoBalance = useCallback(async () => {\n    const balances = await boringHelperContract?.getBalances(account, [tokenAddressChecksum])\n    const decimals = await tokenContract?.decimals()\n\n    const amount = BigNumber.from(balances[0].bentoShare).isZero()\n      ? BigNumber.from(0)\n      : BigNumber.from(balances[0].bentoBalance)\n          .mul(BigNumber.from(balances[0].bentoAmount))\n          .div(BigNumber.from(balances[0].bentoShare))\n\n    setBalance({\n      value: amount,\n      decimals: decimals,\n    })\n  }, [account, tokenAddressChecksum, tokenContract, boringHelperContract])\n\n  useEffect(() => {\n    if (account && bentoBoxContract && boringHelperContract && tokenContract) {\n      fetchBentoBalance()\n    }\n  }, [account, bentoBoxContract, currentTransactionStatus, fetchBentoBalance, tokenContract, boringHelperContract])\n\n  return balance\n}\n\nexport function useBentoMasterContractAllowed(masterContract?: string, user?: string): boolean | undefined {\n  const contract = useBentoBoxContract()\n\n  const inputs = useMemo(() => [masterContract, user], [masterContract, user])\n\n  const allowed = useSingleCallResult(contract, 'masterContractApproved', inputs).result\n\n  return useMemo(() => (allowed ? allowed[0] : undefined), [allowed])\n}\n"],"names":["TYPE","information","color","icon","width","height","className","viewBox","xmlns","path","fill","d","warning","fillRule","clipRule","error","Alert","title","message","type","showIcon","dismissable","useState","show","setShow","classNames","onClick","Action","signMasterContractApproval","bentoBoxContract","masterContract","user","library","approved","chainId","nonces","nonce","typedData","types","SetMasterContractApproval","name","primaryType","domain","verifyingContract","address","signer","getSigner","_signTypedData","KashiCooker","pair","account","this","AddressZero","actions","values","datas","action","data","value","push","BigNumber","permit","add","BENTO_SETAPPROVAL","defaultAbiCoder","v","r","s","mustUpdate","minRate","ZERO","maxRate","UPDATE_EXCHANGE_RATE","amount","useNative","collateral","WNATIVE","BENTO_DEPOSIT","share","BENTO_WITHDRAW","toAddress","BENTO_TRANSFER","part","GET_REPAY_SHARE","fromBento","lt","toShare","ADD_COLLATERAL","asset","ADD_ASSET","fraction","toBento","REMOVE_ASSET","REMOVE_COLLATERAL","BORROW","GET_REPAY_PART","REPAY","toElastic","totalBorrow","mul","div","useValue1","useValue2","returnValues","CALL","success","kashiPairCloneContract","Contract","KASHIPAIR_ABI","getProviderOrSigner","cook","reduce","a","b","tx","console","SEVERITY","FormattedPriceImpact","priceImpact","warningSeverity","multiply","toFixed","SwapRoute","memo","trade","route","map","token","i","isLastItem","length","currency","unwrappedToken","Fragment","symbol","displayName","COLOR","pink","blue","set","rest","onChange","event","target","checked","ExchangeRateCheckBox","updateOracle","setUpdateOracle","desiredDirection","displayUpdateOracle","currentExchangeRate","gt","oracleExchangeRate","disabled","isZero","QuestionHelper","text","SwapCheckbox","swap","setSwap","help","allowedSlippage","useSwapSlippageTolerance","Settings","placeholderSlippage","BentoApprovalState","BentoApproveOutcome","useActiveWeb3React","dispatch","useDispatch","approveKashiFallback","setApproveKashiFallback","undefined","kashiPermit","setKashiPermit","useEffect","KASHI_ADDRESS","pendingApproval","useKashiApprovalPending","currentAllowed","useBentoMasterContractAllowed","addTransaction","useTransactionAdder","approvalState","useMemo","PENDING","APPROVED","NOT_APPROVED","UNKNOWN","useBentoBoxContract","approve","useCallback","outcome","NOT_READY","signature","splitSignature","SUCCESS","code","REJECTED","FAILED","result","setMasterContractApproval","HashZero","setKashiApprovalPending","wait","execute","cooker","summary","KashiApproveButton","content","i18n","useLingui","useKashiApproveCallback","kashiApprovalState","onApprove","onCook","showApprove","showChildren","_","Button","React","TokenApproveButton","children","needed","useApproveCallback","tryParseAmount","BENTOBOX_ADDRESS","WNATIVE_ADDRESS","ApprovalState","Dots","Warning","active","breaking","or","Warnings","_add","some","Array","SmartNumberInput","setValue","useBentoTitleDirection","useBentoTitle","useBento","setUseBento","maxTitle","max","pinMax","setPinMax","showMax","switchDisabled","size","style","display","variant","cursor","formatNumber","tokenInfo","decimals","Input","onUserInput","onFocus","Direction","showRoute","Boolean","realizedLPFee","realizedLpFeePercent","computeRealizedLPFeePercent","inputAmount","subtract","minimumAmountOut","toSignificant","outputAmount","TransactionReview","from","to","direction","eq","FLAT","UP","DOWN","getUSDString","formatPercent","transactionReview","line","marginRight","marginLeft","warnings","DEFAULT_BORROW_SLIPPAGE_TOLERANCE","Percent","Borrow","info","useKashiInfo","bentoBalance","useBentoCollateral","setUseBentoCollateral","useBentoBorrow","setUseBentoBorrow","collateralValue","setCollateralValue","borrowValue","setBorrowValue","assetToken","useCurrency","collateralToken","assetNative","collateralBalance","ethBalance","balance","useUserSlippageToleranceWithDefault","parsedAmount","foundTrade","useV2TradeExactIn","extraCollateral","quotient","toString","swapCollateral","toBigNumber","nextUserCollateralValue","userCollateralAmount","nextMaxBorrowableOracle","mulDiv","e10","nextMaxBorrowableSpot","spotExchangeRate","nextMaxBorrowableStored","nextMaxBorrowMinimum","minimum","nextMaxBorrowSafe","sub","currentUserBorrowAmount","nextMaxBorrowPossible","maximum","maxAssetAvailable","nextBorrowValue","nextHealth","collateralValueSet","borrowValueSet","useExpertModeManager","isExpertMode","priceImpactSeverity","borrowAmount","collateralWarnings","borrowWarnings","broken","addTokenAmount","addUSD","addRate","maxBorrowable","safe","addPercentage","health","interestPerYear","currentInterestPerYear","actionName","actionDisabled","lte","onExecute","multipler","multiplier","multipliedBorrow","onMultiply","DEFAULT_KASHI_REPAY_SLIPPAGE_TOLERANCE","Repay","useBentoRepay","setUseBentoRepay","useBentoRemove","setUseBentoRemoveCollateral","repayValue","setRepayAssetValue","removeValue","setRemoveCollateralValue","pinRemoveMax","setPinRemoveMax","pinRepayMax","setPinRepayMax","toAmount","displayRepayValue","nextUserBorrowAmount","nextMinCollateralOracle","nextMinCollateralSpot","nextMinCollateralStored","nextMinCollateralMinimum","nextMaxRemoveCollateral","maxRemoveCollateral","displayRemoveValue","string","useV2TradeExactOut","nextUserCollateralAmount","maximumAmountIn","addError","removeValueSet","userCollateralShare","repayValueSet","Deposit","newUserAssetAmount","currentUserAssetAmount","newUtilization","currentBorrowAmount","currentAllAssets","utilization","supplyAPR","currentSupplyAPR","updateExchangeRate","addAsset","LendWithdrawAction","displayValue","userAssetFraction","maxAssetAvailableFraction","currentTotalAsset","base","removeAsset","V2_SWAP_DEFAULT_SLIPPAGE","ONE_TENTHS_PERCENT","defaultSlippageTolerance","useBentoBalances","boringHelperContract","useBoringHelperContract","tokens","useAllTokens","weth","tokenAddresses","Object","keys","balanceData","useSingleCallResult","uiData","FLEXUSD_ADDRESS","loading","key","usd","ethRate","rate","full","wallet","easyAmount","bento","filter","contract","inputs","allowed"],"sourceRoot":""}