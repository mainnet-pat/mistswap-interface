{"version":3,"file":"static/chunks/pages/vesting-45af8ff78d377f7d2dba.js","mappings":"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","sources":["webpack://_N_E/./src/components/Container/index.tsx","webpack://_N_E/./src/state/claim/hooks.ts","webpack://_N_E/./node_modules/react-feather/dist/icons/chevron-right.js","webpack://_N_E/./src/pages/vesting/index.tsx","webpack://_N_E/?b6fb"],"sourcesContent":["import { classNames } from '../../functions'\n\nconst MAX_WIDTH = {\n  full: 'max-w-full',\n  '7xl': 'max-w-7xl',\n  '6xl': 'max-w-6xl',\n  '5xl': 'max-w-5xl',\n  '4xl': 'max-w-4xl',\n  '3xl': 'max-w-3xl',\n  '2xl': 'max-w-2xl',\n  xl: 'max-w-xl',\n  lg: 'max-w-lg',\n  md: 'max-w-md',\n  sm: 'max-w-sm',\n  xs: 'max-w-xs',\n}\n\nconst Container = ({ children, maxWidth = '2xl', className = '', ...rest }) => (\n  <div className={classNames(className, MAX_WIDTH[maxWidth], 'w-full')} {...rest}>\n    {children}\n  </div>\n)\n\nexport default Container\n","import { ChainId, Currency, CurrencyAmount, JSBI, Token } from '@mistswapdex/sdk'\nimport { getAddress, isAddress } from '@ethersproject/address'\nimport { useEffect, useState } from 'react'\n\nimport { MERKLE_ROOT } from './../../constants/index'\nimport { MIST } from '../../config/tokens'\nimport { TransactionResponse } from '@ethersproject/providers'\nimport { calculateGasMargin } from '../../functions/trade'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useMerkleDistributorContract } from '../../hooks/useContract'\nimport { useSingleCallResult } from '../multicall/hooks'\nimport { useTransactionAdder } from '../transactions/hooks'\n\ninterface UserClaimData {\n  index: number\n  amount: string\n  proof: string[]\n  flags?: {\n    isSOCKS: boolean\n    isLP: boolean\n    isUser: boolean\n  }\n}\n\nconst CLAIM_PROMISES: { [key: string]: Promise<any | UserClaimData | null> } = {}\n\n// returns the claim for the given address, or null if not valid\nfunction fetchClaim(account: string, chainId: ChainId): Promise<any | UserClaimData | null> {\n  if (!isAddress(account)) return Promise.reject(new Error('Invalid address'))\n  const key = `${chainId}:${account}`\n  // console.log('CLAIM_PROMISE:', CLAIM_PROMISES[key], key)\n  return (CLAIM_PROMISES[key] =\n    CLAIM_PROMISES[key] ??\n    fetch(MERKLE_ROOT)\n      .then((response) => response.json())\n      .then((data) => {\n        const claim: typeof data.claims[0] | undefined = data.claims[getAddress(account)] ?? undefined\n        if (!claim) return null\n\n        // console.log('claim:', claim)\n        return {\n          index: claim.index,\n          amount: claim.amount,\n          proof: claim.proof,\n        }\n      })\n      .catch((error) => console.error('Failed to get claim data', error)))\n}\n\n// parse distributorContract blob and detect if user has claim data\n// null means we know it does not\nexport function useUserClaimData(account: string | null | undefined): UserClaimData | null | undefined {\n  const { chainId } = useActiveWeb3React()\n\n  const key = `${chainId}:${account}`\n  const [claimInfo, setClaimInfo] = useState<{\n    [key: string]: UserClaimData | null\n  }>({})\n\n  useEffect(() => {\n    if (!account || !chainId) return\n    fetchClaim(account, chainId).then((accountClaimInfo) =>\n      setClaimInfo((claimInfo) => {\n        // console.log('claimInfo:', claimInfo, accountClaimInfo, key)\n        return {\n          ...claimInfo,\n          [key]: accountClaimInfo,\n        }\n      })\n    )\n  }, [account, chainId, key])\n\n  return account && chainId ? claimInfo[key] : undefined\n}\n\n// check if user is in blob and has not yet claimed UNI\nexport function useUserHasAvailableClaim(account: string | null | undefined): boolean {\n  const userClaimData = useUserClaimData(account)\n  const distributorContract = useMerkleDistributorContract()\n  const isClaimedResult = useSingleCallResult(distributorContract, 'isClaimed', [userClaimData?.index])\n  // user is in blob and contract marks as unclaimed\n  return Boolean(userClaimData && !isClaimedResult.loading && isClaimedResult.result?.[0] === false)\n}\n\nexport function useUserUnclaimedAmount(account: string | null | undefined): CurrencyAmount<Currency> | undefined {\n  const { chainId } = useActiveWeb3React()\n  const userClaimData = useUserClaimData(account)\n  const canClaim = useUserHasAvailableClaim(account)\n\n  const sushi = chainId ? MIST[chainId] : undefined\n\n  // console.log('claimStats:', {\n  //   canClaim: canClaim,\n  //   userClaimData: userClaimData,\n  //   sushi: sushi\n  // })\n\n  if (!sushi) return undefined\n  if (!canClaim || !userClaimData) {\n    return CurrencyAmount.fromRawAmount(sushi, JSBI.BigInt(0))\n  }\n  return CurrencyAmount.fromRawAmount(sushi, JSBI.BigInt(userClaimData.amount))\n}\n\nexport function useClaimCallback(account: string | null | undefined): {\n  claimCallback: () => Promise<string>\n} {\n  // get claim data for this account\n  const { library, chainId } = useActiveWeb3React()\n  const claimData = useUserClaimData(account)\n\n  // used for popup summary\n  const unClaimedAmount: CurrencyAmount<Currency> | undefined = useUserUnclaimedAmount(account)\n  const addTransaction = useTransactionAdder()\n  const distributorContract = useMerkleDistributorContract()\n\n  const claimCallback = async function () {\n    if (!claimData || !account || !library || !chainId || !distributorContract) return\n\n    const args = [claimData.index, account, claimData.amount, claimData.proof]\n\n    return distributorContract.estimateGas['claim'](...args, {}).then((estimatedGasLimit) => {\n      return distributorContract\n        .claim(...args, {\n          value: null,\n          gasLimit: calculateGasMargin(estimatedGasLimit),\n        })\n        .then((response: TransactionResponse) => {\n          addTransaction(response, {\n            summary: `Claimed ${unClaimedAmount?.toSignificant(4)} MIST`,\n            claim: { recipient: account },\n          })\n          return response.hash\n        })\n    })\n  }\n\n  return { claimCallback }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar ChevronRight = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"9 18 15 12 9 6\"\n  }));\n});\nChevronRight.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nChevronRight.displayName = 'ChevronRight';\nexport default ChevronRight;","import { Currency, CurrencyAmount, Token } from '@mistswapdex/sdk'\nimport React, { useEffect, useState } from 'react'\nimport { useClaimCallback, useUserUnclaimedAmount } from '../../state/claim/hooks'\nimport { useModalOpen, useToggleSelfClaimModal } from '../../state/application/hooks'\n\nimport { ApplicationModal } from '../../state/application/actions'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport Button from '../../components/Button'\nimport { ChevronRight } from 'react-feather'\nimport Container from '../../components/Container'\nimport Dots from '../../components/Dots'\nimport ExternalLink from '../../components/ExternalLink'\nimport Fraction from '../../entities/Fraction'\nimport Head from 'next/head'\nimport Image from 'next/image'\nimport Link from 'next/link'\nimport Loader from '../../components/Loader'\nimport QuestionHelper from '../../components/QuestionHelper'\nimport { formatNumber } from '../../functions/format'\nimport { isAddress } from '@ethersproject/address'\nimport { t } from '@lingui/macro'\nimport { useActiveWeb3React } from '../../hooks/useActiveWeb3React'\nimport { useLingui } from '@lingui/react'\nimport { useUserHasSubmittedClaim } from '../../state/transactions/hooks'\n\nexport default function Vesting() {\n  const { i18n } = useLingui()\n\n  const isOpen = useModalOpen(ApplicationModal.SELF_CLAIM)\n  const toggleClaimModal = useToggleSelfClaimModal()\n\n  const { account } = useActiveWeb3React()\n\n  // used for UI loading states\n  const [attempting, setAttempting] = useState<boolean>(false)\n\n  // get user claim data\n  // const userClaimData = useUserClaimData(account)\n\n  // monitor the status of the claim from contracts and txns\n  const { claimCallback } = useClaimCallback(account)\n  const unclaimedAmount: CurrencyAmount<Currency> | undefined = useUserUnclaimedAmount(account)\n  // console.log('unclaimedAmount:', unclaimedAmount)\n  const { claimSubmitted } = useUserHasSubmittedClaim(account ?? undefined)\n  // const claimConfirmed = Boolean(claimTxn?.receipt)\n  const claimConfirmed = false\n\n  function onClaim() {\n    setAttempting(true)\n    claimCallback()\n      // reset modal and log error\n      .catch((error) => {\n        setAttempting(false)\n        console.log(error)\n      })\n  }\n\n  // once confirmed txn is found, if modal is closed open, mark as not attempting regradless\n  useEffect(() => {\n    if (claimConfirmed && claimSubmitted && attempting) {\n      setAttempting(false)\n      if (!isOpen) {\n        toggleClaimModal()\n      }\n    }\n  }, [attempting, claimConfirmed, claimSubmitted, isOpen, toggleClaimModal])\n\n  const [totalLocked, setTotalLocked] = useState<string>()\n  useEffect(() => {\n    const fetchLockup = async () => {\n      if (account) {\n        fetch('https://raw.githubusercontent.com/sushiswap/sushi-vesting/master/amounts-10959148-12171394.json')\n          .then((response) => response.json())\n          .then((data) => {\n            // console.log('vesting:', data)\n            const userLockedAmount = data[account.toLowerCase()] ? data[account.toLowerCase()] : '0'\n            const userLocked = Fraction.from(BigNumber.from(userLockedAmount), BigNumber.from(10).pow(18)).toString()\n            setTotalLocked(userLocked)\n            // console.log('userLocked:', userLocked)\n          })\n          .catch((error) => {\n            console.log(error)\n          })\n      }\n      return []\n    }\n    fetchLockup()\n  }, [account])\n\n  // remove once treasury signature passed\n  const pendingTreasurySignature = false\n\n  let vault = ''\n  if (!pendingTreasurySignature && Number(unclaimedAmount?.toFixed(8)) > 0) {\n    vault = 'https://raw.githubusercontent.com/sushiswap/sushi-content/master/images/sushi-vault-reverse.png'\n  } else if (!pendingTreasurySignature && Number(unclaimedAmount?.toFixed(8)) <= 0) {\n    vault = 'https://raw.githubusercontent.com/sushiswap/sushi-content/master/images/vesting-safe-off.png'\n  } else if (pendingTreasurySignature) {\n    vault = 'https://raw.githubusercontent.com/sushiswap/sushi-content/master/images/vesting-safe-closed.png'\n  }\n\n  return (\n    <Container id=\"vesting-page\" className=\"py-4 md:py-8 lg:py-12 m-auto w-full max-w-[900px]\">\n      <Head>\n        <title>Vesting | Mist</title>\n        <meta key=\"description\" name=\"description\" content=\"MISTswap vesting...\" />\n      </Head>\n      <div className=\"flex px-0 sm:px-4 md:flex-row md:space-x-10 lg:space-x-20 md:px-10\">\n        <div className=\"hidden space-y-10 md:block\">\n          <Image src={vault} width={340} height={300} alt=\"\" />\n          <div className=\"relative w-full p-4 overflow-hidden rounded bg-dark-900\">\n            <div className=\"font-bold text-white\">{i18n._(t`Community Approval`)}</div>\n            <div\n              className=\"pt-2 text-sm font-bold text-gray-400\"\n              style={{\n                maxWidth: '300px',\n                minHeight: '150px',\n              }}\n            >\n              <>\n                {i18n._(t`Vesting is executed within the guidelines selected by the community in`)}{' '}\n                <ExternalLink href=\"https://snapshot.org/#/sushi/proposal/QmPwBGy98NARoEcUfuWPgzMdJdiaZub1gVic67DcSs6NZQ\">\n                  SIMP3\n                </ExternalLink>\n                .\n                <br />\n                <br />\n                {i18n._(t`Please refer to the`)}{' '}\n                <ExternalLink href=\"https://forum.sushiswapclassic.org/t/simp-3-vesting-and-the-future-of-sushiswap/1794\">\n                  {i18n._(t`forum discussion`)}\n                </ExternalLink>{' '}\n                {i18n._(t`for deliberations on additional points.`)}\n                <br />\n                <br />\n                {i18n._(t`Additional records and weekly merkle updates can be found on`)}{' '}\n                <ExternalLink href=\"https://github.com/sushiswap/sushi-vesting\">Github</ExternalLink>\n              </>\n            </div>\n          </div>\n        </div>\n        <div className=\"flex flex-col gap-3 max-w-[400px]\">\n          <div className=\"relative w-full overflow-hidden rounded bg-dark-900\">\n            <div className=\"flex flex-col gap-3 p-4\">\n              <div className=\"flex flex-row justify-between\">\n                <div className=\"font-bold text-white\">{i18n._(t`Your Claimable MIST this Week`)}</div>\n                <QuestionHelper text=\"Your Vested MIST will be released each week for the next 6 months. The amount released each week is determined by your historical farming rewards. You do not need to harvest each week as unclaimed amounts from each week will continue to accrue onto the next.\" />\n              </div>\n              {/* <div style={{ display: 'flex', alignItems: 'baseline' }}> */}\n              <div className=\"flex flex-col items-baseline\">\n                <div className=\"font-bold text-white text-[36px]\">\n                  {unclaimedAmount?.toFixed(4, { groupSeparator: ',' } ?? {})}\n                </div>\n                {account ? (\n                  <div className=\"text-sm text-secondary\">\n                    {totalLocked ? (\n                      i18n._(t`Historical Total Locked: ${formatNumber(totalLocked)} MIST`)\n                    ) : (\n                      <Dots>{i18n._(t`Historical Total Locked: Fetching Total`)}</Dots>\n                    )}\n                  </div>\n                ) : (\n                  <div className=\"text-sm text-secondary\">{i18n._(t`Historical Total Locked: Connect Wallet`)}</div>\n                )}\n              </div>\n\n              <Button\n                color=\"gradient\"\n                disabled={\n                  !isAddress(account ?? '') ||\n                  claimConfirmed ||\n                  !unclaimedAmount ||\n                  Number(unclaimedAmount?.toFixed(8)) <= 0 ||\n                  pendingTreasurySignature\n                }\n                size=\"lg\"\n                onClick={onClaim}\n                className=\"inline-flex items-center justify-center\"\n              >\n                {pendingTreasurySignature ? (\n                  <Dots>{i18n._(t`Pending Treasury Transfer`)}</Dots>\n                ) : (\n                  <> {claimConfirmed ? i18n._(t`Claimed`) : i18n._(t`Claim MIST`)}</>\n                )}\n\n                {attempting && (\n                  <Loader\n                    stroke=\"white\"\n                    style={{\n                      marginLeft: '10px',\n                    }}\n                  />\n                )}\n              </Button>\n            </div>\n          </div>\n          <div className=\"relative w-full overflow-hidden rounded bg-dark-900\">\n            <div className=\"flex flex-col gap-3 p-4\">\n              <div className=\"font-bold text-white\">{i18n._(t`Things you can do with your MIST`)}</div>\n              <div className=\"p-4 rounded bg-dark-800\">\n                <Link href=\"/stake\">\n                  <a className=\"flex items-center justify-between gap-3\">\n                    <div className=\"flex flex-col gap-1\">\n                      <div className=\"font-bold text-white\">{i18n._(t`Stake MIST for xMIST`)}</div>\n                      <div className=\"text-sm text-secondary\">\n                        {t`Gain governance rights with xMIST and earn 5% APR (0.05% of\n                                                            all swaps from all chains)`}\n                      </div>\n                    </div>\n                    <div className=\"min-w-[32px]\">\n                      <ChevronRight />\n                    </div>\n                  </a>\n                </Link>\n              </div>\n              <div className=\"p-4 rounded bg-dark-800\">\n                <Link href={`/saave`}>\n                  <a className=\"flex items-center justify-between gap-3\">\n                    <div className=\"flex flex-col gap-1\">\n                      <div className=\"font-bold text-white\">{i18n._(t`Stack Yields with SAAVE`)}</div>\n                      <div className=\"text-sm text-secondary\">\n                        {t`Stake into xMIST add collateral as axMIST on Aave all in\n                                                            one click`}\n                      </div>\n                    </div>\n                    <div className=\"min-w-[32px]\">\n                      <ChevronRight />\n                    </div>\n                  </a>\n                </Link>\n              </div>\n              <div className=\"p-4 rounded bg-dark-800\">\n                <div className=\"flex flex-col gap-1\">\n                  <div className=\"font-bold text-white\">{i18n._(t`Deposit MIST into BentoBox`)}</div>\n                  <div className=\"text-sm text-secondary\">\n                    {t`(COMING SOON) Accrue automatic yield through flash loans and\n                                                            MIST strategies`}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Container>\n  )\n}\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/vesting\",\n      function () {\n        return require(\"private-next-pages/vesting/index.tsx\");\n      }\n    ]);\n  "],"names":["MAX_WIDTH","full","xl","lg","md","sm","xs","children","maxWidth","className","rest","classNames","CLAIM_PROMISES","useUserClaimData","account","chainId","useActiveWeb3React","key","useState","claimInfo","setClaimInfo","useEffect","isAddress","Promise","reject","Error","fetch","MERKLE_ROOT","then","response","json","data","claim","claims","getAddress","undefined","index","amount","proof","catch","error","console","fetchClaim","accountClaimInfo","useUserUnclaimedAmount","userClaimData","canClaim","distributorContract","useMerkleDistributorContract","isClaimedResult","useSingleCallResult","Boolean","loading","result","useUserHasAvailableClaim","sushi","MIST","CurrencyAmount","JSBI","_extends","Object","assign","target","i","arguments","length","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","ChevronRight","forwardRef","_ref","ref","_ref$color","color","_ref$size","size","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","propTypes","displayName","Vesting","i18n","useLingui","isOpen","useModalOpen","ApplicationModal","toggleClaimModal","useToggleSelfClaimModal","attempting","setAttempting","claimCallback","library","claimData","unClaimedAmount","addTransaction","useTransactionAdder","args","estimateGas","estimatedGasLimit","value","gasLimit","calculateGasMargin","summary","toSignificant","recipient","hash","useClaimCallback","unclaimedAmount","claimSubmitted","useUserHasSubmittedClaim","claimConfirmed","totalLocked","setTotalLocked","userLockedAmount","toLowerCase","userLocked","Fraction","BigNumber","pow","toString","log","fetchLockup","pendingTreasurySignature","vault","Number","toFixed","Container","id","name","content","src","alt","_","style","minHeight","ExternalLink","href","QuestionHelper","text","groupSeparator","formatNumber","Dots","Button","disabled","onClick","Loader","marginLeft","window","__NEXT_P","push"],"sourceRoot":""}