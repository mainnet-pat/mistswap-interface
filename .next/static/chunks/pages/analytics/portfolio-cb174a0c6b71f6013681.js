(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8302],{29246:function(n,e,t){var r=t(98612),i=t(37005);n.exports=function(n){return i(n)&&r(n)}},40690:function(n,e,t){var r=t(34963),i=t(29932),o=t(40371),a=t(22545),u=t(29246),c=Math.max;n.exports=function(n){if(!n||!n.length)return[];var e=0;return n=r(n,(function(n){if(u(n))return e=c(n.length,e),!0})),a(e,(function(e){return i(n,o(e))}))}},4788:function(n,e,t){var r=t(5976)(t(40690));n.exports=r},84193:function(n,e,t){"use strict";var r=t(23233),i=(t(67294),t(85893));e.Z=function(n){var e=n.items;return(0,i.jsx)("div",{className:"mt-4 space-y-4",children:e.map((function(n,e){return(0,i.jsx)(r.Z,{href:n.href,activeClassName:"font-bold text-high-emphesis bg-dark-800",children:(0,i.jsx)("a",{className:"flex items-center px-1 py-3 border-transparent rounded hover:bg-dark-900",children:(0,i.jsx)("div",{className:"ml-5",children:n.text})})},e)}))})}},18724:function(n,e,t){"use strict";t.d(e,{Z:function(){return u}});var r=t(13981),i=t(9008),o=t(84193),a=t(85893);function u(n){var e=n.children;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.default,{children:[(0,a.jsx)("title",{children:"MISTswap Liquidity Pair (MLP) Analytics | Mist"}),(0,a.jsx)("meta",{name:"description",content:"MISTswap Liquidity Pair (SLP) Analytics by Mist"})]}),(0,a.jsxs)(r.Z,{id:"analytics",maxWidth:"full",className:"grid h-full grid-flow-col grid-cols-10 px-4 mx-auto gap-9",children:[(0,a.jsx)("div",{className:"sticky top-0 hidden lg:block md:col-span-2 3xl:col-start-2 3xl:col-span-1",children:(0,a.jsx)(o.Z,{items:[{text:"Dashboard",href:"/analytics/dashboard"},{text:"xMist",href:"/analytics/xMIST"},{text:"Farms",href:"/analytics/farms"},{text:"Pairs",href:"/analytics/pairs"},{text:"Tokens",href:"/analytics/tokens"}]})}),(0,a.jsx)("div",{className:"col-span-10 lg:border-l lg:col-span-8 3xl:col-span-7 border-dark-700",children:e})]})]})}},77767:function(n,e,t){"use strict";t.d(e,{zh:function(){return b},Pc:function(){return y},K5:function(){return x},$J:function(){return S},MQ:function(){return w}});var r=t(42982),i=t(4942),o=t(57754),a=t(37876),u=t(30879),c=t(67294),s=t(16979),l=t(99575),d=t(21046),f=t(57043),v=t.n(f),h=t(28269),p=t(4788),m=t.n(p);function b(n){var e=(0,s.mi)(),t=(0,s.sd)(),r=(0,c.useMemo)((function(){var n;return n={},(0,i.Z)(n,a.WJ.MASTERCHEF,e),(0,i.Z)(n,a.WJ.MASTERCHEF_V2,t),n}),[e,t]);return(0,c.useMemo)((function(){return r[n]}),[r,n])}(0,i.Z)({},o.a_.SMARTBCH,[a.WJ.MASTERCHEF,a.WJ.MASTERCHEF_V2]);function y(n,e){var t,r=(0,h.a)().account,i=b(n.chef),a=(0,c.useMemo)((function(){if(r)return[String(n.id),String(r)]}),[n,r]),s=null===(t=(0,u.Wk)(a?i:null,"userInfo",a))||void 0===t?void 0:t.result,l=null===s||void 0===s?void 0:s[0],d=l?o.QA.BigInt(l.toString()):void 0;return d?o.ih.fromRawAmount(e,d):void 0}function x(n){var e,t=(0,h.a)(),r=t.account,i=t.chainId,a=b(n.chef),s=(0,c.useMemo)((function(){if(r)return[String(n.id),String(r)]}),[n,r]),d=null===(e=(0,u.Wk)(s?a:null,"pendingSushi",s))||void 0===e?void 0:e.result,f=null===d||void 0===d?void 0:d[0],v=f?o.QA.BigInt(f.toString()):void 0;return v?o.ih.fromRawAmount(l.yK[i],v):void 0}function g(n,e){var t,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,l=(0,h.a)(),f=l.account,v=null===(t=(0,u.Wk)(n||null,"poolLength",void 0,u.DB))||void 0===t||null===(i=t.result)||void 0===i?void 0:i[0],p=(0,c.useMemo)((function(){if(f&&v)return(0,r.Z)(Array(v.toNumber()).keys()).map((function(n){return[String(n),String(f)]}))}),[v,f]),b=(0,u.es)(p?n:null,"pendingSushi",p),y=(0,u.es)(p?n:null,"userInfo",p),x=(0,c.useCallback)((function(){return o.HW[s]===n.address?a.WJ.MASTERCHEF:o.C1[s]===n.address?a.WJ.MASTERCHEF_V2:void 0}),[s,n]);return(0,c.useMemo)((function(){return b&&y?m()(b,y).map((function(n,e){var t,r;return{id:p[e][0],pendingSushi:(null===(t=n[0].result)||void 0===t?void 0:t[0])||d._Y,amount:(null===(r=n[1].result)||void 0===r?void 0:r[0])||d._Y,chef:x()}})).filter((function(n){var e=n.pendingSushi,t=n.amount;return e&&!e.isZero()||t&&!t.isZero()})):[]}),[p,x,b,y])}function S(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=[g((0,s.mi)(),void 0,n),g((0,s.sd)(),void 0,n)],t=e[0],r=e[1];return v()(t,r)}function w(n){var e=(0,c.useState)(10),t=e[0],r=e[1];return(0,c.useEffect)((function(){return r(10)}),[n.length]),[t,r]}},6500:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return I}});var r=t(42982),i=t(67294),o=t(97735),a=t(4942),u=t(81986),c=t(99477),s=t(57754),l=t(96486),d=t(39202),f=t(52503),v=t(15861),h=t(87757),p=t.n(h);function m(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function b(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?m(Object(t),!0).forEach((function(e){(0,a.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var y=function(n){return new Promise((function(e,t){var r=(0,l.uniq)(n.map((function(n){return"".concat(n.split(",")[0])}))),i=0,o={},u=new WebSocket("".concat("wss://api-v4.zerion.io/socket.io","/?api_token=").concat("Sushi.jwhvesUAPzqxzwMdQUNvyMGQrFfKiwXD","&EIO=3&transport=websocket"));u.addEventListener("message",(function(t){if(t.data.startsWith("40")){var r=t.data.replace("40/","").split(",")[0],c=n.filter((function(n){return n.startsWith(r)}));if(0===c.length)return;c.forEach((function(n){return u.send("42/".concat(n))}))}t.data.startsWith("42")&&(i++,o=b(b({},o),{},(0,a.Z)({},JSON.parse(t.data.split(/,(.+)/)[1])[0],JSON.parse(t.data.split(/,(.+)/)[1])[1].payload)),i===n.length&&(u.close(),e(o)))})),u.addEventListener("error",(function(n){console.log("error fetching assets: ",n),t(n)})),u.addEventListener("open",(function(){r.forEach((function(n){u.send("40/".concat(n,","))}))}))}))},x=function(){var n=(0,v.Z)(p().mark((function n(e){var t,i,o;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=['address,["subscribe",{"scope":["assets"],"payload":{"address":"'.concat(e,'","currency":"usd"}}]'),'address,["subscribe",{"scope":["polygon-assets"],"payload":{"address":"'.concat(e,'","currency":"usd"}}]'),'address,["subscribe",{"scope":["bsc-assets"],"payload":{"address":"'.concat(e,'","currency":"usd"}}]')],function(n){n.assets="Mainnet",n["polygon-assets"]="Matic",n["bsc-assets"]="BSC"}(i||(i={})),n.next=4,y(t);case 4:return o=n.sent,n.abrupt("return",Object.keys(o).map((function(n){var e=i[n.split(" ")[2]];return Object.values(o[n][Object.keys(o[n])[0]]).map((function(n){return b(b({},n.asset),{},{quantity:n.quantity,network:e})}))})).reduce((function(n,e){return[].concat((0,r.Z)(n),(0,r.Z)(e))}),[]));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();var g=t(77767);function S(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function w(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?S(Object(t),!0).forEach((function(e){(0,a.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function j(n,e){var t="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(n,e){if(!n)return;if("string"===typeof n)return k(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k(n,e)}(n))||e&&n&&"number"===typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return a=n.done,n},e:function(n){u=!0,o=n},f:function(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function k(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function M(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=(0,d.aQ)(),r=t.chainId,o=t.account;e=null!==(n=e)&&void 0!==n?n:r;var a=(0,c.Qq)({user:o,chainId:e}),u=(0,c.__)({subset:a.map((function(n){return n.pair.id})),chainId:e,shouldFetch:!!a}),l=(0,i.useMemo)((function(){return u&&a?u.map((function(n){var t=a.find((function(e){return e.pair.id===n.id}));return w(w({},n),{},{userBalanceToken:Number(t.liquidityTokenBalance),userBalanceUSD:n.reserveUSD/n.totalSupply*t.liquidityTokenBalance,chain:s.a_[e]})})):[]}),[u]);return l}function O(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=(0,d.aQ)(),r=t.chainId;e=null!==(n=e)&&void 0!==n?n:r;var a=(0,g.$J)(e),u=(0,c.E2)(void 0,e),l=(0,i.useMemo)((function(){return u.map((function(n){return n.pair}))}),[u]),f=(0,c.__)({subset:l,chainId:e,shouldFetch:!!l}),v=(0,c.Fp)({subset:l,chainId:e,shouldFetch:!!l}),h=(0,c.k$)({chainId:e}),p=(0,i.useMemo)((function(){return a&&u&&(f||v)?a.map((function(n){var t=u.find((function(e){return e.chef===n.chef&&e.id===n.id}));if(t){var r=null===f||void 0===f?void 0:f.find((function(n){return n.id===t.pair})),i=null===v||void 0===v?void 0:v.find((function(n){return n.id===t.pair}));if(r||i)return w(w({},t),{},{type:r?"lp":i?"kashi":"unknown",userStakedToken:n.amount/1e18,userStakedUSD:r?r.reserveUSD/r.totalSupply*n.amount/1e18:n.amount/(0,o.nj)(i)/Math.pow(10,i.token0.decimals)*i.token0.derivedETH*h,chain:s.a_[e]})}})).filter((function(n){return n})):[]}),[a,u,f,v]);return p}function E(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=(0,d.aQ)(),r=t.chainId;e=null!==(n=e)&&void 0!==n?n:r;var o=(0,c.P2)(void 0,e),a=(0,c.rU)({chainId:e}),u=(0,c.k$)({chainId:e});return(0,i.useMemo)((function(){return o&&a&&u?o.map((function(n){var t,r=a.find((function(e){return e.id===n.id}));return w(w({},n),{},{valueUSD:null!==(t=n.amount*(null===r||void 0===r?void 0:r.derivedETH)*u/Math.pow(10,null===r||void 0===r?void 0:r.decimals))&&void 0!==t?t:0,chain:s.a_[e]})})):[]}),[o,a,u])}function N(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=(0,c.Em)(void 0,n),t=(0,i.useMemo)((function(){return e?(0,l.uniq)([].concat((0,r.Z)(e.map((function(n){return n.pair.asset.id}))),(0,r.Z)(e.map((function(n){return n.pair.collateral.id}))))):[]}),[e]),o=(0,c.rU)({subset:t,chainId:n,shouldFetch:!!t}),a=(0,c.k$)({chainId:n});return(0,i.useMemo)((function(){return e&&o&&a?e.map((function(e){var t=o.find((function(n){return n.id===e.pair.asset.id})),r=o.find((function(n){return n.id===e.pair.collateral.id})),i=e.assetAmount/Math.pow(10,t.decimals)*t.derivedETH*a,u=e.borrowedAmount/Math.pow(10,t.decimals)*t.derivedETH*a,c=e.collateralAmount/Math.pow(10,r.decimals)*r.derivedETH*a;return w(w({},e),{},{assetValueUSD:i,borrowedValueUSD:u,collateralValueUSD:c,valueUSD:i+c-u,chain:s.a_[n]})})):[]}),[e,o,a])}function D(){var n=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=(0,d.aQ)().account;return(0,f.ZP)(e?["userAssets",e]:null,(function(){return x(e)}),n).data}();return(0,i.useMemo)((function(){return n?n.map((function(n){var e,t,r,i=null!==(e=null!==(t=null===(r=n.price)||void 0===r?void 0:r.value)&&void 0!==t?t:n.value)&&void 0!==e?e:0;return{token:n.asset_code,symbol:n.symbol,amount:n.quantity,chain:n.network,type:n.type,valueUSD:i*n.quantity/Math.pow(10,n.decimals)}})).filter((function(n){return 0!==n.valueUSD})).filter((function(n){return"sushi"!==n.type})):[]}),[n])}var U=t(85893);function _(n){var e=n.allocations;return(0,U.jsx)("table",{children:(0,U.jsx)("tbody",{children:e.map((function(n,e){return(0,U.jsxs)("tr",{className:0===n.allocation||isNaN(n.allocation)?"hidden":"",style:{borderBottom:"24px solid transparent"},children:[(0,U.jsx)("td",{children:(0,U.jsx)("div",{className:"text-sm font-bold text-high-emphesis whitespace-nowrap",children:n.name})}),(0,U.jsx)("td",{className:"w-full px-2",children:(0,U.jsx)("div",{className:"w-full h-3 overflow-hidden rounded-lg bg-dark-800",children:(0,U.jsx)("div",{className:"h-full bg-gradient-to-r from-blue to-pink",style:{width:"".concat(n.allocation,"%")}})})}),(0,U.jsx)("td",{children:(0,U.jsx)("div",{className:"text-sm font-bold text-high-emphesis whitespace-nowrap",children:(0,o.T3)(n.allocation)})})]},e)}))})})}var Z=t(18724),A=t(49361);function I(){var n=(0,i.useState)("1M"),e=(n[0],n[1],(0,d.aQ)().account),t=function(){var n,e=[],t=j((0,u.x$)(u.L0.LIQUIDITY_MINING));try{for(t.s();!(n=t.n()).done;){var i=n.value;e=[].concat((0,r.Z)(e),(0,r.Z)(O(s.a_[i])))}}catch(o){t.e(o)}finally{t.f()}return e}(),a=function(){var n,e=[],t=j((0,u.x$)(u.L0.AMM));try{for(t.s();!(n=t.n()).done;){var i=n.value;e=[].concat((0,r.Z)(e),(0,r.Z)(M(s.a_[i])))}}catch(o){t.e(o)}finally{t.f()}return e}(),c=D(),f=E(),v=function(){var n,e=[],t=j((0,u.x$)(u.L0.BENTOBOX));try{for(t.s();!(n=t.n()).done;){var i=n.value;e=[].concat((0,r.Z)(e),(0,r.Z)(N(s.a_[i])))}}catch(o){t.e(o)}finally{t.f()}return e}(),h=(0,i.useMemo)((function(){var n=0;return t.forEach((function(e){return n+=e.userStakedUSD})),a.forEach((function(e){return n+=e.userBalanceUSD})),c.forEach((function(e){return n+=e.valueUSD})),f.forEach((function(e){return n+=e.valueUSD})),v.forEach((function(e){return n+=e.valueUSD})),n}),[t,a,c,f,v]),p=(0,i.useMemo)((function(){return[{name:"Yield Farming",allocation:t.reduce((function(n,e){return n+e.userStakedUSD}),0)/h*100},{name:"Liquidity",allocation:a.reduce((function(n,e){return n+e.userBalanceUSD}),0)/h*100},{name:"Wallet",allocation:c.reduce((function(n,e){return n+e.valueUSD}),0)/h*100},{name:"BentoBox",allocation:f.reduce((function(n,e){return n+e.valueUSD}),0)/h*100},{name:"Kashi",allocation:v.reduce((function(n,e){return n+e.valueUSD}),0)/h*100}]}),[h,t,a,c,f,v]),m=(0,i.useMemo)((function(){return(0,l.uniq)([].concat((0,r.Z)(t.map((function(n){return n.chain.toLowerCase()}))),(0,r.Z)(a.map((function(n){return n.chain.toLowerCase()}))),(0,r.Z)(c.map((function(n){return n.chain.toLowerCase()}))),(0,r.Z)(f.map((function(n){return n.chain.toLowerCase()}))),(0,r.Z)(v.map((function(n){return n.chain.toLowerCase()}))))).map((function(n){var e,r,i,o,u,l=(null===(e=t.filter((function(e){return e.chain.toLowerCase()===n})))||void 0===e?void 0:e.reduce((function(n,e){return n+e.userStakedUSD}),0))+(null===(r=a.filter((function(e){return e.chain.toLowerCase()===n})))||void 0===r?void 0:r.reduce((function(n,e){return n+e.userBalanceUSD}),0))+(null===(i=c.filter((function(e){return e.chain.toLowerCase()===n})))||void 0===i?void 0:i.reduce((function(n,e){return n+e.valueUSD}),0))+(null===(o=f.filter((function(e){return e.chain.toLowerCase()===n})))||void 0===o?void 0:o.reduce((function(n,e){return n+e.valueUSD}),0))+(null===(u=v.filter((function(e){return e.chain.toLowerCase()===n})))||void 0===u?void 0:u.reduce((function(n,e){return n+e.valueUSD}),0));return{name:A.z[s.a_[n.toUpperCase()]],allocation:l/h*100}}))}),[h,t,a,c,f,v]);return(0,U.jsxs)(Z.Z,{children:[(0,U.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,U.jsxs)("div",{className:"flex flex-row items-center space-x-4",children:[(0,U.jsx)("div",{className:"text-2xl font-bold text-high-emphesis",children:"Total Assets"}),(0,U.jsx)("div",{children:e?"(".concat((0,o.Xn)(e),")"):""})]}),(0,U.jsx)("div",{className:"text-2xl font-bold text-transparent bg-gradient-to-r from-blue to-pink bg-clip-text",children:h?(0,o.uf)(h,!0):""})]}),(0,U.jsx)("div",{className:"border-b border-dark-800"}),(0,U.jsxs)("div",{className:"grid grid-flow-col grid-cols-5",children:[(0,U.jsx)("div",{className:"col-span-3"}),(0,U.jsxs)("div",{className:"flex flex-col col-span-2 space-y-4",children:[(0,U.jsx)("div",{className:"font-bold text-secondary",children:"Asset Allocation"}),(0,U.jsx)("div",{className:"border-b border-dark-800"}),(0,U.jsx)(_,{allocations:p}),(0,U.jsx)("div",{className:"font-bold text-secondary",children:"Networks"}),(0,U.jsx)("div",{className:"border-b border-dark-800"}),(0,U.jsx)(_,{allocations:m})]})]})]})}},93186:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/analytics/portfolio",function(){return t(6500)}])}},function(n){n.O(0,[3662,8976,2172,1502,9774,2888,179],(function(){return e=93186,n(n.s=e);var e}));var e=n.O();_N_E=e}]);
//# sourceMappingURL=portfolio-cb174a0c6b71f6013681.js.map